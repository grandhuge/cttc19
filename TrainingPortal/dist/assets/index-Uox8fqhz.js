(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function ME(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var gm={exports:{}},Ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function eS(){if(jv)return Ll;jv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Ll.Fragment=e,Ll.jsx=n,Ll.jsxs=n,Ll}var Pv;function tS(){return Pv||(Pv=1,gm.exports=eS()),gm.exports}var y=tS(),ym={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function nS(){if(Lv)return Ie;Lv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),C=Symbol.iterator;function M(O){return O===null||typeof O!="object"?null:(O=C&&O[C]||O["@@iterator"],typeof O=="function"?O:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,U={};function Y(O,Q,ue){this.props=O,this.context=Q,this.refs=U,this.updater=ue||B}Y.prototype.isReactComponent={},Y.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},Y.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function W(){}W.prototype=Y.prototype;function j(O,Q,ue){this.props=O,this.context=Q,this.refs=U,this.updater=ue||B}var $=j.prototype=new W;$.constructor=j,X($,Y.prototype),$.isPureReactComponent=!0;var le=Array.isArray;function oe(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function x(O,Q,ue){var ee=ue.ref;return{$$typeof:i,type:O,key:Q,ref:ee!==void 0?ee:null,props:ue}}function N(O,Q){return x(O.type,Q,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function V(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return Q[ue]})}var D=/\/+/g;function Te(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):Q.toString(36)}function pe(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(oe,oe):(O.status="pending",O.then(function(Q){O.status==="pending"&&(O.status="fulfilled",O.value=Q)},function(Q){O.status==="pending"&&(O.status="rejected",O.reason=Q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function z(O,Q,ue,ee,ge){var xe=typeof O;(xe==="undefined"||xe==="boolean")&&(O=null);var Re=!1;if(O===null)Re=!0;else switch(xe){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(O.$$typeof){case i:case e:Re=!0;break;case E:return Re=O._init,z(Re(O._payload),Q,ue,ee,ge)}}if(Re)return ge=ge(O),Re=ee===""?"."+Te(O,0):ee,le(ge)?(ue="",Re!=null&&(ue=Re.replace(D,"$&/")+"/"),z(ge,Q,ue,"",function(bn){return bn})):ge!=null&&(I(ge)&&(ge=N(ge,ue+(ge.key==null||O&&O.key===ge.key?"":(""+ge.key).replace(D,"$&/")+"/")+Re)),Q.push(ge)),1;Re=0;var ft=ee===""?".":ee+":";if(le(O))for(var Ke=0;Ke<O.length;Ke++)ee=O[Ke],xe=ft+Te(ee,Ke),Re+=z(ee,Q,ue,xe,ge);else if(Ke=M(O),typeof Ke=="function")for(O=Ke.call(O),Ke=0;!(ee=O.next()).done;)ee=ee.value,xe=ft+Te(ee,Ke++),Re+=z(ee,Q,ue,xe,ge);else if(xe==="object"){if(typeof O.then=="function")return z(pe(O),Q,ue,ee,ge);throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Re}function re(O,Q,ue){if(O==null)return O;var ee=[],ge=0;return z(O,ee,"","",function(xe){return Q.call(ue,xe,ge++)}),ee}function ce(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var de=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ve={map:re,forEach:function(O,Q,ue){re(O,function(){Q.apply(this,arguments)},ue)},count:function(O){var Q=0;return re(O,function(){Q++}),Q},toArray:function(O){return re(O,function(Q){return Q})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ie.Activity=T,Ie.Children=ve,Ie.Component=Y,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=j,Ie.StrictMode=s,Ie.Suspense=m,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(O){return R.H.useMemoCache(O)}},Ie.cache=function(O){return function(){return O.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(O,Q,ue){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ee=X({},O.props),ge=O.key;if(Q!=null)for(xe in Q.key!==void 0&&(ge=""+Q.key),Q)!A.call(Q,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&Q.ref===void 0||(ee[xe]=Q[xe]);var xe=arguments.length-2;if(xe===1)ee.children=ue;else if(1<xe){for(var Re=Array(xe),ft=0;ft<xe;ft++)Re[ft]=arguments[ft+2];ee.children=Re}return x(O.type,ge,ee)},Ie.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ie.createElement=function(O,Q,ue){var ee,ge={},xe=null;if(Q!=null)for(ee in Q.key!==void 0&&(xe=""+Q.key),Q)A.call(Q,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ge[ee]=Q[ee]);var Re=arguments.length-2;if(Re===1)ge.children=ue;else if(1<Re){for(var ft=Array(Re),Ke=0;Ke<Re;Ke++)ft[Ke]=arguments[Ke+2];ge.children=ft}if(O&&O.defaultProps)for(ee in Re=O.defaultProps,Re)ge[ee]===void 0&&(ge[ee]=Re[ee]);return x(O,xe,ge)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(O){return{$$typeof:p,render:O}},Ie.isValidElement=I,Ie.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:ce}},Ie.memo=function(O,Q){return{$$typeof:g,type:O,compare:Q===void 0?null:Q}},Ie.startTransition=function(O){var Q=R.T,ue={};R.T=ue;try{var ee=O(),ge=R.S;ge!==null&&ge(ue,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(oe,de)}catch(xe){de(xe)}finally{Q!==null&&ue.types!==null&&(Q.types=ue.types),R.T=Q}},Ie.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ie.use=function(O){return R.H.use(O)},Ie.useActionState=function(O,Q,ue){return R.H.useActionState(O,Q,ue)},Ie.useCallback=function(O,Q){return R.H.useCallback(O,Q)},Ie.useContext=function(O){return R.H.useContext(O)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(O,Q){return R.H.useDeferredValue(O,Q)},Ie.useEffect=function(O,Q){return R.H.useEffect(O,Q)},Ie.useEffectEvent=function(O){return R.H.useEffectEvent(O)},Ie.useId=function(){return R.H.useId()},Ie.useImperativeHandle=function(O,Q,ue){return R.H.useImperativeHandle(O,Q,ue)},Ie.useInsertionEffect=function(O,Q){return R.H.useInsertionEffect(O,Q)},Ie.useLayoutEffect=function(O,Q){return R.H.useLayoutEffect(O,Q)},Ie.useMemo=function(O,Q){return R.H.useMemo(O,Q)},Ie.useOptimistic=function(O,Q){return R.H.useOptimistic(O,Q)},Ie.useReducer=function(O,Q,ue){return R.H.useReducer(O,Q,ue)},Ie.useRef=function(O){return R.H.useRef(O)},Ie.useState=function(O){return R.H.useState(O)},Ie.useSyncExternalStore=function(O,Q,ue){return R.H.useSyncExternalStore(O,Q,ue)},Ie.useTransition=function(){return R.H.useTransition()},Ie.version="19.2.0",Ie}var Uv;function dp(){return Uv||(Uv=1,ym.exports=nS()),ym.exports}var P=dp();const rS=ME(P);var vm={exports:{}},Ul={},_m={exports:{}},Em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function iS(){return zv||(zv=1,(function(i){function e(z,re){var ce=z.length;z.push(re);e:for(;0<ce;){var de=ce-1>>>1,ve=z[de];if(0<o(ve,re))z[de]=re,z[ce]=ve,ce=de;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var re=z[0],ce=z.pop();if(ce!==re){z[0]=ce;e:for(var de=0,ve=z.length,O=ve>>>1;de<O;){var Q=2*(de+1)-1,ue=z[Q],ee=Q+1,ge=z[ee];if(0>o(ue,ce))ee<ve&&0>o(ge,ue)?(z[de]=ge,z[ee]=ce,de=ee):(z[de]=ue,z[Q]=ce,de=Q);else if(ee<ve&&0>o(ge,ce))z[de]=ge,z[ee]=ce,de=ee;else break e}}return re}function o(z,re){var ce=z.sortIndex-re.sortIndex;return ce!==0?ce:z.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var m=[],g=[],E=1,T=null,C=3,M=!1,B=!1,X=!1,U=!1,Y=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function $(z){for(var re=n(g);re!==null;){if(re.callback===null)s(g);else if(re.startTime<=z)s(g),re.sortIndex=re.expirationTime,e(m,re);else break;re=n(g)}}function le(z){if(X=!1,$(z),!B)if(n(m)!==null)B=!0,oe||(oe=!0,V());else{var re=n(g);re!==null&&pe(le,re.startTime-z)}}var oe=!1,R=-1,A=5,x=-1;function N(){return U?!0:!(i.unstable_now()-x<A)}function I(){if(U=!1,oe){var z=i.unstable_now();x=z;var re=!0;try{e:{B=!1,X&&(X=!1,W(R),R=-1),M=!0;var ce=C;try{t:{for($(z),T=n(m);T!==null&&!(T.expirationTime>z&&N());){var de=T.callback;if(typeof de=="function"){T.callback=null,C=T.priorityLevel;var ve=de(T.expirationTime<=z);if(z=i.unstable_now(),typeof ve=="function"){T.callback=ve,$(z),re=!0;break t}T===n(m)&&s(m),$(z)}else s(m);T=n(m)}if(T!==null)re=!0;else{var O=n(g);O!==null&&pe(le,O.startTime-z),re=!1}}break e}finally{T=null,C=ce,M=!1}re=void 0}}finally{re?V():oe=!1}}}var V;if(typeof j=="function")V=function(){j(I)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Te=D.port2;D.port1.onmessage=I,V=function(){Te.postMessage(null)}}else V=function(){Y(I,0)};function pe(z,re){R=Y(function(){z(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_next=function(z){switch(C){case 1:case 2:case 3:var re=3;break;default:re=C}var ce=C;C=re;try{return z()}finally{C=ce}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(z,re){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ce=C;C=z;try{return re()}finally{C=ce}},i.unstable_scheduleCallback=function(z,re,ce){var de=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?de+ce:de):ce=de,z){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ce+ve,z={id:E++,callback:re,priorityLevel:z,startTime:ce,expirationTime:ve,sortIndex:-1},ce>de?(z.sortIndex=ce,e(g,z),n(m)===null&&z===n(g)&&(X?(W(R),R=-1):X=!0,pe(le,ce-de))):(z.sortIndex=ve,e(m,z),B||M||(B=!0,oe||(oe=!0,V()))),z},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(z){var re=C;return function(){var ce=C;C=re;try{return z.apply(this,arguments)}finally{C=ce}}}})(Em)),Em}var Bv;function sS(){return Bv||(Bv=1,_m.exports=iS()),_m.exports}var bm={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function aS(){if(qv)return nn;qv=1;var i=dp();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,g,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:g,implementation:E}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(m,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(m,g,null,E)},nn.flushSync=function(m){var g=h.T,E=s.p;try{if(h.T=null,s.p=2,m)return m()}finally{h.T=g,s.p=E,s.d.f()}},nn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},nn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},nn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var E=g.as,T=p(E,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:C,fetchPriority:M}):E==="script"&&s.d.X(m,{crossOrigin:T,integrity:C,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},nn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},nn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,T=p(E,g.crossOrigin);s.d.L(m,E,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},nn.preloadModule=function(m,g){if(typeof m=="string")if(g){var E=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},nn.requestFormReset=function(m){s.d.r(m)},nn.unstable_batchedUpdates=function(m,g){return m(g)},nn.useFormState=function(m,g,E){return h.H.useFormState(m,g,E)},nn.useFormStatus=function(){return h.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var Hv;function oS(){if(Hv)return bm.exports;Hv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),bm.exports=aS(),bm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function lS(){if(Fv)return Ul;Fv=1;var i=sS(),e=dp(),n=oS();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function g(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),t;if(f===l)return m(d),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var _=!1,w=d.child;w;){if(w===a){_=!0,a=d,l=f;break}if(w===l){_=!0,l=d,a=f;break}w=w.sibling}if(!_){for(w=f.child;w;){if(w===a){_=!0,a=f,l=d;break}if(w===l){_=!0,l=f,a=d;break}w=w.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function E(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=E(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,C=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),j=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function Te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case Y:return"Profiler";case U:return"StrictMode";case le:return"Suspense";case oe:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case j:return t.displayName||"Context";case W:return(t._context.displayName||"Context")+".Consumer";case $:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return r=t.displayName||null,r!==null?r:Te(t.type)||"Memo";case A:r=t._payload,t=t._init;try{return Te(t(r))}catch{}}return null}var pe=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},de=[],ve=-1;function O(t){return{current:t}}function Q(t){0>ve||(t.current=de[ve],de[ve]=null,ve--)}function ue(t,r){ve++,de[ve]=t.current,t.current=r}var ee=O(null),ge=O(null),xe=O(null),Re=O(null);function ft(t,r){switch(ue(xe,r),ue(ge,t),ue(ee,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?sv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=sv(r),t=av(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(ee),ue(ee,t)}function Ke(){Q(ee),Q(ge),Q(xe)}function bn(t){t.memoizedState!==null&&ue(Re,t);var r=ee.current,a=av(r,t.type);r!==a&&(ue(ge,t),ue(ee,a))}function Si(t){ge.current===t&&(Q(ee),Q(ge)),Re.current===t&&(Q(Re),Ml._currentValue=ce)}var Ai,Ci;function On(t){if(Ai===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ai=r&&r[1]||"",Ci=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ai+t+Ci}var Is=!1;function Qr(t,r){if(!t||Is)return"";Is=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var K=Z}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Z){K=Z}t.call(ie.prototype)}}else{try{throw Error()}catch(Z){K=Z}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&K&&typeof Z.stack=="string")return[Z.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],w=f[1];if(_&&w){var k=_.split(`
`),G=w.split(`
`);for(d=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;if(l===k.length||d===G.length)for(l=k.length-1,d=G.length-1;1<=l&&0<=d&&k[l]!==G[d];)d--;for(;1<=l&&0<=d;l--,d--)if(k[l]!==G[d]){if(l!==1||d!==1)do if(l--,d--,0>d||k[l]!==G[d]){var te=`
`+k[l].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=l&&0<=d);break}}}finally{Is=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?On(a):""}function At(t,r){switch(t.tag){case 26:case 27:case 5:return On(t.type);case 16:return On("Lazy");case 13:return t.child!==r&&r!==null?On("Suspense Fallback"):On("Suspense");case 19:return On("SuspenseList");case 0:case 15:return Qr(t.type,!1);case 11:return Qr(t.type.render,!1);case 1:return Qr(t.type,!0);case 31:return On("Activity");default:return""}}function Wn(t){try{var r="",a=null;do r+=At(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ot=Object.prototype.hasOwnProperty,_t=i.unstable_scheduleCallback,Ri=i.unstable_cancelCallback,yd=i.unstable_shouldYield,Cu=i.unstable_requestPaint,ln=i.unstable_now,Ds=i.unstable_getCurrentPriorityLevel,Po=i.unstable_ImmediatePriority,Lo=i.unstable_UserBlockingPriority,Ni=i.unstable_NormalPriority,vd=i.unstable_LowPriority,Ru=i.unstable_IdlePriority,Nu=i.log,Iu=i.unstable_setDisableYieldValue,Zn=null,Yt=null;function Mn(t){if(typeof Nu=="function"&&Iu(t),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Zn,t)}catch{}}var Et=Math.clz32?Math.clz32:ku,Du=Math.log,xa=Math.LN2;function ku(t){return t>>>=0,t===0?32:31-(Du(t)/xa|0)|0}var pr=256,ks=262144,Ct=4194304;function gr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function yr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?d=gr(l):(_&=w,_!==0?d=gr(_):a||(a=w&~t,a!==0&&(d=gr(a))))):(w=l&~f,w!==0?d=gr(w):_!==0?d=gr(_):a||(a=l&~t,a!==0&&(d=gr(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function er(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function _d(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ou(){var t=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),t}function vr(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Os(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ed(t,r,a,l,d,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,k=t.expirationTimes,G=t.hiddenUpdates;for(a=_&~a;0<a;){var te=31-Et(a),ie=1<<te;w[te]=0,k[te]=-1;var K=G[te];if(K!==null)for(G[te]=null,te=0;te<K.length;te++){var Z=K[te];Z!==null&&(Z.lane&=-536870913)}a&=~ie}l!==0&&Ms(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~r))}function Ms(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Et(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Uo(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Et(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function zo(t,r){var a=r&-r;return a=(a&42)!==0?1:Vs(a),(a&(t.suspendedLanes|r))!==0?0:a}function Vs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Yr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Mu(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:Nv(t.type))}function tr(t,r){var a=re.p;try{return re.p=t,r()}finally{re.p=a}}var nr=Math.random().toString(36).slice(2),Rt="__reactFiber$"+nr,qt="__reactProps$"+nr,_r="__reactContainer$"+nr,wa="__reactEvents$"+nr,bd="__reactListeners$"+nr,Vu="__reactHandles$"+nr,ju="__reactResources$"+nr,Er="__reactMarker$"+nr;function Sa(t){delete t[Rt],delete t[qt],delete t[wa],delete t[bd],delete t[Vu]}function br(t){var r=t[Rt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[_r]||a[Rt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=fv(t);t!==null;){if(a=t[Rt])return a;t=fv(t)}return r}t=a,a=t.parentNode}return null}function Vn(t){if(t=t[Rt]||t[_r]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Tn(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Tr(t){var r=t[ju];return r||(r=t[ju]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Nt(t){t[Er]=!0}var Bo=new Set,qo={};function xr(t,r){wr(t,r),wr(t+"Capture",r)}function wr(t,r){for(qo[t]=r,t=0;t<r.length;t++)Bo.add(r[t])}var Ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fo={},Go={};function Pu(t){return ot.call(Go,t)?!0:ot.call(Fo,t)?!1:Ho.test(t)?Go[t]=!0:(Fo[t]=!0,!1)}function Aa(t,r,a){if(Pu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function xn(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function It(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function Ht(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ii(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qo(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Xe(t){if(!t._valueTracker){var r=Ii(t)?"checked":"value";t._valueTracker=Qo(t,r,""+t[r])}}function js(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ii(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Sr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ps=/[\n"\\]/g;function hn(t){return t.replace(Ps,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ca(t,r,a,l,d,f,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ht(r)):t.value!==""+Ht(r)&&(t.value=""+Ht(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?Yo(t,_,Ht(r)):a!=null?Yo(t,_,Ht(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Ht(w):t.removeAttribute("name")}function Lu(t,r,a,l,d,f,_,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){Xe(t);return}a=a!=null?""+Ht(a):"",r=r!=null?""+Ht(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Xe(t)}function Yo(t,r,a){r==="number"&&Sr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Di(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ht(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function Uu(t,r,a){if(r!=null&&(r=""+Ht(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+Ht(a):""}function ki(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(pe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Ht(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Xe(t)}function dn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var zu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||zu.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Ko(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&$o(t,d,l)}else for(var f in r)r.hasOwnProperty(f)&&$o(t,f,r[f])}function Ra(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Oi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(t){return Oi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function rr(){}var Xo=null;function jn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mi=null,Ar=null;function Ls(t){var r=Vn(t);if(r&&(t=r.stateNode)){var a=t[qt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Ca(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[qt]||null;if(!d)throw Error(s(90));Ca(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&js(l)}break e;case"textarea":Uu(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Di(t,!!a.multiple,r,!1)}}}var Ia=!1;function Vi(t,r,a){if(Ia)return t(r,a);Ia=!0;try{var l=t(r);return l}finally{if(Ia=!1,(Mi!==null||Ar!==null)&&(Mc(),Mi&&(r=Mi,t=Ar,Ar=Mi=null,Ls(r),t)))for(r=0;r<t.length;r++)Ls(t[r])}}function ir(t,r){var a=t.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Us=!1;if(Pn)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Us=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{Us=!1}var Cr=null,Jo=null,zs=null;function Wo(){if(zs)return zs;var t,r=Jo,a=r.length,l,d="value"in Cr?Cr.value:Cr.textContent,f=d.length;for(t=0;t<a&&r[t]===d[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===d[f-l];l++);return zs=d.slice(t,1<l?1-l:void 0)}function Bs(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function $r(){return!0}function sr(){return!1}function $t(t){function r(a,l,d,f,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$r:sr,this.isPropagationStopped=sr,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),r}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rr=$t(Kr),ji=T({},Kr,{view:0,detail:0}),Zo=$t(ji),Pi,Da,Nr,ka=T({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nr&&(Nr&&t.type==="mousemove"?(Pi=t.screenX-Nr.screenX,Da=t.screenY-Nr.screenY):Da=Pi=0,Nr=t),Pi)},movementY:function(t){return"movementY"in t?t.movementY:Da}}),el=$t(ka),qs=T({},ka,{dataTransfer:0}),qu=$t(qs),Hu=T({},ji,{relatedTarget:0}),Hs=$t(Hu),tl=T({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Fu=$t(tl),Oa=T({},Kr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gu=$t(Oa),Qu=T({},Kr,{data:0}),Ir=$t(Qu),Yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ku[t])?!!r[t]:!1}function Li(){return Xu}var un=T({},ji,{key:function(t){if(t.key){var r=Yu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Bs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$u[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(t){return t.type==="keypress"?Bs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ju=$t(un),Wu=T({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xr=$t(Wu),c=T({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),v=$t(c),b=T({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=$t(b),H=T({},ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=$t(H),he=T({},Kr,{newState:0,oldState:0}),ke=$t(he),bt=[9,13,27,32],Qe=Pn&&"CompositionEvent"in window,ct=null;Pn&&"documentMode"in document&&(ct=document.documentMode);var Ln=Pn&&"TextEvent"in window&&!ct,Dr=Pn&&(!Qe||ct&&8<ct&&11>=ct),ar=" ",or=!1;function Fs(t,r){switch(t){case"keyup":return bt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ma(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Va=!1;function wx(t,r){switch(t){case"compositionend":return Ma(r);case"keypress":return r.which!==32?null:(or=!0,ar);case"textInput":return t=r.data,t===ar&&or?null:t;default:return null}}function Sx(t,r){if(Va)return t==="compositionend"||!Qe&&Fs(t,r)?(t=Wo(),zs=Jo=Cr=null,Va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Dr&&r.locale!=="ko"?null:r.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ax[t.type]:r==="textarea"}function yg(t,r,a,l){Mi?Ar?Ar.push(l):Ar=[l]:Mi=l,r=Bc(r,"onChange"),0<r.length&&(a=new Rr("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var nl=null,rl=null;function Cx(t){Z0(t,0)}function Zu(t){var r=Tn(t);if(js(r))return t}function vg(t,r){if(t==="change")return r}var _g=!1;if(Pn){var Td;if(Pn){var xd="oninput"in document;if(!xd){var Eg=document.createElement("div");Eg.setAttribute("oninput","return;"),xd=typeof Eg.oninput=="function"}Td=xd}else Td=!1;_g=Td&&(!document.documentMode||9<document.documentMode)}function bg(){nl&&(nl.detachEvent("onpropertychange",Tg),rl=nl=null)}function Tg(t){if(t.propertyName==="value"&&Zu(rl)){var r=[];yg(r,rl,t,jn(t)),Vi(Cx,r)}}function Rx(t,r,a){t==="focusin"?(bg(),nl=r,rl=a,nl.attachEvent("onpropertychange",Tg)):t==="focusout"&&bg()}function Nx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zu(rl)}function Ix(t,r){if(t==="click")return Zu(r)}function Dx(t,r){if(t==="input"||t==="change")return Zu(r)}function kx(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var wn=typeof Object.is=="function"?Object.is:kx;function il(t,r){if(wn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!ot.call(r,d)||!wn(t[d],r[d]))return!1}return!0}function xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,r){var a=xg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xg(a)}}function Sg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Sg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ag(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Sr(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Sr(t.document)}return r}function wd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Ox=Pn&&"documentMode"in document&&11>=document.documentMode,ja=null,Sd=null,sl=null,Ad=!1;function Cg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ad||ja==null||ja!==Sr(l)||(l=ja,"selectionStart"in l&&wd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),sl&&il(sl,l)||(sl=l,l=Bc(Sd,"onSelect"),0<l.length&&(r=new Rr("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=ja)))}function Gs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Pa={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},Cd={},Rg={};Pn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Qs(t){if(Cd[t])return Cd[t];if(!Pa[t])return t;var r=Pa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Rg)return Cd[t]=r[a];return t}var Ng=Qs("animationend"),Ig=Qs("animationiteration"),Dg=Qs("animationstart"),Mx=Qs("transitionrun"),Vx=Qs("transitionstart"),jx=Qs("transitioncancel"),kg=Qs("transitionend"),Og=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function lr(t,r){Og.set(t,r),xr(r,[t])}var ec=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Un=[],La=0,Nd=0;function tc(){for(var t=La,r=Nd=La=0;r<t;){var a=Un[r];Un[r++]=null;var l=Un[r];Un[r++]=null;var d=Un[r];Un[r++]=null;var f=Un[r];if(Un[r++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}f!==0&&Mg(a,d,f)}}function nc(t,r,a,l){Un[La++]=t,Un[La++]=r,Un[La++]=a,Un[La++]=l,Nd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Id(t,r,a,l){return nc(t,r,a,l),rc(t)}function Ys(t,r){return nc(t,null,null,r),rc(t)}function Mg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&r!==null&&(d=31-Et(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function rc(t){if(50<Cl)throw Cl=0,zf=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ua={};function Px(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,r,a,l){return new Px(t,r,a,l)}function Dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jr(t,r){var a=t.alternate;return a===null?(a=Sn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Vg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ic(t,r,a,l,d,f){var _=0;if(l=t,typeof t=="function")Dd(t)&&(_=1);else if(typeof t=="string")_=qw(t,a,ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=Sn(31,a,r,d),t.elementType=x,t.lanes=f,t;case X:return $s(a.children,d,f,r);case U:_=8,d|=24;break;case Y:return t=Sn(12,a,r,d|2),t.elementType=Y,t.lanes=f,t;case le:return t=Sn(13,a,r,d),t.elementType=le,t.lanes=f,t;case oe:return t=Sn(19,a,r,d),t.elementType=oe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j:_=10;break e;case W:_=9;break e;case $:_=11;break e;case R:_=14;break e;case A:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Sn(_,a,r,d),r.elementType=t,r.type=l,r.lanes=f,r}function $s(t,r,a,l){return t=Sn(7,t,l,r),t.lanes=a,t}function kd(t,r,a){return t=Sn(6,t,null,r),t.lanes=a,t}function jg(t){var r=Sn(18,null,null,0);return r.stateNode=t,r}function Od(t,r,a){return r=Sn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Pg=new WeakMap;function zn(t,r){if(typeof t=="object"&&t!==null){var a=Pg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Wn(r)},Pg.set(t,r),r)}return{value:t,source:r,stack:Wn(r)}}var za=[],Ba=0,sc=null,al=0,Bn=[],qn=0,Ui=null,kr=1,Or="";function Wr(t,r){za[Ba++]=al,za[Ba++]=sc,sc=t,al=r}function Lg(t,r,a){Bn[qn++]=kr,Bn[qn++]=Or,Bn[qn++]=Ui,Ui=t;var l=kr;t=Or;var d=32-Et(l)-1;l&=~(1<<d),a+=1;var f=32-Et(r)+d;if(30<f){var _=d-d%5;f=(l&(1<<_)-1).toString(32),l>>=_,d-=_,kr=1<<32-Et(r)+d|a<<d|l,Or=f+t}else kr=1<<f|a<<d|l,Or=t}function Md(t){t.return!==null&&(Wr(t,1),Lg(t,1,0))}function Vd(t){for(;t===sc;)sc=za[--Ba],za[Ba]=null,al=za[--Ba],za[Ba]=null;for(;t===Ui;)Ui=Bn[--qn],Bn[qn]=null,Or=Bn[--qn],Bn[qn]=null,kr=Bn[--qn],Bn[qn]=null}function Ug(t,r){Bn[qn++]=kr,Bn[qn++]=Or,Bn[qn++]=Ui,kr=r.id,Or=r.overflow,Ui=t}var Kt=null,lt=null,qe=!1,zi=null,Hn=!1,jd=Error(s(519));function Bi(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ol(zn(r,t)),jd}function zg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Rt]=t,r[qt]=l,a){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(a=0;a<Nl.length;a++)je(Nl[a],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":je("invalid",r),Lu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",r);break;case"textarea":je("invalid",r),ki(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||rv(r.textContent,a)?(l.popover!=null&&(je("beforetoggle",r),je("toggle",r)),l.onScroll!=null&&je("scroll",r),l.onScrollEnd!=null&&je("scrollend",r),l.onClick!=null&&(r.onclick=rr),r=!0):r=!1,r||Bi(t,!0)}function Bg(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Kt=Kt.return}}function qa(t){if(t!==Kt)return!1;if(!qe)return Bg(t),qe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||tm(t.type,t.memoizedProps)),a=!a),a&&lt&&Bi(t),Bg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));lt=dv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));lt=dv(t)}else r===27?(r=lt,ts(t.type)?(t=am,am=null,lt=t):lt=r):lt=Kt?Gn(t.stateNode.nextSibling):null;return!0}function Ks(){lt=Kt=null,qe=!1}function Pd(){var t=zi;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),zi=null),t}function ol(t){zi===null?zi=[t]:zi.push(t)}var Ld=O(null),Xs=null,Zr=null;function qi(t,r,a){ue(Ld,r._currentValue),r._currentValue=a}function ei(t){t._currentValue=Ld.current,Q(Ld)}function Ud(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function zd(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var _=d.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=d;for(var k=0;k<r.length;k++)if(w.context===r[k]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),Ud(f.return,a,t),l||(_=null);break e}f=w.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Ud(_,a,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ha(t,r,a,l){t=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var w=d.type;wn(d.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(d===Re.current){if(_=d.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Ml):t=[Ml])}d=d.return}t!==null&&zd(r,t,a,l),r.flags|=262144}function ac(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Js(t){Xs=t,Zr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xt(t){return qg(Xs,t)}function oc(t,r){return Xs===null&&Js(t),qg(t,r)}function qg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Zr===null){if(t===null)throw Error(s(308));Zr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Zr=Zr.next=r;return a}var Lx=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},Ux=i.unstable_scheduleCallback,zx=i.unstable_NormalPriority,Dt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new Lx,data:new Map,refCount:0}}function ll(t){t.refCount--,t.refCount===0&&Ux(zx,function(){t.controller.abort()})}var ul=null,qd=0,Fa=0,Ga=null;function Bx(t,r){if(ul===null){var a=ul=[];qd=0,Fa=Qf(),Ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return qd++,r.then(Hg,Hg),r}function Hg(){if(--qd===0&&ul!==null){Ga!==null&&(Ga.status="fulfilled");var t=ul;ul=null,Fa=0,Ga=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function qx(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Fg=z.S;z.S=function(t,r){C0=ln(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Bx(t,r),Fg!==null&&Fg(t,r)};var Ws=O(null);function Hd(){var t=Ws.current;return t!==null?t:st.pooledCache}function lc(t,r){r===null?ue(Ws,Ws.current):ue(Ws,r.pool)}function Gg(){var t=Hd();return t===null?null:{parent:Dt._currentValue,pool:t}}var Qa=Error(s(460)),Fd=Error(s(474)),uc=Error(s(542)),cc={then:function(){}};function Qg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Yg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(rr,rr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Kg(t),t;default:if(typeof r.status=="string")r.then(rr,rr);else{if(t=st,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Kg(t),t}throw ea=r,Qa}}function Zs(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ea=a,Qa):a}}var ea=null;function $g(){if(ea===null)throw Error(s(459));var t=ea;return ea=null,t}function Kg(t){if(t===Qa||t===uc)throw Error(s(483))}var Ya=null,cl=0;function hc(t){var r=cl;return cl+=1,Ya===null&&(Ya=[]),Yg(Ya,t,r)}function hl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function dc(t,r){throw r.$$typeof===C?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Xg(t){function r(q,L){if(t){var F=q.deletions;F===null?(q.deletions=[L],q.flags|=16):F.push(L)}}function a(q,L){if(!t)return null;for(;L!==null;)r(q,L),L=L.sibling;return null}function l(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function d(q,L){return q=Jr(q,L),q.index=0,q.sibling=null,q}function f(q,L,F){return q.index=F,t?(F=q.alternate,F!==null?(F=F.index,F<L?(q.flags|=67108866,L):F):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function _(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function w(q,L,F,ne){return L===null||L.tag!==6?(L=kd(F,q.mode,ne),L.return=q,L):(L=d(L,F),L.return=q,L)}function k(q,L,F,ne){var Ee=F.type;return Ee===X?te(q,L,F.props.children,ne,F.key):L!==null&&(L.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===A&&Zs(Ee)===L.type)?(L=d(L,F.props),hl(L,F),L.return=q,L):(L=ic(F.type,F.key,F.props,null,q.mode,ne),hl(L,F),L.return=q,L)}function G(q,L,F,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=Od(F,q.mode,ne),L.return=q,L):(L=d(L,F.children||[]),L.return=q,L)}function te(q,L,F,ne,Ee){return L===null||L.tag!==7?(L=$s(F,q.mode,ne,Ee),L.return=q,L):(L=d(L,F),L.return=q,L)}function ie(q,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=kd(""+L,q.mode,F),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case M:return F=ic(L.type,L.key,L.props,null,q.mode,F),hl(F,L),F.return=q,F;case B:return L=Od(L,q.mode,F),L.return=q,L;case A:return L=Zs(L),ie(q,L,F)}if(pe(L)||V(L))return L=$s(L,q.mode,F,null),L.return=q,L;if(typeof L.then=="function")return ie(q,hc(L),F);if(L.$$typeof===j)return ie(q,oc(q,L),F);dc(q,L)}return null}function K(q,L,F,ne){var Ee=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ee!==null?null:w(q,L,""+F,ne);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case M:return F.key===Ee?k(q,L,F,ne):null;case B:return F.key===Ee?G(q,L,F,ne):null;case A:return F=Zs(F),K(q,L,F,ne)}if(pe(F)||V(F))return Ee!==null?null:te(q,L,F,ne,null);if(typeof F.then=="function")return K(q,L,hc(F),ne);if(F.$$typeof===j)return K(q,L,oc(q,F),ne);dc(q,F)}return null}function Z(q,L,F,ne,Ee){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get(F)||null,w(L,q,""+ne,Ee);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case M:return q=q.get(ne.key===null?F:ne.key)||null,k(L,q,ne,Ee);case B:return q=q.get(ne.key===null?F:ne.key)||null,G(L,q,ne,Ee);case A:return ne=Zs(ne),Z(q,L,F,ne,Ee)}if(pe(ne)||V(ne))return q=q.get(F)||null,te(L,q,ne,Ee,null);if(typeof ne.then=="function")return Z(q,L,F,hc(ne),Ee);if(ne.$$typeof===j)return Z(q,L,F,oc(L,ne),Ee);dc(L,ne)}return null}function ye(q,L,F,ne){for(var Ee=null,Fe=null,_e=L,Me=L=0,Le=null;_e!==null&&Me<F.length;Me++){_e.index>Me?(Le=_e,_e=null):Le=_e.sibling;var Ge=K(q,_e,F[Me],ne);if(Ge===null){_e===null&&(_e=Le);break}t&&_e&&Ge.alternate===null&&r(q,_e),L=f(Ge,L,Me),Fe===null?Ee=Ge:Fe.sibling=Ge,Fe=Ge,_e=Le}if(Me===F.length)return a(q,_e),qe&&Wr(q,Me),Ee;if(_e===null){for(;Me<F.length;Me++)_e=ie(q,F[Me],ne),_e!==null&&(L=f(_e,L,Me),Fe===null?Ee=_e:Fe.sibling=_e,Fe=_e);return qe&&Wr(q,Me),Ee}for(_e=l(_e);Me<F.length;Me++)Le=Z(_e,q,Me,F[Me],ne),Le!==null&&(t&&Le.alternate!==null&&_e.delete(Le.key===null?Me:Le.key),L=f(Le,L,Me),Fe===null?Ee=Le:Fe.sibling=Le,Fe=Le);return t&&_e.forEach(function(as){return r(q,as)}),qe&&Wr(q,Me),Ee}function we(q,L,F,ne){if(F==null)throw Error(s(151));for(var Ee=null,Fe=null,_e=L,Me=L=0,Le=null,Ge=F.next();_e!==null&&!Ge.done;Me++,Ge=F.next()){_e.index>Me?(Le=_e,_e=null):Le=_e.sibling;var as=K(q,_e,Ge.value,ne);if(as===null){_e===null&&(_e=Le);break}t&&_e&&as.alternate===null&&r(q,_e),L=f(as,L,Me),Fe===null?Ee=as:Fe.sibling=as,Fe=as,_e=Le}if(Ge.done)return a(q,_e),qe&&Wr(q,Me),Ee;if(_e===null){for(;!Ge.done;Me++,Ge=F.next())Ge=ie(q,Ge.value,ne),Ge!==null&&(L=f(Ge,L,Me),Fe===null?Ee=Ge:Fe.sibling=Ge,Fe=Ge);return qe&&Wr(q,Me),Ee}for(_e=l(_e);!Ge.done;Me++,Ge=F.next())Ge=Z(_e,q,Me,Ge.value,ne),Ge!==null&&(t&&Ge.alternate!==null&&_e.delete(Ge.key===null?Me:Ge.key),L=f(Ge,L,Me),Fe===null?Ee=Ge:Fe.sibling=Ge,Fe=Ge);return t&&_e.forEach(function(Zw){return r(q,Zw)}),qe&&Wr(q,Me),Ee}function nt(q,L,F,ne){if(typeof F=="object"&&F!==null&&F.type===X&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case M:e:{for(var Ee=F.key;L!==null;){if(L.key===Ee){if(Ee=F.type,Ee===X){if(L.tag===7){a(q,L.sibling),ne=d(L,F.props.children),ne.return=q,q=ne;break e}}else if(L.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===A&&Zs(Ee)===L.type){a(q,L.sibling),ne=d(L,F.props),hl(ne,F),ne.return=q,q=ne;break e}a(q,L);break}else r(q,L);L=L.sibling}F.type===X?(ne=$s(F.props.children,q.mode,ne,F.key),ne.return=q,q=ne):(ne=ic(F.type,F.key,F.props,null,q.mode,ne),hl(ne,F),ne.return=q,q=ne)}return _(q);case B:e:{for(Ee=F.key;L!==null;){if(L.key===Ee)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){a(q,L.sibling),ne=d(L,F.children||[]),ne.return=q,q=ne;break e}else{a(q,L);break}else r(q,L);L=L.sibling}ne=Od(F,q.mode,ne),ne.return=q,q=ne}return _(q);case A:return F=Zs(F),nt(q,L,F,ne)}if(pe(F))return ye(q,L,F,ne);if(V(F)){if(Ee=V(F),typeof Ee!="function")throw Error(s(150));return F=Ee.call(F),we(q,L,F,ne)}if(typeof F.then=="function")return nt(q,L,hc(F),ne);if(F.$$typeof===j)return nt(q,L,oc(q,F),ne);dc(q,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(a(q,L.sibling),ne=d(L,F),ne.return=q,q=ne):(a(q,L),ne=kd(F,q.mode,ne),ne.return=q,q=ne),_(q)):a(q,L)}return function(q,L,F,ne){try{cl=0;var Ee=nt(q,L,F,ne);return Ya=null,Ee}catch(_e){if(_e===Qa||_e===uc)throw _e;var Fe=Sn(29,_e,null,q.mode);return Fe.lanes=ne,Fe.return=q,Fe}finally{}}}var ta=Xg(!0),Jg=Xg(!1),Hi=!1;function Gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gi(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ye&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=rc(t),Mg(t,null,a),r}return nc(t,l,r,a),rc(t)}function dl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Uo(t,a)}}function Yd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var $d=!1;function fl(){if($d){var t=Ga;if(t!==null)throw t}}function ml(t,r,a,l){$d=!1;var d=t.updateQueue;Hi=!1;var f=d.firstBaseUpdate,_=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var k=w,G=k.next;k.next=null,_===null?f=G:_.next=G,_=k;var te=t.alternate;te!==null&&(te=te.updateQueue,w=te.lastBaseUpdate,w!==_&&(w===null?te.firstBaseUpdate=G:w.next=G,te.lastBaseUpdate=k))}if(f!==null){var ie=d.baseState;_=0,te=G=k=null,w=f;do{var K=w.lane&-536870913,Z=K!==w.lane;if(Z?(Pe&K)===K:(l&K)===K){K!==0&&K===Fa&&($d=!0),te!==null&&(te=te.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ye=t,we=w;K=r;var nt=a;switch(we.tag){case 1:if(ye=we.payload,typeof ye=="function"){ie=ye.call(nt,ie,K);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=we.payload,K=typeof ye=="function"?ye.call(nt,ie,K):ye,K==null)break e;ie=T({},ie,K);break e;case 2:Hi=!0}}K=w.callback,K!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=d.callbacks,Z===null?d.callbacks=[K]:Z.push(K))}else Z={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},te===null?(G=te=Z,k=ie):te=te.next=Z,_|=K;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);te===null&&(k=ie),d.baseState=k,d.firstBaseUpdate=G,d.lastBaseUpdate=te,f===null&&(d.shared.lanes=0),Xi|=_,t.lanes=_,t.memoizedState=ie}}function Wg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Zg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Wg(a[t],r)}var $a=O(null),fc=O(0);function ey(t,r){t=ui,ue(fc,t),ue($a,r),ui=t|r.baseLanes}function Kd(){ue(fc,ui),ue($a,$a.current)}function Xd(){ui=fc.current,Q($a),Q(fc)}var An=O(null),Fn=null;function Qi(t){var r=t.alternate;ue(Tt,Tt.current&1),ue(An,t),Fn===null&&(r===null||$a.current!==null||r.memoizedState!==null)&&(Fn=t)}function Jd(t){ue(Tt,Tt.current),ue(An,t),Fn===null&&(Fn=t)}function ty(t){t.tag===22?(ue(Tt,Tt.current),ue(An,t),Fn===null&&(Fn=t)):Yi()}function Yi(){ue(Tt,Tt.current),ue(An,An.current)}function Cn(t){Q(An),Fn===t&&(Fn=null),Q(Tt)}var Tt=O(0);function mc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||im(a)||sm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ti=0,Oe=null,et=null,kt=null,pc=!1,Ka=!1,na=!1,gc=0,pl=0,Xa=null,Hx=0;function gt(){throw Error(s(321))}function Wd(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!wn(t[a],r[a]))return!1;return!0}function Zd(t,r,a,l,d,f){return ti=f,Oe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=t===null||t.memoizedState===null?Ly:pf,na=!1,f=a(l,d),na=!1,Ka&&(f=ry(r,a,l,d)),ny(t),f}function ny(t){z.H=vl;var r=et!==null&&et.next!==null;if(ti=0,kt=et=Oe=null,pc=!1,pl=0,Xa=null,r)throw Error(s(300));t===null||Ot||(t=t.dependencies,t!==null&&ac(t)&&(Ot=!0))}function ry(t,r,a,l){Oe=t;var d=0;do{if(Ka&&(Xa=null),pl=0,Ka=!1,25<=d)throw Error(s(301));if(d+=1,kt=et=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}z.H=Uy,f=r(a,l)}while(Ka);return f}function Fx(){var t=z.H,r=t.useState()[0];return r=typeof r.then=="function"?gl(r):r,t=t.useState()[0],(et!==null?et.memoizedState:null)!==t&&(Oe.flags|=1024),r}function ef(){var t=gc!==0;return gc=0,t}function tf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function nf(t){if(pc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}pc=!1}ti=0,kt=et=Oe=null,Ka=!1,pl=gc=0,Xa=null}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Oe.memoizedState=kt=t:kt=kt.next=t,kt}function xt(){if(et===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var r=kt===null?Oe.memoizedState:kt.next;if(r!==null)kt=r,et=t;else{if(t===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},kt===null?Oe.memoizedState=kt=t:kt=kt.next=t}return kt}function yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var r=pl;return pl+=1,Xa===null&&(Xa=[]),t=Yg(Xa,t,r),r=Oe,(kt===null?r.memoizedState:kt.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?Ly:pf),t}function vc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===j)return Xt(t)}throw Error(s(438,String(t)))}function rf(t){var r=null,a=Oe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=yc(),Oe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=N;return r.index++,a}function ni(t,r){return typeof r=="function"?r(t):r}function _c(t){var r=xt();return sf(r,et,t)}function sf(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var _=d.next;d.next=f.next,f.next=_}r.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{r=d.next;var w=_=null,k=null,G=r,te=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(Pe&ie)===ie:(ti&ie)===ie){var K=G.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===Fa&&(te=!0);else if((ti&K)===K){G=G.next,K===Fa&&(te=!0);continue}else ie={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(w=k=ie,_=f):k=k.next=ie,Oe.lanes|=K,Xi|=K;ie=G.action,na&&a(f,ie),f=G.hasEagerState?G.eagerState:a(f,ie)}else K={lane:ie,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(w=k=K,_=f):k=k.next=K,Oe.lanes|=ie,Xi|=ie;G=G.next}while(G!==null&&G!==r);if(k===null?_=f:k.next=w,!wn(f,t.memoizedState)&&(Ot=!0,te&&(a=Ga,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=k,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function af(t){var r=xt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do f=t(f,_.action),_=_.next;while(_!==d);wn(f,r.memoizedState)||(Ot=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function iy(t,r,a){var l=Oe,d=xt(),f=qe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!wn((et||d).memoizedState,a);if(_&&(d.memoizedState=a,Ot=!0),d=d.queue,uf(oy.bind(null,l,d,t),[t]),d.getSnapshot!==r||_||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,Ja(9,{destroy:void 0},ay.bind(null,l,d,a,r),null),st===null)throw Error(s(349));f||(ti&127)!==0||sy(l,r,a)}return a}function sy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Oe.updateQueue,r===null?(r=yc(),Oe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function ay(t,r,a,l){r.value=a,r.getSnapshot=l,ly(r)&&uy(t)}function oy(t,r,a){return a(function(){ly(r)&&uy(t)})}function ly(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!wn(t,a)}catch{return!0}}function uy(t){var r=Ys(t,2);r!==null&&yn(r,t,2)}function of(t){var r=cn();if(typeof t=="function"){var a=t;if(t=a(),na){Mn(!0);try{a()}finally{Mn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:t},r}function cy(t,r,a,l){return t.baseState=a,sf(t,et,typeof l=="function"?l:ni)}function Gx(t,r,a,l,d){if(Tc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};z.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,hy(r,f)):(f.next=a.next,r.pending=a.next=f)}}function hy(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var f=z.T,_={};z.T=_;try{var w=a(d,l),k=z.S;k!==null&&k(_,w),dy(t,r,w)}catch(G){lf(t,r,G)}finally{f!==null&&_.types!==null&&(f.types=_.types),z.T=f}}else try{f=a(d,l),dy(t,r,f)}catch(G){lf(t,r,G)}}function dy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){fy(t,r,l)},function(l){return lf(t,r,l)}):fy(t,r,a)}function fy(t,r,a){r.status="fulfilled",r.value=a,my(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,hy(t,a)))}function lf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,my(r),r=r.next;while(r!==l)}t.action=null}function my(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function py(t,r){return r}function gy(t,r){if(qe){var a=st.formState;if(a!==null){e:{var l=Oe;if(qe){if(lt){t:{for(var d=lt,f=Hn;d.nodeType!==8;){if(!f){d=null;break t}if(d=Gn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){lt=Gn(d.nextSibling),l=d.data==="F!";break e}}Bi(l)}l=!1}l&&(r=a[0])}}return a=cn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:py,lastRenderedState:r},a.queue=l,a=Vy.bind(null,Oe,l),l.dispatch=a,l=of(!1),f=mf.bind(null,Oe,!1,l.queue),l=cn(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=Gx.bind(null,Oe,d,f,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function yy(t){var r=xt();return vy(r,et,t)}function vy(t,r,a){if(r=sf(t,r,py)[0],t=_c(ni)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=gl(r)}catch(_){throw _===Qa?uc:_}else l=r;r=xt();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(Oe.flags|=2048,Ja(9,{destroy:void 0},Qx.bind(null,d,a),null)),[l,f,t]}function Qx(t,r){t.action=r}function _y(t){var r=xt(),a=et;if(a!==null)return vy(r,a,t);xt(),r=r.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Ja(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Oe.updateQueue,r===null&&(r=yc(),Oe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Ey(){return xt().memoizedState}function Ec(t,r,a,l){var d=cn();Oe.flags|=t,d.memoizedState=Ja(1|r,{destroy:void 0},a,l===void 0?null:l)}function bc(t,r,a,l){var d=xt();l=l===void 0?null:l;var f=d.memoizedState.inst;et!==null&&l!==null&&Wd(l,et.memoizedState.deps)?d.memoizedState=Ja(r,f,a,l):(Oe.flags|=t,d.memoizedState=Ja(1|r,f,a,l))}function by(t,r){Ec(8390656,8,t,r)}function uf(t,r){bc(2048,8,t,r)}function Yx(t){Oe.flags|=4;var r=Oe.updateQueue;if(r===null)r=yc(),Oe.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Ty(t){var r=xt().memoizedState;return Yx({ref:r,nextImpl:t}),function(){if((Ye&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function xy(t,r){return bc(4,2,t,r)}function wy(t,r){return bc(4,4,t,r)}function Sy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Ay(t,r,a){a=a!=null?a.concat([t]):null,bc(4,4,Sy.bind(null,r,t),a)}function cf(){}function Cy(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Wd(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Ry(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Wd(r,l[1]))return l[0];if(l=t(),na){Mn(!0);try{t()}finally{Mn(!1)}}return a.memoizedState=[l,r],l}function hf(t,r,a){return a===void 0||(ti&1073741824)!==0&&(Pe&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=N0(),Oe.lanes|=t,Xi|=t,a)}function Ny(t,r,a,l){return wn(a,r)?a:$a.current!==null?(t=hf(t,a,l),wn(t,r)||(Ot=!0),t):(ti&42)===0||(ti&1073741824)!==0&&(Pe&261930)===0?(Ot=!0,t.memoizedState=a):(t=N0(),Oe.lanes|=t,Xi|=t,r)}function Iy(t,r,a,l,d){var f=re.p;re.p=f!==0&&8>f?f:8;var _=z.T,w={};z.T=w,mf(t,!1,r,a);try{var k=d(),G=z.S;if(G!==null&&G(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var te=qx(k,l);yl(t,r,te,In(t))}else yl(t,r,l,In(t))}catch(ie){yl(t,r,{then:function(){},status:"rejected",reason:ie},In())}finally{re.p=f,_!==null&&w.types!==null&&(_.types=w.types),z.T=_}}function $x(){}function df(t,r,a,l){if(t.tag!==5)throw Error(s(476));var d=Dy(t).queue;Iy(t,d,r,ce,a===null?$x:function(){return ky(t),a(l)})}function Dy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:ce},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ni,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ky(t){var r=Dy(t);r.next===null&&(r=t.alternate.memoizedState),yl(t,r.next.queue,{},In())}function ff(){return Xt(Ml)}function Oy(){return xt().memoizedState}function My(){return xt().memoizedState}function Kx(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=In();t=Fi(a);var l=Gi(r,t,a);l!==null&&(yn(l,r,a),dl(l,r,a)),r={cache:Bd()},t.payload=r;return}r=r.return}}function Xx(t,r,a){var l=In();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Tc(t)?jy(r,a):(a=Id(t,r,a,l),a!==null&&(yn(a,t,l),Py(a,r,l)))}function Vy(t,r,a){var l=In();yl(t,r,a,l)}function yl(t,r,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Tc(t))jy(r,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var _=r.lastRenderedState,w=f(_,a);if(d.hasEagerState=!0,d.eagerState=w,wn(w,_))return nc(t,r,d,0),st===null&&tc(),!1}catch{}finally{}if(a=Id(t,r,d,l),a!==null)return yn(a,t,l),Py(a,r,l),!0}return!1}function mf(t,r,a,l){if(l={lane:2,revertLane:Qf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Tc(t)){if(r)throw Error(s(479))}else r=Id(t,a,l,2),r!==null&&yn(r,t,2)}function Tc(t){var r=t.alternate;return t===Oe||r!==null&&r===Oe}function jy(t,r){Ka=pc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Py(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Uo(t,a)}}var vl={readContext:Xt,use:vc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};vl.useEffectEvent=gt;var Ly={readContext:Xt,use:vc,useCallback:function(t,r){return cn().memoizedState=[t,r===void 0?null:r],t},useContext:Xt,useEffect:by,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Ec(4194308,4,Sy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Ec(4194308,4,t,r)},useInsertionEffect:function(t,r){Ec(4,2,t,r)},useMemo:function(t,r){var a=cn();r=r===void 0?null:r;var l=t();if(na){Mn(!0);try{t()}finally{Mn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=cn();if(a!==void 0){var d=a(r);if(na){Mn(!0);try{a(r)}finally{Mn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=Xx.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var r=cn();return t={current:t},r.memoizedState=t},useState:function(t){t=of(t);var r=t.queue,a=Vy.bind(null,Oe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:cf,useDeferredValue:function(t,r){var a=cn();return hf(a,t,r)},useTransition:function(){var t=of(!1);return t=Iy.bind(null,Oe,t.queue,!0,!1),cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Oe,d=cn();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),st===null)throw Error(s(349));(Pe&127)!==0||sy(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,by(oy.bind(null,l,f,t),[t]),l.flags|=2048,Ja(9,{destroy:void 0},ay.bind(null,l,f,a,r),null),a},useId:function(){var t=cn(),r=st.identifierPrefix;if(qe){var a=Or,l=kr;a=(l&~(1<<32-Et(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=gc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=Hx++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:ff,useFormState:gy,useActionState:gy,useOptimistic:function(t){var r=cn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=mf.bind(null,Oe,!0,a),a.dispatch=r,[t,r]},useMemoCache:rf,useCacheRefresh:function(){return cn().memoizedState=Kx.bind(null,Oe)},useEffectEvent:function(t){var r=cn(),a={impl:t};return r.memoizedState=a,function(){if((Ye&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},pf={readContext:Xt,use:vc,useCallback:Cy,useContext:Xt,useEffect:uf,useImperativeHandle:Ay,useInsertionEffect:xy,useLayoutEffect:wy,useMemo:Ry,useReducer:_c,useRef:Ey,useState:function(){return _c(ni)},useDebugValue:cf,useDeferredValue:function(t,r){var a=xt();return Ny(a,et.memoizedState,t,r)},useTransition:function(){var t=_c(ni)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:gl(t),r]},useSyncExternalStore:iy,useId:Oy,useHostTransitionStatus:ff,useFormState:yy,useActionState:yy,useOptimistic:function(t,r){var a=xt();return cy(a,et,t,r)},useMemoCache:rf,useCacheRefresh:My};pf.useEffectEvent=Ty;var Uy={readContext:Xt,use:vc,useCallback:Cy,useContext:Xt,useEffect:uf,useImperativeHandle:Ay,useInsertionEffect:xy,useLayoutEffect:wy,useMemo:Ry,useReducer:af,useRef:Ey,useState:function(){return af(ni)},useDebugValue:cf,useDeferredValue:function(t,r){var a=xt();return et===null?hf(a,t,r):Ny(a,et.memoizedState,t,r)},useTransition:function(){var t=af(ni)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:gl(t),r]},useSyncExternalStore:iy,useId:Oy,useHostTransitionStatus:ff,useFormState:_y,useActionState:_y,useOptimistic:function(t,r){var a=xt();return et!==null?cy(a,et,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rf,useCacheRefresh:My};Uy.useEffectEvent=Ty;function gf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var yf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=In(),d=Fi(l);d.payload=r,a!=null&&(d.callback=a),r=Gi(t,d,l),r!==null&&(yn(r,t,l),dl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=In(),d=Fi(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Gi(t,d,l),r!==null&&(yn(r,t,l),dl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=In(),l=Fi(a);l.tag=2,r!=null&&(l.callback=r),r=Gi(t,l,a),r!==null&&(yn(r,t,a),dl(r,t,a))}};function zy(t,r,a,l,d,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):r.prototype&&r.prototype.isPureReactComponent?!il(a,l)||!il(d,f):!0}function By(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&yf.enqueueReplaceState(r,r.state,null)}function ra(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function qy(t){ec(t)}function Hy(t){console.error(t)}function Fy(t){ec(t)}function xc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Gy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function vf(t,r,a){return a=Fi(a),a.tag=3,a.payload={element:null},a.callback=function(){xc(t,r)},a}function Qy(t){return t=Fi(t),t.tag=3,t}function Yy(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){Gy(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Gy(r,a,l),typeof d!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Jx(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Ha(r,a,d,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return Fn===null?Vc():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===cc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Hf(t,l,d)),!1;case 22:return a.flags|=65536,l===cc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Hf(t,l,d)),!1}throw Error(s(435,a.tag))}return Hf(t,l,d),Vc(),!1}if(qe)return r=An.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==jd&&(t=Error(s(422),{cause:l}),ol(zn(t,a)))):(l!==jd&&(r=Error(s(423),{cause:l}),ol(zn(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=zn(l,a),d=vf(t.stateNode,l,d),Yd(t,d),yt!==4&&(yt=2)),!1;var f=Error(s(520),{cause:l});if(f=zn(f,a),Al===null?Al=[f]:Al.push(f),yt!==4&&(yt=2),r===null)return!0;l=zn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=vf(a.stateNode,l,t),Yd(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ji===null||!Ji.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Qy(d),Yy(d,t,a,l),Yd(a,d),!1}a=a.return}while(a!==null);return!1}var _f=Error(s(461)),Ot=!1;function Jt(t,r,a,l){r.child=t===null?Jg(r,null,a,l):ta(r,t.child,a,l)}function $y(t,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return Js(r),l=Zd(t,r,a,_,f,d),w=ef(),t!==null&&!Ot?(tf(t,r,d),ri(t,r,d)):(qe&&w&&Md(r),r.flags|=1,Jt(t,r,l,d),r.child)}function Ky(t,r,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!Dd(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,Xy(t,r,f,l,d)):(t=ic(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Cf(t,d)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:il,a(_,l)&&t.ref===r.ref)return ri(t,r,d)}return r.flags|=1,t=Jr(f,l),t.ref=r.ref,t.return=r,r.child=t}function Xy(t,r,a,l,d){if(t!==null){var f=t.memoizedProps;if(il(f,l)&&t.ref===r.ref)if(Ot=!1,r.pendingProps=l=f,Cf(t,d))(t.flags&131072)!==0&&(Ot=!0);else return r.lanes=t.lanes,ri(t,r,d)}return Ef(t,r,a,l,d)}function Jy(t,r,a,l){var d=l.children,f=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=r.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,r.child=null;return Wy(t,r,f,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&lc(r,f!==null?f.cachePool:null),f!==null?ey(r,f):Kd(),ty(r);else return l=r.lanes=536870912,Wy(t,r,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(lc(r,f.cachePool),ey(r,f),Yi(),r.memoizedState=null):(t!==null&&lc(r,null),Kd(),Yi());return Jt(t,r,d,a),r.child}function _l(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Wy(t,r,a,l,d){var f=Hd();return f=f===null?null:{parent:Dt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},t!==null&&lc(r,null),Kd(),ty(r),t!==null&&Ha(t,r,l,!0),r.childLanes=d,null}function wc(t,r){return r=Ac({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Zy(t,r,a){return ta(r,t.child,null,a),t=wc(r,r.pendingProps),t.flags|=2,Cn(r),r.memoizedState=null,t}function Wx(t,r,a){var l=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(qe){if(l.mode==="hidden")return t=wc(r,l),r.lanes=536870912,_l(null,t);if(Jd(r),(t=lt)?(t=hv(t,Hn),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ui!==null?{id:kr,overflow:Or}:null,retryLane:536870912,hydrationErrors:null},a=jg(t),a.return=r,r.child=a,Kt=r,lt=null)):t=null,t===null)throw Bi(r);return r.lanes=536870912,null}return wc(r,l)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(Jd(r),d)if(r.flags&256)r.flags&=-257,r=Zy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Ot||Ha(t,r,a,!1),d=(a&t.childLanes)!==0,Ot||d){if(l=st,l!==null&&(_=zo(l,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,Ys(t,_),yn(l,t,_),_f;Vc(),r=Zy(t,r,a)}else t=f.treeContext,lt=Gn(_.nextSibling),Kt=r,qe=!0,zi=null,Hn=!1,t!==null&&Ug(r,t),r=wc(r,l),r.flags|=4096;return r}return t=Jr(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Sc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ef(t,r,a,l,d){return Js(r),a=Zd(t,r,a,l,void 0,d),l=ef(),t!==null&&!Ot?(tf(t,r,d),ri(t,r,d)):(qe&&l&&Md(r),r.flags|=1,Jt(t,r,a,d),r.child)}function e0(t,r,a,l,d,f){return Js(r),r.updateQueue=null,a=ry(r,l,a,d),ny(t),l=ef(),t!==null&&!Ot?(tf(t,r,f),ri(t,r,f)):(qe&&l&&Md(r),r.flags|=1,Jt(t,r,a,f),r.child)}function t0(t,r,a,l,d){if(Js(r),r.stateNode===null){var f=Ua,_=a.contextType;typeof _=="object"&&_!==null&&(f=Xt(_)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=yf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Gd(r),_=a.contextType,f.context=typeof _=="object"&&_!==null?Xt(_):Ua,f.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(gf(r,a,_,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&yf.enqueueReplaceState(f,f.state,null),ml(r,l,f,d),fl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,k=ra(a,w);f.props=k;var G=f.context,te=a.contextType;_=Ua,typeof te=="object"&&te!==null&&(_=Xt(te));var ie=a.getDerivedStateFromProps;te=typeof ie=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,te||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||G!==_)&&By(r,f,l,_),Hi=!1;var K=r.memoizedState;f.state=K,ml(r,l,f,d),fl(),G=r.memoizedState,w||K!==G||Hi?(typeof ie=="function"&&(gf(r,a,ie,l),G=r.memoizedState),(k=Hi||zy(r,a,k,l,K,G,_))?(te||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=G),f.props=l,f.state=G,f.context=_,l=k):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Qd(t,r),_=r.memoizedProps,te=ra(a,_),f.props=te,ie=r.pendingProps,K=f.context,G=a.contextType,k=Ua,typeof G=="object"&&G!==null&&(k=Xt(G)),w=a.getDerivedStateFromProps,(G=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==ie||K!==k)&&By(r,f,l,k),Hi=!1,K=r.memoizedState,f.state=K,ml(r,l,f,d),fl();var Z=r.memoizedState;_!==ie||K!==Z||Hi||t!==null&&t.dependencies!==null&&ac(t.dependencies)?(typeof w=="function"&&(gf(r,a,w,l),Z=r.memoizedState),(te=Hi||zy(r,a,te,l,K,Z,k)||t!==null&&t.dependencies!==null&&ac(t.dependencies))?(G||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Z,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Z,k)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=Z),f.props=l,f.state=Z,f.context=k,l=te):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Sc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=ta(r,t.child,null,d),r.child=ta(r,null,a,d)):Jt(t,r,a,d),r.memoizedState=f.state,t=r.child):t=ri(t,r,d),t}function n0(t,r,a,l){return Ks(),r.flags|=256,Jt(t,r,a,l),r.child}var bf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tf(t){return{baseLanes:t,cachePool:Gg()}}function xf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Nn),t}function r0(t,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Tt.current&2)!==0),_&&(d=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(qe){if(d?Qi(r):Yi(),(t=lt)?(t=hv(t,Hn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ui!==null?{id:kr,overflow:Or}:null,retryLane:536870912,hydrationErrors:null},a=jg(t),a.return=r,r.child=a,Kt=r,lt=null)):t=null,t===null)throw Bi(r);return sm(t)?r.lanes=32:r.lanes=536870912,null}var w=l.children;return l=l.fallback,d?(Yi(),d=r.mode,w=Ac({mode:"hidden",children:w},d),l=$s(l,d,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,l=r.child,l.memoizedState=Tf(a),l.childLanes=xf(t,_,a),r.memoizedState=bf,_l(null,l)):(Qi(r),wf(r,w))}var k=t.memoizedState;if(k!==null&&(w=k.dehydrated,w!==null)){if(f)r.flags&256?(Qi(r),r.flags&=-257,r=Sf(t,r,a)):r.memoizedState!==null?(Yi(),r.child=t.child,r.flags|=128,r=null):(Yi(),w=l.fallback,d=r.mode,l=Ac({mode:"visible",children:l.children},d),w=$s(w,d,a,null),w.flags|=2,l.return=r,w.return=r,l.sibling=w,r.child=l,ta(r,t.child,null,a),l=r.child,l.memoizedState=Tf(a),l.childLanes=xf(t,_,a),r.memoizedState=bf,r=_l(null,l));else if(Qi(r),sm(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var G=_.dgst;_=G,l=Error(s(419)),l.stack="",l.digest=_,ol({value:l,source:null,stack:null}),r=Sf(t,r,a)}else if(Ot||Ha(t,r,a,!1),_=(a&t.childLanes)!==0,Ot||_){if(_=st,_!==null&&(l=zo(_,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Ys(t,l),yn(_,t,l),_f;im(w)||Vc(),r=Sf(t,r,a)}else im(w)?(r.flags|=192,r.child=t.child,r=null):(t=k.treeContext,lt=Gn(w.nextSibling),Kt=r,qe=!0,zi=null,Hn=!1,t!==null&&Ug(r,t),r=wf(r,l.children),r.flags|=4096);return r}return d?(Yi(),w=l.fallback,d=r.mode,k=t.child,G=k.sibling,l=Jr(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,G!==null?w=Jr(G,w):(w=$s(w,d,a,null),w.flags|=2),w.return=r,l.return=r,l.sibling=w,r.child=l,_l(null,l),l=r.child,w=t.child.memoizedState,w===null?w=Tf(a):(d=w.cachePool,d!==null?(k=Dt._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=Gg(),w={baseLanes:w.baseLanes|a,cachePool:d}),l.memoizedState=w,l.childLanes=xf(t,_,a),r.memoizedState=bf,_l(t.child,l)):(Qi(r),a=t.child,t=a.sibling,a=Jr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function wf(t,r){return r=Ac({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ac(t,r){return t=Sn(22,t,null,r),t.lanes=0,t}function Sf(t,r,a){return ta(r,t.child,null,a),t=wf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function i0(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Ud(t.return,r,a)}function Af(t,r,a,l,d,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:f}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=f)}function s0(t,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var _=Tt.current,w=(_&2)!==0;if(w?(_=_&1|2,r.flags|=128):_&=1,ue(Tt,_),Jt(t,r,l,a),l=qe?al:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i0(t,a,r);else if(t.tag===19)i0(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&mc(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Af(r,!1,d,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&mc(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Af(r,!0,a,null,f,l);break;case"together":Af(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function ri(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Xi|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(Ha(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Jr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Jr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Cf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ac(t)))}function Zx(t,r,a){switch(r.tag){case 3:ft(r,r.stateNode.containerInfo),qi(r,Dt,t.memoizedState.cache),Ks();break;case 27:case 5:bn(r);break;case 4:ft(r,r.stateNode.containerInfo);break;case 10:qi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Jd(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Qi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?r0(t,r,a):(Qi(r),t=ri(t,r,a),t!==null?t.sibling:null);Qi(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Ha(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return s0(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ue(Tt,Tt.current),l)break;return null;case 22:return r.lanes=0,Jy(t,r,a,r.pendingProps);case 24:qi(r,Dt,t.memoizedState.cache)}return ri(t,r,a)}function a0(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ot=!0;else{if(!Cf(t,a)&&(r.flags&128)===0)return Ot=!1,Zx(t,r,a);Ot=(t.flags&131072)!==0}else Ot=!1,qe&&(r.flags&1048576)!==0&&Lg(r,al,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=Zs(r.elementType),r.type=t,typeof t=="function")Dd(t)?(l=ra(t,l),r.tag=1,r=t0(null,r,t,l,a)):(r.tag=0,r=Ef(null,r,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===$){r.tag=11,r=$y(null,r,t,l,a);break e}else if(d===R){r.tag=14,r=Ky(null,r,t,l,a);break e}}throw r=Te(t)||t,Error(s(306,r,""))}}return r;case 0:return Ef(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=ra(l,r.pendingProps),t0(t,r,l,d,a);case 3:e:{if(ft(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,Qd(t,r),ml(r,l,null,a);var _=r.memoizedState;if(l=_.cache,qi(r,Dt,l),l!==f.cache&&zd(r,[Dt],a,!0),fl(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=n0(t,r,l,a);break e}else if(l!==d){d=zn(Error(s(424)),r),ol(d),r=n0(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(lt=Gn(t.firstChild),Kt=r,qe=!0,zi=null,Hn=!0,a=Jg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ks(),l===d){r=ri(t,r,a);break e}Jt(t,r,l,a)}r=r.child}return r;case 26:return Sc(t,r),t===null?(a=yv(r.type,null,r.pendingProps,null))?r.memoizedState=a:qe||(a=r.type,t=r.pendingProps,l=qc(xe.current).createElement(a),l[Rt]=r,l[qt]=t,Wt(l,a,t),Nt(l),r.stateNode=l):r.memoizedState=yv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return bn(r),t===null&&qe&&(l=r.stateNode=mv(r.type,r.pendingProps,xe.current),Kt=r,Hn=!0,d=lt,ts(r.type)?(am=d,lt=Gn(l.firstChild)):lt=d),Jt(t,r,r.pendingProps.children,a),Sc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&qe&&((d=l=lt)&&(l=Nw(l,r.type,r.pendingProps,Hn),l!==null?(r.stateNode=l,Kt=r,lt=Gn(l.firstChild),Hn=!1,d=!0):d=!1),d||Bi(r)),bn(r),d=r.type,f=r.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,tm(d,f)?l=null:_!==null&&tm(d,_)&&(r.flags|=32),r.memoizedState!==null&&(d=Zd(t,r,Fx,null,null,a),Ml._currentValue=d),Sc(t,r),Jt(t,r,l,a),r.child;case 6:return t===null&&qe&&((t=a=lt)&&(a=Iw(a,r.pendingProps,Hn),a!==null?(r.stateNode=a,Kt=r,lt=null,t=!0):t=!1),t||Bi(r)),null;case 13:return r0(t,r,a);case 4:return ft(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=ta(r,null,l,a):Jt(t,r,l,a),r.child;case 11:return $y(t,r,r.type,r.pendingProps,a);case 7:return Jt(t,r,r.pendingProps,a),r.child;case 8:return Jt(t,r,r.pendingProps.children,a),r.child;case 12:return Jt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,qi(r,r.type,l.value),Jt(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Js(r),d=Xt(d),l=l(d),r.flags|=1,Jt(t,r,l,a),r.child;case 14:return Ky(t,r,r.type,r.pendingProps,a);case 15:return Xy(t,r,r.type,r.pendingProps,a);case 19:return s0(t,r,a);case 31:return Wx(t,r,a);case 22:return Jy(t,r,a,r.pendingProps);case 24:return Js(r),l=Xt(Dt),t===null?(d=Hd(),d===null&&(d=st,f=Bd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},Gd(r),qi(r,Dt,d)):((t.lanes&a)!==0&&(Qd(t,r),ml(r,null,null,a),fl()),d=t.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),qi(r,Dt,l)):(l=f.cache,qi(r,Dt,l),l!==d.cache&&zd(r,[Dt],a,!0))),Jt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ii(t){t.flags|=4}function Rf(t,r,a,l,d){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(O0())t.flags|=8192;else throw ea=cc,Fd}else t.flags&=-16777217}function o0(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Tv(r))if(O0())t.flags|=8192;else throw ea=cc,Fd}function Cc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ou():536870912,t.lanes|=r,to|=r)}function El(t,r){if(!qe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ut(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function ew(t,r,a){var l=r.pendingProps;switch(Vd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ei(Dt),Ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(qa(r)?ii(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pd())),ut(r),null;case 26:var d=r.type,f=r.memoizedState;return t===null?(ii(r),f!==null?(ut(r),o0(r,f)):(ut(r),Rf(r,d,null,l,a))):f?f!==t.memoizedState?(ii(r),ut(r),o0(r,f)):(ut(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&ii(r),ut(r),Rf(r,d,t,l,a)),null;case 27:if(Si(r),a=xe.current,d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ii(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ut(r),null}t=ee.current,qa(r)?zg(r):(t=mv(d,l,a),r.stateNode=t,ii(r))}return ut(r),null;case 5:if(Si(r),d=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ii(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ut(r),null}if(f=ee.current,qa(r))zg(r);else{var _=qc(xe.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}f[Rt]=r,f[qt]=l;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=f;e:switch(Wt(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ii(r)}}return ut(r),Rf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&ii(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=xe.current,qa(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=Kt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Rt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||rv(t.nodeValue,a)),t||Bi(r,!0)}else t=qc(t).createTextNode(l),t[Rt]=r,r.stateNode=t}return ut(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=qa(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Rt]=r}else Ks(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),t=!1}else a=Pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(Cn(r),r):(Cn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ut(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=qa(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Rt]=r}else Ks(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),d=!1}else d=Pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Cn(r),r):(Cn(r),null)}return Cn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Cc(r,r.updateQueue),ut(r),null);case 4:return Ke(),t===null&&Xf(r.stateNode.containerInfo),ut(r),null;case 10:return ei(r.type),ut(r),null;case 19:if(Q(Tt),l=r.memoizedState,l===null)return ut(r),null;if(d=(r.flags&128)!==0,f=l.rendering,f===null)if(d)El(l,!1);else{if(yt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=mc(t),f!==null){for(r.flags|=128,El(l,!1),t=f.updateQueue,r.updateQueue=t,Cc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Vg(a,t),a=a.sibling;return ue(Tt,Tt.current&1|2),qe&&Wr(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&ln()>kc&&(r.flags|=128,d=!0,El(l,!1),r.lanes=4194304)}else{if(!d)if(t=mc(f),t!==null){if(r.flags|=128,d=!0,t=t.updateQueue,r.updateQueue=t,Cc(r,t),El(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!qe)return ut(r),null}else 2*ln()-l.renderingStartTime>kc&&a!==536870912&&(r.flags|=128,d=!0,El(l,!1),r.lanes=4194304);l.isBackwards?(f.sibling=r.child,r.child=f):(t=l.last,t!==null?t.sibling=f:r.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ln(),t.sibling=null,a=Tt.current,ue(Tt,d?a&1|2:a&1),qe&&Wr(r,l.treeForkCount),t):(ut(r),null);case 22:case 23:return Cn(r),Xd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),a=r.updateQueue,a!==null&&Cc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&Q(Ws),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ei(Dt),ut(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function tw(t,r){switch(Vd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ei(Dt),Ke(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Si(r),null;case 31:if(r.memoizedState!==null){if(Cn(r),r.alternate===null)throw Error(s(340));Ks()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Cn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ks()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Q(Tt),null;case 4:return Ke(),null;case 10:return ei(r.type),null;case 22:case 23:return Cn(r),Xd(),t!==null&&Q(Ws),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ei(Dt),null;case 25:return null;default:return null}}function l0(t,r){switch(Vd(r),r.tag){case 3:ei(Dt),Ke();break;case 26:case 27:case 5:Si(r);break;case 4:Ke();break;case 31:r.memoizedState!==null&&Cn(r);break;case 13:Cn(r);break;case 19:Q(Tt);break;case 10:ei(r.type);break;case 22:case 23:Cn(r),Xd(),t!==null&&Q(Ws);break;case 24:ei(Dt)}}function bl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==d)}}catch(w){We(r,r.return,w)}}function $i(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,d=r;var k=a,G=w;try{G()}catch(te){We(d,k,te)}}}l=l.next}while(l!==f)}}catch(te){We(r,r.return,te)}}function u0(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Zg(r,a)}catch(l){We(t,t.return,l)}}}function c0(t,r,a){a.props=ra(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,r,l)}}function Tl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){We(t,r,d)}}function Mr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){We(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){We(t,r,d)}else a.current=null}function h0(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){We(t,t.return,d)}}function Nf(t,r,a){try{var l=t.stateNode;xw(l,t.type,a,r),l[qt]=r}catch(d){We(t,t.return,d)}}function d0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ts(t.type)||t.tag===4}function If(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ts(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Df(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=rr));else if(l!==4&&(l===27&&ts(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Df(t,r,a),t=t.sibling;t!==null;)Df(t,r,a),t=t.sibling}function Rc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ts(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Rc(t,r,a),t=t.sibling;t!==null;)Rc(t,r,a),t=t.sibling}function f0(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);Wt(r,l,a),r[Rt]=t,r[qt]=a}catch(f){We(t,t.return,f)}}var si=!1,Mt=!1,kf=!1,m0=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function nw(t,r){if(t=t.containerInfo,Zf=Kc,t=Ag(t),wd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,w=-1,k=-1,G=0,te=0,ie=t,K=null;t:for(;;){for(var Z;ie!==a||d!==0&&ie.nodeType!==3||(w=_+d),ie!==f||l!==0&&ie.nodeType!==3||(k=_+l),ie.nodeType===3&&(_+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)K=ie,ie=Z;for(;;){if(ie===t)break t;if(K===a&&++G===d&&(w=_),K===f&&++te===l&&(k=_),(Z=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=Z}a=w===-1||k===-1?null:{start:w,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(em={focusedElem:t,selectionRange:a},Kc=!1,Ft=r;Ft!==null;)if(r=Ft,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Ft=t;else for(;Ft!==null;){switch(r=Ft,f=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var ye=ra(a.type,d);t=l.getSnapshotBeforeUpdate(ye,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){We(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)rm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":rm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Ft=t;break}Ft=r.return}}function p0(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:oi(t,a),l&4&&bl(5,a);break;case 1:if(oi(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){We(a,a.return,_)}else{var d=ra(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){We(a,a.return,_)}}l&64&&u0(a),l&512&&Tl(a,a.return);break;case 3:if(oi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Zg(t,r)}catch(_){We(a,a.return,_)}}break;case 27:r===null&&l&4&&f0(a);case 26:case 5:oi(t,a),r===null&&l&4&&h0(a),l&512&&Tl(a,a.return);break;case 12:oi(t,a);break;case 31:oi(t,a),l&4&&v0(t,a);break;case 13:oi(t,a),l&4&&_0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=hw.bind(null,a),Dw(t,a))));break;case 22:if(l=a.memoizedState!==null||si,!l){r=r!==null&&r.memoizedState!==null||Mt,d=si;var f=Mt;si=l,(Mt=r)&&!f?li(t,a,(a.subtreeFlags&8772)!==0):oi(t,a),si=d,Mt=f}break;case 30:break;default:oi(t,a)}}function g0(t){var r=t.alternate;r!==null&&(t.alternate=null,g0(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Sa(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,fn=!1;function ai(t,r,a){for(a=a.child;a!==null;)y0(t,r,a),a=a.sibling}function y0(t,r,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Zn,a)}catch{}switch(a.tag){case 26:Mt||Mr(a,r),ai(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Mr(a,r);var l=ht,d=fn;ts(a.type)&&(ht=a.stateNode,fn=!1),ai(t,r,a),Dl(a.stateNode),ht=l,fn=d;break;case 5:Mt||Mr(a,r);case 6:if(l=ht,d=fn,ht=null,ai(t,r,a),ht=l,fn=d,ht!==null)if(fn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(f){We(a,r,f)}else try{ht.removeChild(a.stateNode)}catch(f){We(a,r,f)}break;case 18:ht!==null&&(fn?(t=ht,uv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),uo(t)):uv(ht,a.stateNode));break;case 4:l=ht,d=fn,ht=a.stateNode.containerInfo,fn=!0,ai(t,r,a),ht=l,fn=d;break;case 0:case 11:case 14:case 15:$i(2,a,r),Mt||$i(4,a,r),ai(t,r,a);break;case 1:Mt||(Mr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&c0(a,r,l)),ai(t,r,a);break;case 21:ai(t,r,a);break;case 22:Mt=(l=Mt)||a.memoizedState!==null,ai(t,r,a),Mt=l;break;default:ai(t,r,a)}}function v0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{uo(t)}catch(a){We(r,r.return,a)}}}function _0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{uo(t)}catch(a){We(r,r.return,a)}}function rw(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new m0),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new m0),r;default:throw Error(s(435,t.tag))}}function Nc(t,r){var a=rw(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var d=dw.bind(null,t,l);l.then(d,d)}})}function mn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,_=r,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(ts(w.type)){ht=w.stateNode,fn=!1;break e}break;case 5:ht=w.stateNode,fn=!1;break e;case 3:case 4:ht=w.stateNode.containerInfo,fn=!0;break e}w=w.return}if(ht===null)throw Error(s(160));y0(f,_,d),ht=null,fn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)E0(r,t),r=r.sibling}var ur=null;function E0(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:mn(r,t),pn(t),l&4&&($i(3,t,t.return),bl(3,t),$i(5,t,t.return));break;case 1:mn(r,t),pn(t),l&512&&(Mt||a===null||Mr(a,a.return)),l&64&&si&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=ur;if(mn(r,t),pn(t),l&512&&(Mt||a===null||Mr(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Er]||f[Rt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),Wt(f,l,a),f[Rt]=t,Nt(f),l=f;break e;case"link":var _=Ev("link","href",d).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(f=_[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}f=d.createElement(l),Wt(f,l,a),d.head.appendChild(f);break;case"meta":if(_=Ev("meta","content",d).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(f=_[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}f=d.createElement(l),Wt(f,l,a),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[Rt]=t,Nt(f),l=f}t.stateNode=l}else bv(d,t.type,t.stateNode);else t.stateNode=_v(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?bv(d,t.type,t.stateNode):_v(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nf(t,t.memoizedProps,a.memoizedProps)}break;case 27:mn(r,t),pn(t),l&512&&(Mt||a===null||Mr(a,a.return)),a!==null&&l&4&&Nf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(mn(r,t),pn(t),l&512&&(Mt||a===null||Mr(a,a.return)),t.flags&32){d=t.stateNode;try{dn(d,"")}catch(ye){We(t,t.return,ye)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Nf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(kf=!0);break;case 6:if(mn(r,t),pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ye){We(t,t.return,ye)}}break;case 3:if(Gc=null,d=ur,ur=Hc(r.containerInfo),mn(r,t),ur=d,pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{uo(r.containerInfo)}catch(ye){We(t,t.return,ye)}kf&&(kf=!1,b0(t));break;case 4:l=ur,ur=Hc(t.stateNode.containerInfo),mn(r,t),pn(t),ur=l;break;case 12:mn(r,t),pn(t);break;case 31:mn(r,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nc(t,l)));break;case 13:mn(r,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dc=ln()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nc(t,l)));break;case 22:d=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,G=si,te=Mt;if(si=G||d,Mt=te||k,mn(r,t),Mt=te,si=G,pn(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||k||si||Mt||ia(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){k=a=r;try{if(f=k.stateNode,d)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=k.stateNode;var ie=k.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ye){We(k,k.return,ye)}}}else if(r.tag===6){if(a===null){k=r;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(ye){We(k,k.return,ye)}}}else if(r.tag===18){if(a===null){k=r;try{var Z=k.stateNode;d?cv(Z,!0):cv(k.stateNode,!1)}catch(ye){We(k,k.return,ye)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Nc(t,a))));break;case 19:mn(r,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nc(t,l)));break;case 30:break;case 21:break;default:mn(r,t),pn(t)}}function pn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(d0(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,f=If(t);Rc(t,f,d);break;case 5:var _=a.stateNode;a.flags&32&&(dn(_,""),a.flags&=-33);var w=If(t);Rc(t,w,_);break;case 3:case 4:var k=a.stateNode.containerInfo,G=If(t);Df(t,G,k);break;default:throw Error(s(161))}}catch(te){We(t,t.return,te)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function b0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;b0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function oi(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)p0(t,r.alternate,r),r=r.sibling}function ia(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:$i(4,r,r.return),ia(r);break;case 1:Mr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&c0(r,r.return,a),ia(r);break;case 27:Dl(r.stateNode);case 26:case 5:Mr(r,r.return),ia(r);break;case 22:r.memoizedState===null&&ia(r);break;case 30:ia(r);break;default:ia(r)}t=t.sibling}}function li(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,f=r,_=f.flags;switch(f.tag){case 0:case 11:case 15:li(d,f,a),bl(4,f);break;case 1:if(li(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(G){We(l,l.return,G)}if(l=f,d=l.updateQueue,d!==null){var w=l.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)Wg(k[d],w)}catch(G){We(l,l.return,G)}}a&&_&64&&u0(f),Tl(f,f.return);break;case 27:f0(f);case 26:case 5:li(d,f,a),a&&l===null&&_&4&&h0(f),Tl(f,f.return);break;case 12:li(d,f,a);break;case 31:li(d,f,a),a&&_&4&&v0(d,f);break;case 13:li(d,f,a),a&&_&4&&_0(d,f);break;case 22:f.memoizedState===null&&li(d,f,a),Tl(f,f.return);break;case 30:break;default:li(d,f,a)}r=r.sibling}}function Of(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ll(a))}function Mf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ll(t))}function cr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)T0(t,r,a,l),r=r.sibling}function T0(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:cr(t,r,a,l),d&2048&&bl(9,r);break;case 1:cr(t,r,a,l);break;case 3:cr(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ll(t)));break;case 12:if(d&2048){cr(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,_=f.id,w=f.onPostCommit;typeof w=="function"&&w(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){We(r,r.return,k)}}else cr(t,r,a,l);break;case 31:cr(t,r,a,l);break;case 13:cr(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,_=r.alternate,r.memoizedState!==null?f._visibility&2?cr(t,r,a,l):xl(t,r):f._visibility&2?cr(t,r,a,l):(f._visibility|=2,Wa(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),d&2048&&Of(_,r);break;case 24:cr(t,r,a,l),d&2048&&Mf(r.alternate,r);break;default:cr(t,r,a,l)}}function Wa(t,r,a,l,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=t,_=r,w=a,k=l,G=_.flags;switch(_.tag){case 0:case 11:case 15:Wa(f,_,w,k,d),bl(8,_);break;case 23:break;case 22:var te=_.stateNode;_.memoizedState!==null?te._visibility&2?Wa(f,_,w,k,d):xl(f,_):(te._visibility|=2,Wa(f,_,w,k,d)),d&&G&2048&&Of(_.alternate,_);break;case 24:Wa(f,_,w,k,d),d&&G&2048&&Mf(_.alternate,_);break;default:Wa(f,_,w,k,d)}r=r.sibling}}function xl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:xl(a,l),d&2048&&Of(l.alternate,l);break;case 24:xl(a,l),d&2048&&Mf(l.alternate,l);break;default:xl(a,l)}r=r.sibling}}var wl=8192;function Za(t,r,a){if(t.subtreeFlags&wl)for(t=t.child;t!==null;)x0(t,r,a),t=t.sibling}function x0(t,r,a){switch(t.tag){case 26:Za(t,r,a),t.flags&wl&&t.memoizedState!==null&&Hw(a,ur,t.memoizedState,t.memoizedProps);break;case 5:Za(t,r,a);break;case 3:case 4:var l=ur;ur=Hc(t.stateNode.containerInfo),Za(t,r,a),ur=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=wl,wl=16777216,Za(t,r,a),wl=l):Za(t,r,a));break;default:Za(t,r,a)}}function w0(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Sl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,A0(l,t)}w0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)S0(t),t=t.sibling}function S0(t){switch(t.tag){case 0:case 11:case 15:Sl(t),t.flags&2048&&$i(9,t,t.return);break;case 3:Sl(t);break;case 12:Sl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Ic(t)):Sl(t);break;default:Sl(t)}}function Ic(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,A0(l,t)}w0(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:$i(8,r,r.return),Ic(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Ic(r));break;default:Ic(r)}t=t.sibling}}function A0(t,r){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:$i(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ll(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=t;Ft!==null;){l=Ft;var d=l.sibling,f=l.return;if(g0(l),l===a){Ft=null;break e}if(d!==null){d.return=f,Ft=d;break e}Ft=f}}}var iw={getCacheForType:function(t){var r=Xt(Dt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return Xt(Dt).controller.signal}},sw=typeof WeakMap=="function"?WeakMap:Map,Ye=0,st=null,Ve=null,Pe=0,Je=0,Rn=null,Ki=!1,eo=!1,Vf=!1,ui=0,yt=0,Xi=0,sa=0,jf=0,Nn=0,to=0,Al=null,gn=null,Pf=!1,Dc=0,C0=0,kc=1/0,Oc=null,Ji=null,Lt=0,Wi=null,no=null,ci=0,Lf=0,Uf=null,R0=null,Cl=0,zf=null;function In(){return(Ye&2)!==0&&Pe!==0?Pe&-Pe:z.T!==null?Qf():Mu()}function N0(){if(Nn===0)if((Pe&536870912)===0||qe){var t=ks;ks<<=1,(ks&3932160)===0&&(ks=262144),Nn=t}else Nn=536870912;return t=An.current,t!==null&&(t.flags|=32),Nn}function yn(t,r,a){(t===st&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(ro(t,0),Zi(t,Pe,Nn,!1)),Os(t,a),((Ye&2)===0||t!==st)&&(t===st&&((Ye&2)===0&&(sa|=a),yt===4&&Zi(t,Pe,Nn,!1)),Vr(t))}function I0(t,r,a){if((Ye&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||er(t,r),d=l?lw(t,r):qf(t,r,!0),f=l;do{if(d===0){eo&&!l&&Zi(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!aw(a)){d=qf(t,r,!1),f=!1;continue}if(d===2){if(f=r,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var w=t;d=Al;var k=w.current.memoizedState.isDehydrated;if(k&&(ro(w,_).flags|=256),_=qf(w,_,!1),_!==2){if(Vf&&!k){w.errorRecoveryDisabledLanes|=f,sa|=f,d=4;break e}f=gn,gn=d,f!==null&&(gn===null?gn=f:gn.push.apply(gn,f))}d=_}if(f=!1,d!==2)continue}}if(d===1){ro(t,0),Zi(t,r,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Zi(l,r,Nn,!Ki);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(d=Dc+300-ln(),10<d)){if(Zi(l,r,Nn,!Ki),yr(l,0,!0)!==0)break e;ci=r,l.timeoutHandle=ov(D0.bind(null,l,a,gn,Oc,Pf,r,Nn,sa,to,Ki,f,"Throttled",-0,0),d);break e}D0(l,a,gn,Oc,Pf,r,Nn,sa,to,Ki,f,null,-0,0)}}break}while(!0);Vr(t)}function D0(t,r,a,l,d,f,_,w,k,G,te,ie,K,Z){if(t.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rr},x0(r,f,ie);var ye=(f&62914560)===f?Dc-ln():(f&4194048)===f?C0-ln():0;if(ye=Fw(ie,ye),ye!==null){ci=f,t.cancelPendingCommit=ye(U0.bind(null,t,r,f,a,l,d,_,w,k,te,ie,null,K,Z)),Zi(t,f,_,!G);return}}U0(t,r,f,a,l,d,_,w,k)}function aw(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!wn(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Zi(t,r,a,l){r&=~jf,r&=~sa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var f=31-Et(d),_=1<<f;l[f]=-1,d&=~_}a!==0&&Ms(t,a,r)}function Mc(){return(Ye&6)===0?(Rl(0),!1):!0}function Bf(){if(Ve!==null){if(Je===0)var t=Ve.return;else t=Ve,Zr=Xs=null,nf(t),Ya=null,cl=0,t=Ve;for(;t!==null;)l0(t.alternate,t),t=t.return;Ve=null}}function ro(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Aw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ci=0,Bf(),st=t,Ve=a=Jr(t.current,null),Pe=r,Je=0,Rn=null,Ki=!1,eo=er(t,r),Vf=!1,to=Nn=jf=sa=Xi=yt=0,gn=Al=null,Pf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-Et(l),f=1<<d;r|=t[d],l&=~f}return ui=r,tc(),a}function k0(t,r){Oe=null,z.H=vl,r===Qa||r===uc?(r=$g(),Je=3):r===Fd?(r=$g(),Je=4):Je=r===_f?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,Ve===null&&(yt=1,xc(t,zn(r,t.current)))}function O0(){var t=An.current;return t===null?!0:(Pe&4194048)===Pe?Fn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?t===Fn:!1}function M0(){var t=z.H;return z.H=vl,t===null?vl:t}function V0(){var t=z.A;return z.A=iw,t}function Vc(){yt=4,Ki||(Pe&4194048)!==Pe&&An.current!==null||(eo=!0),(Xi&134217727)===0&&(sa&134217727)===0||st===null||Zi(st,Pe,Nn,!1)}function qf(t,r,a){var l=Ye;Ye|=2;var d=M0(),f=V0();(st!==t||Pe!==r)&&(Oc=null,ro(t,r)),r=!1;var _=yt;e:do try{if(Je!==0&&Ve!==null){var w=Ve,k=Rn;switch(Je){case 8:Bf(),_=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(r=!0);var G=Je;if(Je=0,Rn=null,io(t,w,k,G),a&&eo){_=0;break e}break;default:G=Je,Je=0,Rn=null,io(t,w,k,G)}}ow(),_=yt;break}catch(te){k0(t,te)}while(!0);return r&&t.shellSuspendCounter++,Zr=Xs=null,Ye=l,z.H=d,z.A=f,Ve===null&&(st=null,Pe=0,tc()),_}function ow(){for(;Ve!==null;)j0(Ve)}function lw(t,r){var a=Ye;Ye|=2;var l=M0(),d=V0();st!==t||Pe!==r?(Oc=null,kc=ln()+500,ro(t,r)):eo=er(t,r);e:do try{if(Je!==0&&Ve!==null){r=Ve;var f=Rn;t:switch(Je){case 1:Je=0,Rn=null,io(t,r,f,1);break;case 2:case 9:if(Qg(f)){Je=0,Rn=null,P0(r);break}r=function(){Je!==2&&Je!==9||st!==t||(Je=7),Vr(t)},f.then(r,r);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Qg(f)?(Je=0,Rn=null,P0(r)):(Je=0,Rn=null,io(t,r,f,7));break;case 5:var _=null;switch(Ve.tag){case 26:_=Ve.memoizedState;case 5:case 27:var w=Ve;if(_?Tv(_):w.stateNode.complete){Je=0,Rn=null;var k=w.sibling;if(k!==null)Ve=k;else{var G=w.return;G!==null?(Ve=G,jc(G)):Ve=null}break t}}Je=0,Rn=null,io(t,r,f,5);break;case 6:Je=0,Rn=null,io(t,r,f,6);break;case 8:Bf(),yt=6;break e;default:throw Error(s(462))}}uw();break}catch(te){k0(t,te)}while(!0);return Zr=Xs=null,z.H=l,z.A=d,Ye=a,Ve!==null?0:(st=null,Pe=0,tc(),yt)}function uw(){for(;Ve!==null&&!yd();)j0(Ve)}function j0(t){var r=a0(t.alternate,t,ui);t.memoizedProps=t.pendingProps,r===null?jc(t):Ve=r}function P0(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=e0(a,r,r.pendingProps,r.type,void 0,Pe);break;case 11:r=e0(a,r,r.pendingProps,r.type.render,r.ref,Pe);break;case 5:nf(r);default:l0(a,r),r=Ve=Vg(r,ui),r=a0(a,r,ui)}t.memoizedProps=t.pendingProps,r===null?jc(t):Ve=r}function io(t,r,a,l){Zr=Xs=null,nf(r),Ya=null,cl=0;var d=r.return;try{if(Jx(t,d,r,a,Pe)){yt=1,xc(t,zn(a,t.current)),Ve=null;return}}catch(f){if(d!==null)throw Ve=d,f;yt=1,xc(t,zn(a,t.current)),Ve=null;return}r.flags&32768?(qe||l===1?t=!0:eo||(Pe&536870912)!==0?t=!1:(Ki=t=!0,(l===2||l===9||l===3||l===6)&&(l=An.current,l!==null&&l.tag===13&&(l.flags|=16384))),L0(r,t)):jc(r)}function jc(t){var r=t;do{if((r.flags&32768)!==0){L0(r,Ki);return}t=r.return;var a=ew(r.alternate,r,ui);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=t}while(r!==null);yt===0&&(yt=5)}function L0(t,r){do{var a=tw(t.alternate,t);if(a!==null){a.flags&=32767,Ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ve=t;return}Ve=t=a}while(t!==null);yt=6,Ve=null}function U0(t,r,a,l,d,f,_,w,k){t.cancelPendingCommit=null;do Pc();while(Lt!==0);if((Ye&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Nd,Ed(t,a,f,_,w,k),t===st&&(Ve=st=null,Pe=0),no=r,Wi=t,ci=a,Lf=f,Uf=d,R0=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,fw(Ni,function(){return F0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=z.T,z.T=null,d=re.p,re.p=2,_=Ye,Ye|=4;try{nw(t,r,a)}finally{Ye=_,re.p=d,z.T=l}}Lt=1,z0(),B0(),q0()}}function z0(){if(Lt===1){Lt=0;var t=Wi,r=no,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=z.T,z.T=null;var l=re.p;re.p=2;var d=Ye;Ye|=4;try{E0(r,t);var f=em,_=Ag(t.containerInfo),w=f.focusedElem,k=f.selectionRange;if(_!==w&&w&&w.ownerDocument&&Sg(w.ownerDocument.documentElement,w)){if(k!==null&&wd(w)){var G=k.start,te=k.end;if(te===void 0&&(te=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(te,w.value.length);else{var ie=w.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var Z=K.getSelection(),ye=w.textContent.length,we=Math.min(k.start,ye),nt=k.end===void 0?we:Math.min(k.end,ye);!Z.extend&&we>nt&&(_=nt,nt=we,we=_);var q=wg(w,we),L=wg(w,nt);if(q&&L&&(Z.rangeCount!==1||Z.anchorNode!==q.node||Z.anchorOffset!==q.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var F=ie.createRange();F.setStart(q.node,q.offset),Z.removeAllRanges(),we>nt?(Z.addRange(F),Z.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),Z.addRange(F))}}}}for(ie=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ie.length;w++){var ne=ie[w];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Kc=!!Zf,em=Zf=null}finally{Ye=d,re.p=l,z.T=a}}t.current=r,Lt=2}}function B0(){if(Lt===2){Lt=0;var t=Wi,r=no,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=z.T,z.T=null;var l=re.p;re.p=2;var d=Ye;Ye|=4;try{p0(t,r.alternate,r)}finally{Ye=d,re.p=l,z.T=a}}Lt=3}}function q0(){if(Lt===4||Lt===3){Lt=0,Cu();var t=Wi,r=no,a=ci,l=R0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Lt=5:(Lt=0,no=Wi=null,H0(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Ji=null),Yr(a),r=r.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Zn,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=z.T,d=re.p,re.p=2,z.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];f(w.value,{componentStack:w.stack})}}finally{z.T=r,re.p=d}}(ci&3)!==0&&Pc(),Vr(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===zf?Cl++:(Cl=0,zf=t):Cl=0,Rl(0)}}function H0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ll(r)))}function Pc(){return z0(),B0(),q0(),F0()}function F0(){if(Lt!==5)return!1;var t=Wi,r=Lf;Lf=0;var a=Yr(ci),l=z.T,d=re.p;try{re.p=32>a?32:a,z.T=null,a=Uf,Uf=null;var f=Wi,_=ci;if(Lt=0,no=Wi=null,ci=0,(Ye&6)!==0)throw Error(s(331));var w=Ye;if(Ye|=4,S0(f.current),T0(f,f.current,_,a),Ye=w,Rl(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Zn,f)}catch{}return!0}finally{re.p=d,z.T=l,H0(t,r)}}function G0(t,r,a){r=zn(a,r),r=vf(t.stateNode,r,2),t=Gi(t,r,2),t!==null&&(Os(t,2),Vr(t))}function We(t,r,a){if(t.tag===3)G0(t,t,a);else for(;r!==null;){if(r.tag===3){G0(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ji===null||!Ji.has(l))){t=zn(a,t),a=Qy(2),l=Gi(r,a,2),l!==null&&(Yy(a,l,r,t),Os(l,2),Vr(l));break}}r=r.return}}function Hf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new sw;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(Vf=!0,d.add(a),t=cw.bind(null,t,r,a),r.then(t,t))}function cw(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,st===t&&(Pe&a)===a&&(yt===4||yt===3&&(Pe&62914560)===Pe&&300>ln()-Dc?(Ye&2)===0&&ro(t,0):jf|=a,to===Pe&&(to=0)),Vr(t)}function Q0(t,r){r===0&&(r=Ou()),t=Ys(t,r),t!==null&&(Os(t,r),Vr(t))}function hw(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Q0(t,a)}function dw(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Q0(t,a)}function fw(t,r){return _t(t,r)}var Lc=null,so=null,Ff=!1,Uc=!1,Gf=!1,es=0;function Vr(t){t!==so&&t.next===null&&(so===null?Lc=so=t:so=so.next=t),Uc=!0,Ff||(Ff=!0,pw())}function Rl(t,r){if(!Gf&&Uc){Gf=!0;do for(var a=!1,l=Lc;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var _=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-Et(42|t)+1)-1,f&=d&~(_&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,X0(l,f))}else f=Pe,f=yr(l,l===st?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||er(l,f)||(a=!0,X0(l,f));l=l.next}while(a);Gf=!1}}function mw(){Y0()}function Y0(){Uc=Ff=!1;var t=0;es!==0&&Sw()&&(t=es);for(var r=ln(),a=null,l=Lc;l!==null;){var d=l.next,f=$0(l,r);f===0?(l.next=null,a===null?Lc=d:a.next=d,d===null&&(so=a)):(a=l,(t!==0||(f&3)!==0)&&(Uc=!0)),l=d}Lt!==0&&Lt!==5||Rl(t),es!==0&&(es=0)}function $0(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-Et(f),w=1<<_,k=d[_];k===-1?((w&a)===0||(w&l)!==0)&&(d[_]=_d(w,r)):k<=r&&(t.expiredLanes|=w),f&=~w}if(r=st,a=Pe,a=yr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ri(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||er(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ri(l),Yr(a)){case 2:case 8:a=Lo;break;case 32:a=Ni;break;case 268435456:a=Ru;break;default:a=Ni}return l=K0.bind(null,t),a=_t(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ri(l),t.callbackPriority=2,t.callbackNode=null,2}function K0(t,r){if(Lt!==0&&Lt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Pc()&&t.callbackNode!==a)return null;var l=Pe;return l=yr(t,t===st?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(I0(t,l,r),$0(t,ln()),t.callbackNode!=null&&t.callbackNode===a?K0.bind(null,t):null)}function X0(t,r){if(Pc())return null;I0(t,r,!0)}function pw(){Cw(function(){(Ye&6)!==0?_t(Po,mw):Y0()})}function Qf(){if(es===0){var t=Fa;t===0&&(t=pr,pr<<=1,(pr&261888)===0&&(pr=256)),es=t}return es}function J0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Na(""+t)}function W0(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function gw(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=J0((d[qt]||null).action),_=l.submitter;_&&(r=(r=_[qt]||null)?J0(r.formAction):_.getAttribute("formAction"),r!==null&&(f=r,_=null));var w=new Rr("action","action",null,l,d);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(es!==0){var k=_?W0(d,_):new FormData(d);df(a,{pending:!0,data:k,method:d.method,action:f},null,k)}}else typeof f=="function"&&(w.preventDefault(),k=_?W0(d,_):new FormData(d),df(a,{pending:!0,data:k,method:d.method,action:f},f,k))},currentTarget:d}]})}}for(var Yf=0;Yf<Rd.length;Yf++){var $f=Rd[Yf],yw=$f.toLowerCase(),vw=$f[0].toUpperCase()+$f.slice(1);lr(yw,"on"+vw)}lr(Ng,"onAnimationEnd"),lr(Ig,"onAnimationIteration"),lr(Dg,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(Mx,"onTransitionRun"),lr(Vx,"onTransitionStart"),lr(jx,"onTransitionCancel"),lr(kg,"onTransitionEnd"),wr("onMouseEnter",["mouseout","mouseover"]),wr("onMouseLeave",["mouseout","mouseover"]),wr("onPointerEnter",["pointerout","pointerover"]),wr("onPointerLeave",["pointerout","pointerover"]),xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xr("onBeforeInput",["compositionend","keypress","textInput","paste"]),xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_w=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function Z0(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var _=l.length-1;0<=_;_--){var w=l[_],k=w.instance,G=w.currentTarget;if(w=w.listener,k!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=G;try{f(d)}catch(te){ec(te)}d.currentTarget=null,f=k}else for(_=0;_<l.length;_++){if(w=l[_],k=w.instance,G=w.currentTarget,w=w.listener,k!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=G;try{f(d)}catch(te){ec(te)}d.currentTarget=null,f=k}}}}function je(t,r){var a=r[wa];a===void 0&&(a=r[wa]=new Set);var l=t+"__bubble";a.has(l)||(ev(r,t,2,!1),a.add(l))}function Kf(t,r,a){var l=0;r&&(l|=4),ev(a,t,l,r)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[zc]){t[zc]=!0,Bo.forEach(function(a){a!=="selectionchange"&&(_w.has(a)||Kf(a,!1,t),Kf(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[zc]||(r[zc]=!0,Kf("selectionchange",!1,r))}}function ev(t,r,a,l){switch(Nv(r)){case 2:var d=Yw;break;case 8:d=$w;break;default:d=hm}a=d.bind(null,r,a,t),d=void 0,!Us||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function Jf(t,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===d)break;if(_===4)for(_=l.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;w!==null;){if(_=br(w),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){l=f=_;continue e}w=w.parentNode}}l=l.return}Vi(function(){var G=f,te=jn(a),ie=[];e:{var K=Og.get(t);if(K!==void 0){var Z=Rr,ye=t;switch(t){case"keypress":if(Bs(a)===0)break e;case"keydown":case"keyup":Z=Ju;break;case"focusin":ye="focus",Z=Hs;break;case"focusout":ye="blur",Z=Hs;break;case"beforeblur":case"afterblur":Z=Hs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=v;break;case Ng:case Ig:case Dg:Z=Fu;break;case kg:Z=S;break;case"scroll":case"scrollend":Z=Zo;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Xr;break;case"toggle":case"beforetoggle":Z=ke}var we=(r&4)!==0,nt=!we&&(t==="scroll"||t==="scrollend"),q=we?K!==null?K+"Capture":null:K;we=[];for(var L=G,F;L!==null;){var ne=L;if(F=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||F===null||q===null||(ne=ir(L,q),ne!=null&&we.push(Il(L,ne,F))),nt)break;L=L.return}0<we.length&&(K=new Z(K,ye,null,a,te),ie.push({event:K,listeners:we}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",K&&a!==Xo&&(ye=a.relatedTarget||a.fromElement)&&(br(ye)||ye[_r]))break e;if((Z||K)&&(K=te.window===te?te:(K=te.ownerDocument)?K.defaultView||K.parentWindow:window,Z?(ye=a.relatedTarget||a.toElement,Z=G,ye=ye?br(ye):null,ye!==null&&(nt=u(ye),we=ye.tag,ye!==nt||we!==5&&we!==27&&we!==6)&&(ye=null)):(Z=null,ye=G),Z!==ye)){if(we=el,ne="onMouseLeave",q="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(we=Xr,ne="onPointerLeave",q="onPointerEnter",L="pointer"),nt=Z==null?K:Tn(Z),F=ye==null?K:Tn(ye),K=new we(ne,L+"leave",Z,a,te),K.target=nt,K.relatedTarget=F,ne=null,br(te)===G&&(we=new we(q,L+"enter",ye,a,te),we.target=F,we.relatedTarget=nt,ne=we),nt=ne,Z&&ye)t:{for(we=Ew,q=Z,L=ye,F=0,ne=q;ne;ne=we(ne))F++;ne=0;for(var Ee=L;Ee;Ee=we(Ee))ne++;for(;0<F-ne;)q=we(q),F--;for(;0<ne-F;)L=we(L),ne--;for(;F--;){if(q===L||L!==null&&q===L.alternate){we=q;break t}q=we(q),L=we(L)}we=null}else we=null;Z!==null&&tv(ie,K,Z,we,!1),ye!==null&&nt!==null&&tv(ie,nt,ye,we,!0)}}e:{if(K=G?Tn(G):window,Z=K.nodeName&&K.nodeName.toLowerCase(),Z==="select"||Z==="input"&&K.type==="file")var Fe=vg;else if(gg(K))if(_g)Fe=Dx;else{Fe=Nx;var _e=Rx}else Z=K.nodeName,!Z||Z.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Ra(G.elementType)&&(Fe=vg):Fe=Ix;if(Fe&&(Fe=Fe(t,G))){yg(ie,Fe,a,te);break e}_e&&_e(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Yo(K,"number",K.value)}switch(_e=G?Tn(G):window,t){case"focusin":(gg(_e)||_e.contentEditable==="true")&&(ja=_e,Sd=G,sl=null);break;case"focusout":sl=Sd=ja=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,Cg(ie,a,te);break;case"selectionchange":if(Ox)break;case"keydown":case"keyup":Cg(ie,a,te)}var Me;if(Qe)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Va?Fs(t,a)&&(Le="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Le="onCompositionStart");Le&&(Dr&&a.locale!=="ko"&&(Va||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Va&&(Me=Wo()):(Cr=te,Jo="value"in Cr?Cr.value:Cr.textContent,Va=!0)),_e=Bc(G,Le),0<_e.length&&(Le=new Ir(Le,t,null,a,te),ie.push({event:Le,listeners:_e}),Me?Le.data=Me:(Me=Ma(a),Me!==null&&(Le.data=Me)))),(Me=Ln?wx(t,a):Sx(t,a))&&(Le=Bc(G,"onBeforeInput"),0<Le.length&&(_e=new Ir("onBeforeInput","beforeinput",null,a,te),ie.push({event:_e,listeners:Le}),_e.data=Me)),gw(ie,t,G,a,te)}Z0(ie,r)})}function Il(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Bc(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=ir(t,a),d!=null&&l.unshift(Il(t,d,f)),d=ir(t,r),d!=null&&l.push(Il(t,d,f))),t.tag===3)return l;t=t.return}return[]}function Ew(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function tv(t,r,a,l,d){for(var f=r._reactName,_=[];a!==null&&a!==l;){var w=a,k=w.alternate,G=w.stateNode;if(w=w.tag,k!==null&&k===l)break;w!==5&&w!==26&&w!==27||G===null||(k=G,d?(G=ir(a,f),G!=null&&_.unshift(Il(a,G,k))):d||(G=ir(a,f),G!=null&&_.push(Il(a,G,k)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var bw=/\r\n?/g,Tw=/\u0000|\uFFFD/g;function nv(t){return(typeof t=="string"?t:""+t).replace(bw,`
`).replace(Tw,"")}function rv(t,r){return r=nv(r),nv(t)===r}function tt(t,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||dn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&dn(t,""+l);break;case"className":xn(t,"class",l);break;case"tabIndex":xn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(t,a,l);break;case"style":Ko(t,l,f);break;case"data":if(r!=="object"){xn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Na(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&tt(t,r,"name",d.name,d,null),tt(t,r,"formEncType",d.formEncType,d,null),tt(t,r,"formMethod",d.formMethod,d,null),tt(t,r,"formTarget",d.formTarget,d,null)):(tt(t,r,"encType",d.encType,d,null),tt(t,r,"method",d.method,d,null),tt(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Na(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=rr);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Na(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),Aa(t,"popover",l);break;case"xlinkActuate":It(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":It(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":It(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":It(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":It(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":It(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":It(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":It(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":It(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Aa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Bu.get(a)||a,Aa(t,a,l))}}function Wf(t,r,a,l,d,f){switch(a){case"style":Ko(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?dn(t,l):(typeof l=="number"||typeof l=="bigint")&&dn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=t[qt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Aa(t,a,l)}}}function Wt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(t,r,f,_,a,null)}}d&&tt(t,r,"srcSet",a.srcSet,a,null),l&&tt(t,r,"src",a.src,a,null);return;case"input":je("invalid",t);var w=f=_=d=null,k=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var te=a[l];if(te!=null)switch(l){case"name":d=te;break;case"type":_=te;break;case"checked":k=te;break;case"defaultChecked":G=te;break;case"value":f=te;break;case"defaultValue":w=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:tt(t,r,l,te,a,null)}}Lu(t,f,w,k,G,_,d,!1);return;case"select":je("invalid",t),l=_=f=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":f=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:tt(t,r,d,w,a,null)}r=f,a=_,t.multiple=!!l,r!=null?Di(t,!!l,r,!1):a!=null&&Di(t,!!l,a,!0);return;case"textarea":je("invalid",t),f=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":d=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:tt(t,r,_,w,a,null)}ki(t,l,d,f);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:tt(t,r,k,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Nl.length;l++)je(Nl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:tt(t,r,G,l,a,null)}return;default:if(Ra(r)){for(te in a)a.hasOwnProperty(te)&&(l=a[te],l!==void 0&&Wf(t,r,te,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&tt(t,r,w,l,a,null))}function xw(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,_=null,w=null,k=null,G=null,te=null;for(Z in a){var ie=a[Z];if(a.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":k=ie;default:l.hasOwnProperty(Z)||tt(t,r,Z,null,l,ie)}}for(var K in l){var Z=l[K];if(ie=a[K],l.hasOwnProperty(K)&&(Z!=null||ie!=null))switch(K){case"type":f=Z;break;case"name":d=Z;break;case"checked":G=Z;break;case"defaultChecked":te=Z;break;case"value":_=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:Z!==ie&&tt(t,r,K,Z,l,ie)}}Ca(t,_,w,k,G,te,f,d);return;case"select":Z=_=w=K=null;for(f in a)if(k=a[f],a.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":Z=k;default:l.hasOwnProperty(f)||tt(t,r,f,null,l,k)}for(d in l)if(f=l[d],k=a[d],l.hasOwnProperty(d)&&(f!=null||k!=null))switch(d){case"value":K=f;break;case"defaultValue":w=f;break;case"multiple":_=f;default:f!==k&&tt(t,r,d,f,l,k)}r=w,a=_,l=Z,K!=null?Di(t,!!a,K,!1):!!l!=!!a&&(r!=null?Di(t,!!a,r,!0):Di(t,!!a,a?[]:"",!1));return;case"textarea":Z=K=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:tt(t,r,w,null,l,d)}for(_ in l)if(d=l[_],f=a[_],l.hasOwnProperty(_)&&(d!=null||f!=null))switch(_){case"value":K=d;break;case"defaultValue":Z=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&tt(t,r,_,d,l,f)}Uu(t,K,Z);return;case"option":for(var ye in a)if(K=a[ye],a.hasOwnProperty(ye)&&K!=null&&!l.hasOwnProperty(ye))switch(ye){case"selected":t.selected=!1;break;default:tt(t,r,ye,null,l,K)}for(k in l)if(K=l[k],Z=a[k],l.hasOwnProperty(k)&&K!==Z&&(K!=null||Z!=null))switch(k){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:tt(t,r,k,K,l,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)K=a[we],a.hasOwnProperty(we)&&K!=null&&!l.hasOwnProperty(we)&&tt(t,r,we,null,l,K);for(G in l)if(K=l[G],Z=a[G],l.hasOwnProperty(G)&&K!==Z&&(K!=null||Z!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:tt(t,r,G,K,l,Z)}return;default:if(Ra(r)){for(var nt in a)K=a[nt],a.hasOwnProperty(nt)&&K!==void 0&&!l.hasOwnProperty(nt)&&Wf(t,r,nt,void 0,l,K);for(te in l)K=l[te],Z=a[te],!l.hasOwnProperty(te)||K===Z||K===void 0&&Z===void 0||Wf(t,r,te,K,l,Z);return}}for(var q in a)K=a[q],a.hasOwnProperty(q)&&K!=null&&!l.hasOwnProperty(q)&&tt(t,r,q,null,l,K);for(ie in l)K=l[ie],Z=a[ie],!l.hasOwnProperty(ie)||K===Z||K==null&&Z==null||tt(t,r,ie,K,l,Z)}function iv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ww(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],f=d.transferSize,_=d.initiatorType,w=d.duration;if(f&&w&&iv(_)){for(_=0,w=d.responseEnd,l+=1;l<a.length;l++){var k=a[l],G=k.startTime;if(G>w)break;var te=k.transferSize,ie=k.initiatorType;te&&iv(ie)&&(k=k.responseEnd,_+=te*(k<w?1:(w-G)/(k-G)))}if(--l,r+=8*(f+_)/(d.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Zf=null,em=null;function qc(t){return t.nodeType===9?t:t.ownerDocument}function sv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function av(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function tm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var nm=null;function Sw(){var t=window.event;return t&&t.type==="popstate"?t===nm?!1:(nm=t,!0):(nm=null,!1)}var ov=typeof setTimeout=="function"?setTimeout:void 0,Aw=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,Cw=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(t){return lv.resolve(null).then(t).catch(Rw)}:ov;function Rw(t){setTimeout(function(){throw t})}function ts(t){return t==="head"}function uv(t,r){var a=r,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),uo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Dl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Dl(a);for(var f=a.firstChild;f;){var _=f.nextSibling,w=f.nodeName;f[Er]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&Dl(t.ownerDocument.body);a=d}while(a);uo(r)}function cv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function rm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":rm(a),Sa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Nw(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Er])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Gn(t.nextSibling),t===null)break}return null}function Iw(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Gn(t.nextSibling),t===null))return null;return t}function hv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Gn(t.nextSibling),t===null))return null;return t}function im(t){return t.data==="$?"||t.data==="$~"}function sm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Dw(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Gn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var am=null;function dv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return Gn(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function fv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function mv(t,r,a){switch(r=qc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Dl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Sa(t)}var Qn=new Map,pv=new Set;function Hc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var hi=re.d;re.d={f:kw,r:Ow,D:Mw,C:Vw,L:jw,m:Pw,X:Uw,S:Lw,M:zw};function kw(){var t=hi.f(),r=Mc();return t||r}function Ow(t){var r=Vn(t);r!==null&&r.tag===5&&r.type==="form"?ky(r):hi.r(t)}var ao=typeof document>"u"?null:document;function gv(t,r,a){var l=ao;if(l&&typeof r=="string"&&r){var d=hn(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),pv.has(d)||(pv.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),Wt(r,"link",t),Nt(r),l.head.appendChild(r)))}}function Mw(t){hi.D(t),gv("dns-prefetch",t,null)}function Vw(t,r){hi.C(t,r),gv("preconnect",t,r)}function jw(t,r,a){hi.L(t,r,a);var l=ao;if(l&&t&&r){var d='link[rel="preload"][as="'+hn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+hn(a.imageSizes)+'"]')):d+='[href="'+hn(t)+'"]';var f=d;switch(r){case"style":f=oo(t);break;case"script":f=lo(t)}Qn.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Qn.set(f,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(kl(f))||r==="script"&&l.querySelector(Ol(f))||(r=l.createElement("link"),Wt(r,"link",t),Nt(r),l.head.appendChild(r)))}}function Pw(t,r){hi.m(t,r);var a=ao;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+hn(l)+'"][href="'+hn(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=lo(t)}if(!Qn.has(f)&&(t=T({rel:"modulepreload",href:t},r),Qn.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ol(f)))return}l=a.createElement("link"),Wt(l,"link",t),Nt(l),a.head.appendChild(l)}}}function Lw(t,r,a){hi.S(t,r,a);var l=ao;if(l&&t){var d=Tr(l).hoistableStyles,f=oo(t);r=r||"default";var _=d.get(f);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(kl(f)))w.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Qn.get(f))&&om(t,a);var k=_=l.createElement("link");Nt(k),Wt(k,"link",t),k._p=new Promise(function(G,te){k.onload=G,k.onerror=te}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Fc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:w},d.set(f,_)}}}function Uw(t,r){hi.X(t,r);var a=ao;if(a&&t){var l=Tr(a).hoistableScripts,d=lo(t),f=l.get(d);f||(f=a.querySelector(Ol(d)),f||(t=T({src:t,async:!0},r),(r=Qn.get(d))&&lm(t,r),f=a.createElement("script"),Nt(f),Wt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function zw(t,r){hi.M(t,r);var a=ao;if(a&&t){var l=Tr(a).hoistableScripts,d=lo(t),f=l.get(d);f||(f=a.querySelector(Ol(d)),f||(t=T({src:t,async:!0,type:"module"},r),(r=Qn.get(d))&&lm(t,r),f=a.createElement("script"),Nt(f),Wt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function yv(t,r,a,l){var d=(d=xe.current)?Hc(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=oo(a.href),a=Tr(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=oo(a.href);var f=Tr(d).hoistableStyles,_=f.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=d.querySelector(kl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),Qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(t,a),f||Bw(d,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=lo(a),a=Tr(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function oo(t){return'href="'+hn(t)+'"'}function kl(t){return'link[rel="stylesheet"]['+t+"]"}function vv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function Bw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Wt(r,"link",a),Nt(r),t.head.appendChild(r))}function lo(t){return'[src="'+hn(t)+'"]'}function Ol(t){return"script[async]"+t}function _v(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+hn(a.href)+'"]');if(l)return r.instance=l,Nt(l),l;var d=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Nt(l),Wt(l,"style",d),Fc(l,a.precedence,t),r.instance=l;case"stylesheet":d=oo(a.href);var f=t.querySelector(kl(d));if(f)return r.state.loading|=4,r.instance=f,Nt(f),f;l=vv(a),(d=Qn.get(d))&&om(l,d),f=(t.ownerDocument||t).createElement("link"),Nt(f);var _=f;return _._p=new Promise(function(w,k){_.onload=w,_.onerror=k}),Wt(f,"link",l),r.state.loading|=4,Fc(f,a.precedence,t),r.instance=f;case"script":return f=lo(a.src),(d=t.querySelector(Ol(f)))?(r.instance=d,Nt(d),d):(l=a,(d=Qn.get(f))&&(l=T({},a),lm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),Nt(d),Wt(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Fc(l,a.precedence,t));return r.instance}function Fc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===r)f=w;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function om(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function lm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Gc=null;function Ev(t,r,a){if(Gc===null){var l=new Map,d=Gc=new Map;d.set(a,l)}else d=Gc,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[Er]||f[Rt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(r)||"";_=t+_;var w=l.get(_);w?w.push(f):l.set(_,[f])}}return l}function bv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function qw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Tv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Hw(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=oo(l.href),f=r.querySelector(kl(d));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Qc.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=f,Nt(f);return}f=r.ownerDocument||r,l=vv(l),(d=Qn.get(d))&&om(l,d),f=f.createElement("link"),Nt(f);var _=f;_._p=new Promise(function(w,k){_.onload=w,_.onerror=k}),Wt(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Qc.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var um=0;function Fw(t,r){return t.stylesheets&&t.count===0&&$c(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&$c(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+r);0<t.imgBytes&&um===0&&(um=62500*ww());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&$c(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>um?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$c(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yc=null;function $c(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yc=new Map,r.forEach(Gw,t),Yc=null,Qc.call(t))}function Gw(t,r){if(!(r.state.loading&4)){var a=Yc.get(t);if(a)var l=a.get(null);else{a=new Map,Yc.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var _=d[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=r.instance,_=d.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,d),a.set(_,d),this.count++,l=Qc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var Ml={$$typeof:j,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Qw(t,r,a,l,d,f,_,w,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vr(0),this.hiddenUpdates=vr(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function xv(t,r,a,l,d,f,_,w,k,G,te,ie){return t=new Qw(t,r,a,_,k,G,te,ie,w),r=1,f===!0&&(r|=24),f=Sn(3,null,null,r),t.current=f,f.stateNode=t,r=Bd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Gd(f),t}function wv(t){return t?(t=Ua,t):Ua}function Sv(t,r,a,l,d,f){d=wv(d),l.context===null?l.context=d:l.pendingContext=d,l=Fi(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Gi(t,l,r),a!==null&&(yn(a,t,r),dl(a,t,r))}function Av(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function cm(t,r){Av(t,r),(t=t.alternate)&&Av(t,r)}function Cv(t){if(t.tag===13||t.tag===31){var r=Ys(t,67108864);r!==null&&yn(r,t,67108864),cm(t,67108864)}}function Rv(t){if(t.tag===13||t.tag===31){var r=In();r=Vs(r);var a=Ys(t,r);a!==null&&yn(a,t,r),cm(t,r)}}var Kc=!0;function Yw(t,r,a,l){var d=z.T;z.T=null;var f=re.p;try{re.p=2,hm(t,r,a,l)}finally{re.p=f,z.T=d}}function $w(t,r,a,l){var d=z.T;z.T=null;var f=re.p;try{re.p=8,hm(t,r,a,l)}finally{re.p=f,z.T=d}}function hm(t,r,a,l){if(Kc){var d=dm(l);if(d===null)Jf(t,r,l,Xc,a),Iv(t,l);else if(Xw(d,t,r,a,l))l.stopPropagation();else if(Iv(t,l),r&4&&-1<Kw.indexOf(t)){for(;d!==null;){var f=Vn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=gr(f.pendingLanes);if(_!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var k=1<<31-Et(_);w.entanglements[1]|=k,_&=~k}Vr(f),(Ye&6)===0&&(kc=ln()+500,Rl(0))}}break;case 31:case 13:w=Ys(f,2),w!==null&&yn(w,f,2),Mc(),cm(f,2)}if(f=dm(l),f===null&&Jf(t,r,l,Xc,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Jf(t,r,l,null,a)}}function dm(t){return t=jn(t),fm(t)}var Xc=null;function fm(t){if(Xc=null,t=br(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===31){if(t=p(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Xc=t,null}function Nv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ds()){case Po:return 2;case Lo:return 8;case Ni:case vd:return 32;case Ru:return 268435456;default:return 32}default:return 32}}var mm=!1,ns=null,rs=null,is=null,Vl=new Map,jl=new Map,ss=[],Kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Iv(t,r){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Vl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(r.pointerId)}}function Pl(t,r,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=Vn(r),r!==null&&Cv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function Xw(t,r,a,l,d){switch(r){case"focusin":return ns=Pl(ns,t,r,a,l,d),!0;case"dragenter":return rs=Pl(rs,t,r,a,l,d),!0;case"mouseover":return is=Pl(is,t,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return Vl.set(f,Pl(Vl.get(f)||null,t,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,jl.set(f,Pl(jl.get(f)||null,t,r,a,l,d)),!0}return!1}function Dv(t){var r=br(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,tr(t.priority,function(){Rv(a)});return}}else if(r===31){if(r=p(a),r!==null){t.blockedOn=r,tr(t.priority,function(){Rv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=dm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xo=l,a.target.dispatchEvent(l),Xo=null}else return r=Vn(a),r!==null&&Cv(r),t.blockedOn=a,!1;r.shift()}return!0}function kv(t,r,a){Jc(t)&&a.delete(r)}function Jw(){mm=!1,ns!==null&&Jc(ns)&&(ns=null),rs!==null&&Jc(rs)&&(rs=null),is!==null&&Jc(is)&&(is=null),Vl.forEach(kv),jl.forEach(kv)}function Wc(t,r){t.blockedOn===r&&(t.blockedOn=null,mm||(mm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Jw)))}var Zc=null;function Ov(t){Zc!==t&&(Zc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Zc===t&&(Zc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(fm(l||a)===null)continue;break}var f=Vn(a);f!==null&&(t.splice(r,3),r-=3,df(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function uo(t){function r(k){return Wc(k,t)}ns!==null&&Wc(ns,t),rs!==null&&Wc(rs,t),is!==null&&Wc(is,t),Vl.forEach(r),jl.forEach(r);for(var a=0;a<ss.length;a++){var l=ss[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)Dv(a),a.blockedOn===null&&ss.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],_=d[qt]||null;if(typeof f=="function")_||Ov(a);else if(_){var w=null;if(f&&f.hasAttribute("formAction")){if(d=f,_=f[qt]||null)w=_.formAction;else if(fm(d)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Ov(a)}}}function Mv(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function pm(t){this._internalRoot=t}eh.prototype.render=pm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=In();Sv(a,l,t,r,null,null)},eh.prototype.unmount=pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Sv(t.current,2,null,t,null,null),Mc(),r[_r]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Mu();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ss.length&&r!==0&&r<ss[a].priority;a++);ss.splice(a,0,t),a===0&&Dv(t)}};var Vv=e.version;if(Vv!=="19.2.0")throw Error(s(527,Vv,"19.2.0"));re.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(r),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var Ww={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Zn=th.inject(Ww),Yt=th}catch{}}return Ul.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",d=qy,f=Hy,_=Fy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=xv(t,1,!1,null,null,a,l,null,d,f,_,Mv),t[_r]=r.current,Xf(t),new pm(r)},Ul.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,d="",f=qy,_=Hy,w=Fy,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),r=xv(t,1,!0,r,a??null,l,d,k,f,_,w,Mv),r.context=wv(null),a=r.current,l=In(),l=Vs(l),d=Fi(l),d.callback=null,Gi(a,d,l),a=l,r.current.lanes=a,Os(r,a),Vr(r),t[_r]=r.current,Xf(t),new eh(r)},Ul.version="19.2.0",Ul}var Gv;function uS(){if(Gv)return vm.exports;Gv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),vm.exports=lS(),vm.exports}var cS=uS();const hS=ME(cS);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qv="popstate";function dS(i={}){function e(o,u){let{pathname:h="/",search:p="",hash:m=""}=va(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Pm("",{pathname:h,search:p,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let m=o.location.href,g=m.indexOf("#");p=g===-1?m:m.slice(0,g)}return p+"#"+(typeof u=="string"?u:Zl(u))}function s(o,u){kn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return mS(e,n,s,i)}function dt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function kn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fS(){return Math.random().toString(36).substring(2,10)}function Yv(i,e){return{usr:i.state,key:i.key,idx:e}}function Pm(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?va(e):e,state:n,key:e&&e.key||s||fS()}}function Zl({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function va(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function mS(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,p="POP",m=null,g=E();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function E(){return(h.state||{idx:null}).idx}function T(){p="POP";let U=E(),Y=U==null?null:U-g;g=U,m&&m({action:p,location:X.location,delta:Y})}function C(U,Y){p="PUSH";let W=Pm(X.location,U,Y);n&&n(W,U),g=E()+1;let j=Yv(W,g),$=X.createHref(W);try{h.pushState(j,"",$)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign($)}u&&m&&m({action:p,location:X.location,delta:1})}function M(U,Y){p="REPLACE";let W=Pm(X.location,U,Y);n&&n(W,U),g=E();let j=Yv(W,g),$=X.createHref(W);h.replaceState(j,"",$),u&&m&&m({action:p,location:X.location,delta:0})}function B(U){return pS(U)}let X={get action(){return p},get location(){return i(o,h)},listen(U){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Qv,T),m=U,()=>{o.removeEventListener(Qv,T),m=null}},createHref(U){return e(o,U)},createURL:B,encodeLocation(U){let Y=B(U);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:C,replace:M,go(U){return h.go(U)}};return X}function pS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:Zl(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function VE(i,e,n="/"){return gS(i,e,n,!1)}function gS(i,e,n,s){let o=typeof e=="string"?va(e):e,u=yi(o.pathname||"/",n);if(u==null)return null;let h=jE(i);yS(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let g=RS(u);p=AS(h[m],g,s)}return p}function jE(i,e=[],n=[],s="",o=!1){let u=(h,p,m=o,g)=>{let E={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(s)&&m)return;dt(E.relativePath.startsWith(s),`Absolute route path "${E.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(s.length)}let T=mi([s,E.relativePath]),C=n.concat(E);h.children&&h.children.length>0&&(dt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),jE(h.children,e,C,T,m)),!(h.path==null&&!h.index)&&e.push({path:T,score:wS(T,h.index),routesMeta:C})};return i.forEach((h,p)=>{var m;if(h.path===""||!((m=h.path)!=null&&m.includes("?")))u(h,p);else for(let g of PE(h.path))u(h,p,!0,g)}),e}function PE(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=PE(s.join("/")),p=[];return p.push(...h.map(m=>m===""?u:[u,m].join("/"))),o&&p.push(...h),p.map(m=>i.startsWith("/")&&m===""?"/":m)}function yS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:SS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var vS=/^:[\w-]+$/,_S=3,ES=2,bS=1,TS=10,xS=-2,$v=i=>i==="*";function wS(i,e){let n=i.split("/"),s=n.length;return n.some($v)&&(s+=xS),e&&(s+=ES),n.filter(o=>!$v(o)).reduce((o,u)=>o+(vS.test(u)?_S:u===""?bS:TS),s)}function SS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function AS(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",h=[];for(let p=0;p<s.length;++p){let m=s[p],g=p===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",T=bh({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},E),C=m.route;if(!T&&g&&n&&!s[s.length-1].route.index&&(T=bh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:mi([u,T.pathname]),pathnameBase:OS(mi([u,T.pathnameBase])),route:C}),T.pathnameBase!=="/"&&(u=mi([u,T.pathnameBase]))}return h}function bh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=CS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:T},C)=>{if(E==="*"){let B=p[C]||"";h=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const M=p[C];return T&&!M?g[E]=void 0:g[E]=(M||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:i}}function CS(i,e=!1,n=!0){kn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function RS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function yi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var NS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IS=i=>NS.test(i);function DS(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?va(i):i,u;if(n)if(IS(n))u=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${n}`)}n.startsWith("/")?u=Kv(n.substring(1),"/"):u=Kv(n,e)}else u=e;return{pathname:u,search:MS(s),hash:VS(o)}}function Kv(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Tm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fp(i){let e=kS(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function mp(i,e,n,s=!1){let o;typeof i=="string"?o=va(i):(o={...i},dt(!o.pathname||!o.pathname.includes("?"),Tm("?","pathname","search",o)),dt(!o.pathname||!o.pathname.includes("#"),Tm("#","pathname","hash",o)),dt(!o.search||!o.search.includes("#"),Tm("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,p;if(h==null)p=n;else{let T=e.length-1;if(!s&&h.startsWith("..")){let C=h.split("/");for(;C[0]==="..";)C.shift(),T-=1;o.pathname=C.join("/")}p=T>=0?e[T]:"/"}let m=DS(o,p),g=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(g||E)&&(m.pathname+="/"),m}var mi=i=>i.join("/").replace(/\/\/+/g,"/"),OS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),MS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,VS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function jS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LE=["POST","PUT","PATCH","DELETE"];new Set(LE);var PS=["GET",...LE];new Set(PS);var Ro=P.createContext(null);Ro.displayName="DataRouter";var Fh=P.createContext(null);Fh.displayName="DataRouterState";P.createContext(!1);var UE=P.createContext({isTransitioning:!1});UE.displayName="ViewTransition";var LS=P.createContext(new Map);LS.displayName="Fetchers";var US=P.createContext(null);US.displayName="Await";var mr=P.createContext(null);mr.displayName="Navigation";var hu=P.createContext(null);hu.displayName="Location";var Jn=P.createContext({outlet:null,matches:[],isDataRoute:!1});Jn.displayName="Route";var pp=P.createContext(null);pp.displayName="RouteError";function zS(i,{relative:e}={}){dt(No(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=P.useContext(mr),{hash:o,pathname:u,search:h}=du(i,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:mi([n,u])),s.createHref({pathname:p,search:h,hash:o})}function No(){return P.useContext(hu)!=null}function ws(){return dt(No(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(hu).location}var zE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BE(i){P.useContext(mr).static||P.useLayoutEffect(i)}function Fr(){let{isDataRoute:i}=P.useContext(Jn);return i?t1():BS()}function BS(){dt(No(),"useNavigate() may be used only in the context of a <Router> component.");let i=P.useContext(Ro),{basename:e,navigator:n}=P.useContext(mr),{matches:s}=P.useContext(Jn),{pathname:o}=ws(),u=JSON.stringify(fp(s)),h=P.useRef(!1);return BE(()=>{h.current=!0}),P.useCallback((m,g={})=>{if(kn(h.current,zE),!h.current)return;if(typeof m=="number"){n.go(m);return}let E=mp(m,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:mi([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,i])}var qS=P.createContext(null);function HS(i){let e=P.useContext(Jn).outlet;return P.useMemo(()=>e&&P.createElement(qS.Provider,{value:i},e),[e,i])}function qE(){let{matches:i}=P.useContext(Jn),e=i[i.length-1];return e?e.params:{}}function du(i,{relative:e}={}){let{matches:n}=P.useContext(Jn),{pathname:s}=ws(),o=JSON.stringify(fp(n));return P.useMemo(()=>mp(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function FS(i,e){return HE(i,e)}function HE(i,e,n,s,o){var W;dt(No(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=P.useContext(mr),{matches:h}=P.useContext(Jn),p=h[h.length-1],m=p?p.params:{},g=p?p.pathname:"/",E=p?p.pathnameBase:"/",T=p&&p.route;{let j=T&&T.path||"";FE(g,!T||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let C=ws(),M;if(e){let j=typeof e=="string"?va(e):e;dt(E==="/"||((W=j.pathname)==null?void 0:W.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${j.pathname}" was given in the \`location\` prop.`),M=j}else M=C;let B=M.pathname||"/",X=B;if(E!=="/"){let j=E.replace(/^\//,"").split("/");X="/"+B.replace(/^\//,"").split("/").slice(j.length).join("/")}let U=VE(i,{pathname:X});kn(T||U!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),kn(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=KS(U&&U.map(j=>Object.assign({},j,{params:Object.assign({},m,j.params),pathname:mi([E,u.encodeLocation?u.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?E:mi([E,u.encodeLocation?u.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),h,n,s,o);return e&&Y?P.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},Y):Y}function GS(){let i=e1(),e=jS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:u},"ErrorBoundary")," or"," ",P.createElement("code",{style:u},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:o},n):null,h)}var QS=P.createElement(GS,null),YS=class extends P.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?P.createElement(Jn.Provider,{value:this.props.routeContext},P.createElement(pp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $S({routeContext:i,match:e,children:n}){let s=P.useContext(Ro);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Jn.Provider,{value:i},n)}function KS(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,h=n==null?void 0:n.errors;if(h!=null){let E=u.findIndex(T=>T.route.id&&(h==null?void 0:h[T.route.id])!==void 0);dt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let p=!1,m=-1;if(n)for(let E=0;E<u.length;E++){let T=u[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(m=E),T.route.id){let{loaderData:C,errors:M}=n,B=T.route.loader&&!C.hasOwnProperty(T.route.id)&&(!M||M[T.route.id]===void 0);if(T.route.lazy||B){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let g=n&&s?(E,T)=>{var C,M;s(E,{location:n.location,params:((M=(C=n.matches)==null?void 0:C[0])==null?void 0:M.params)??{},errorInfo:T})}:void 0;return u.reduceRight((E,T,C)=>{let M,B=!1,X=null,U=null;n&&(M=h&&T.route.id?h[T.route.id]:void 0,X=T.route.errorElement||QS,p&&(m<0&&C===0?(FE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,U=null):m===C&&(B=!0,U=T.route.hydrateFallbackElement||null)));let Y=e.concat(u.slice(0,C+1)),W=()=>{let j;return M?j=X:B?j=U:T.route.Component?j=P.createElement(T.route.Component,null):T.route.element?j=T.route.element:j=E,P.createElement($S,{match:T,routeContext:{outlet:E,matches:Y,isDataRoute:n!=null},children:j})};return n&&(T.route.ErrorBoundary||T.route.errorElement||C===0)?P.createElement(YS,{location:n.location,revalidation:n.revalidation,component:X,error:M,children:W(),routeContext:{outlet:null,matches:Y,isDataRoute:!0},onError:g}):W()},null)}function gp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XS(i){let e=P.useContext(Ro);return dt(e,gp(i)),e}function JS(i){let e=P.useContext(Fh);return dt(e,gp(i)),e}function WS(i){let e=P.useContext(Jn);return dt(e,gp(i)),e}function yp(i){let e=WS(i),n=e.matches[e.matches.length-1];return dt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function ZS(){return yp("useRouteId")}function e1(){var s;let i=P.useContext(pp),e=JS("useRouteError"),n=yp("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function t1(){let{router:i}=XS("useNavigate"),e=yp("useNavigate"),n=P.useRef(!1);return BE(()=>{n.current=!0}),P.useCallback(async(o,u={})=>{kn(n.current,zE),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var Xv={};function FE(i,e,n){!e&&!Xv[i]&&(Xv[i]=!0,kn(!1,n))}P.memo(n1);function n1({routes:i,future:e,state:n,unstable_onError:s}){return HE(i,void 0,n,s,e)}function vp({to:i,replace:e,state:n,relative:s}){dt(No(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=P.useContext(mr);kn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=P.useContext(Jn),{pathname:h}=ws(),p=Fr(),m=mp(i,fp(u),h,s==="path"),g=JSON.stringify(m);return P.useEffect(()=>{p(JSON.parse(g),{replace:e,state:n,relative:s})},[p,g,s,e,n]),null}function Gh(i){return HS(i.context)}function Yn(i){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function r1({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){dt(!No(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),p=P.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof n=="string"&&(n=va(n));let{pathname:m="/",search:g="",hash:E="",state:T=null,key:C="default"}=n,M=P.useMemo(()=>{let B=yi(m,h);return B==null?null:{location:{pathname:B,search:g,hash:E,state:T,key:C},navigationType:s}},[h,m,g,E,T,C,s]);return kn(M!=null,`<Router basename="${h}"> is not able to match the URL "${m}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:P.createElement(mr.Provider,{value:p},P.createElement(hu.Provider,{children:e,value:M}))}function i1({children:i,location:e}){return FS(Lm(i),e)}function Lm(i,e=[]){let n=[];return P.Children.forEach(i,(s,o)=>{if(!P.isValidElement(s))return;let u=[...e,o];if(s.type===P.Fragment){n.push.apply(n,Lm(s.props.children,u));return}dt(s.type===Yn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Lm(s.props.children,u)),n.push(h)}),n}var uh="get",ch="application/x-www-form-urlencoded";function Qh(i){return i!=null&&typeof i.tagName=="string"}function s1(i){return Qh(i)&&i.tagName.toLowerCase()==="button"}function a1(i){return Qh(i)&&i.tagName.toLowerCase()==="form"}function o1(i){return Qh(i)&&i.tagName.toLowerCase()==="input"}function l1(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function u1(i,e){return i.button===0&&(!e||e==="_self")&&!l1(i)}var nh=null;function c1(){if(nh===null)try{new FormData(document.createElement("form"),0),nh=!1}catch{nh=!0}return nh}var h1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(i){return i!=null&&!h1.has(i)?(kn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ch}"`),null):i}function d1(i,e){let n,s,o,u,h;if(a1(i)){let p=i.getAttribute("action");s=p?yi(p,e):null,n=i.getAttribute("method")||uh,o=xm(i.getAttribute("enctype"))||ch,u=new FormData(i)}else if(s1(i)||o1(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||p.getAttribute("action");if(s=m?yi(m,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||uh,o=xm(i.getAttribute("formenctype"))||xm(p.getAttribute("enctype"))||ch,u=new FormData(p,i),!c1()){let{name:g,type:E,value:T}=i;if(E==="image"){let C=g?`${g}.`:"";u.append(`${C}x`,"0"),u.append(`${C}y`,"0")}else g&&u.append(g,T)}}else{if(Qh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uh,s=null,o=ch,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _p(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function f1(i,e,n){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&yi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function m1(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function p1(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function g1(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await m1(u,n);return h.links?h.links():[]}return[]}));return E1(s.flat(1).filter(p1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Jv(i,e,n,s,o,u){let h=(m,g)=>n[g]?m.route.id!==n[g].route.id:!0,p=(m,g)=>{var E;return n[g].pathname!==m.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==m.params["*"]};return u==="assets"?e.filter((m,g)=>h(m,g)||p(m,g)):u==="data"?e.filter((m,g)=>{var T;let E=s.routes[m.route.id];if(!E||!E.hasLoader)return!1;if(h(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let C=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=n[0])==null?void 0:T.params)||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function y1(i,e,{includeHydrateFallback:n}={}){return v1(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function v1(i){return[...new Set(i)]}function _1(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function E1(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(_1(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function GE(){let i=P.useContext(Ro);return _p(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function b1(){let i=P.useContext(Fh);return _p(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ep=P.createContext(void 0);Ep.displayName="FrameworkContext";function QE(){let i=P.useContext(Ep);return _p(i,"You must render this element inside a <HydratedRouter> element"),i}function T1(i,e){let n=P.useContext(Ep),[s,o]=P.useState(!1),[u,h]=P.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:E,onTouchStart:T}=e,C=P.useRef(null);P.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let X=Y=>{Y.forEach(W=>{h(W.isIntersecting)})},U=new IntersectionObserver(X,{threshold:.5});return C.current&&U.observe(C.current),()=>{U.disconnect()}}},[i]),P.useEffect(()=>{if(s){let X=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(X)}}},[s]);let M=()=>{o(!0)},B=()=>{o(!1),h(!1)};return n?i!=="intent"?[u,C,{}]:[u,C,{onFocus:zl(p,M),onBlur:zl(m,B),onMouseEnter:zl(g,M),onMouseLeave:zl(E,B),onTouchStart:zl(T,M)}]:[!1,C,{}]}function zl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function x1({page:i,...e}){let{router:n}=GE(),s=P.useMemo(()=>VE(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?P.createElement(S1,{page:i,matches:s,...e}):null}function w1(i){let{manifest:e,routeModules:n}=QE(),[s,o]=P.useState([]);return P.useEffect(()=>{let u=!1;return g1(i,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[i,e,n]),s}function S1({page:i,matches:e,...n}){let s=ws(),{manifest:o,routeModules:u}=QE(),{basename:h}=GE(),{loaderData:p,matches:m}=b1(),g=P.useMemo(()=>Jv(i,e,m,o,s,"data"),[i,e,m,o,s]),E=P.useMemo(()=>Jv(i,e,m,o,s,"assets"),[i,e,m,o,s]),T=P.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let B=new Set,X=!1;if(e.forEach(Y=>{var j;let W=o.routes[Y.route.id];!W||!W.hasLoader||(!g.some($=>$.route.id===Y.route.id)&&Y.route.id in p&&((j=u[Y.route.id])!=null&&j.shouldRevalidate)||W.hasClientLoader?X=!0:B.add(Y.route.id))}),B.size===0)return[];let U=f1(i,h,"data");return X&&B.size>0&&U.searchParams.set("_routes",e.filter(Y=>B.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[U.pathname+U.search]},[h,p,s,o,g,e,i,u]),C=P.useMemo(()=>y1(E,o),[E,o]),M=w1(E);return P.createElement(P.Fragment,null,T.map(B=>P.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),C.map(B=>P.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),M.map(({key:B,link:X})=>P.createElement("link",{key:B,nonce:n.nonce,...X})))}function A1(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var YE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YE&&(window.__reactRouterVersion="7.9.6")}catch{}function C1({basename:i,children:e,window:n}){let s=P.useRef();s.current==null&&(s.current=dS({window:n,v5Compat:!0}));let o=s.current,[u,h]=P.useState({action:o.action,location:o.location}),p=P.useCallback(m=>{P.startTransition(()=>h(m))},[h]);return P.useLayoutEffect(()=>o.listen(p),[o,p]),P.createElement(r1,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var $E=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ua=P.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:p,target:m,to:g,preventScrollReset:E,viewTransition:T,...C},M){let{basename:B}=P.useContext(mr),X=typeof g=="string"&&$E.test(g),U,Y=!1;if(typeof g=="string"&&X&&(U=g,YE))try{let x=new URL(window.location.href),N=g.startsWith("//")?new URL(x.protocol+g):new URL(g),I=yi(N.pathname,B);N.origin===x.origin&&I!=null?g=I+N.search+N.hash:Y=!0}catch{kn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=zS(g,{relative:o}),[j,$,le]=T1(s,C),oe=D1(g,{replace:h,state:p,target:m,preventScrollReset:E,relative:o,viewTransition:T});function R(x){e&&e(x),x.defaultPrevented||oe(x)}let A=P.createElement("a",{...C,...le,href:U||W,onClick:Y||u?e:R,ref:A1(M,$),target:m,"data-discover":!X&&n==="render"?"true":void 0});return j&&!X?P.createElement(P.Fragment,null,A,P.createElement(x1,{page:W})):A});ua.displayName="Link";var R1=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:p,children:m,...g},E){let T=du(h,{relative:g.relative}),C=ws(),M=P.useContext(Fh),{navigator:B,basename:X}=P.useContext(mr),U=M!=null&&j1(T)&&p===!0,Y=B.encodeLocation?B.encodeLocation(T).pathname:T.pathname,W=C.pathname,j=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||(W=W.toLowerCase(),j=j?j.toLowerCase():null,Y=Y.toLowerCase()),j&&X&&(j=yi(j,X)||j);const $=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let le=W===Y||!o&&W.startsWith(Y)&&W.charAt($)==="/",oe=j!=null&&(j===Y||!o&&j.startsWith(Y)&&j.charAt(Y.length)==="/"),R={isActive:le,isPending:oe,isTransitioning:U},A=le?e:void 0,x;typeof s=="function"?x=s(R):x=[s,le?"active":null,oe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let N=typeof u=="function"?u(R):u;return P.createElement(ua,{...g,"aria-current":A,className:x,ref:E,style:N,to:h,viewTransition:p},typeof m=="function"?m(R):m)});R1.displayName="NavLink";var N1=P.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:h=uh,action:p,onSubmit:m,relative:g,preventScrollReset:E,viewTransition:T,...C},M)=>{let B=M1(),X=V1(p,{relative:g}),U=h.toLowerCase()==="get"?"get":"post",Y=typeof p=="string"&&$E.test(p),W=j=>{if(m&&m(j),j.defaultPrevented)return;j.preventDefault();let $=j.nativeEvent.submitter,le=($==null?void 0:$.getAttribute("formmethod"))||h;B($||j.currentTarget,{fetcherKey:e,method:le,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:T})};return P.createElement("form",{ref:M,method:U,action:X,onSubmit:s?m:W,...C,"data-discover":!Y&&i==="render"?"true":void 0})});N1.displayName="Form";function I1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KE(i){let e=P.useContext(Ro);return dt(e,I1(i)),e}function D1(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let p=Fr(),m=ws(),g=du(i,{relative:u});return P.useCallback(E=>{if(u1(E,e)){E.preventDefault();let T=n!==void 0?n:Zl(m)===Zl(g);p(i,{replace:T,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[m,p,g,n,s,e,i,o,u,h])}var k1=0,O1=()=>`__${String(++k1)}__`;function M1(){let{router:i}=KE("useSubmit"),{basename:e}=P.useContext(mr),n=ZS();return P.useCallback(async(s,o={})=>{let{action:u,method:h,encType:p,formData:m,body:g}=d1(s,e);if(o.navigate===!1){let E=o.fetcherKey||O1();await i.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:m,body:g,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function V1(i,{relative:e}={}){let{basename:n}=P.useContext(mr),s=P.useContext(Jn);dt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...du(i||".",{relative:e})},h=ws();if(i==null){u.search=h.search;let p=new URLSearchParams(u.search),m=p.getAll("index");if(m.some(E=>E==="")){p.delete("index"),m.filter(T=>T).forEach(T=>p.append("index",T));let E=p.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:mi([n,u.pathname])),Zl(u)}function j1(i,{relative:e}={}){let n=P.useContext(UE);dt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=KE("useViewTransitionState"),o=du(i,{relative:e});if(!n.isTransitioning)return!1;let u=yi(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=yi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return bh(o.pathname,h)!=null||bh(o.pathname,u)!=null}const P1=()=>{};var Wv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},L1=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],h=i[n++],p=i[n++],m=((o&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},JE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,p=h?i[o+1]:0,m=o+2<i.length,g=m?i[o+2]:0,E=u>>2,T=(u&3)<<4|p>>4;let C=(p&15)<<2|g>>6,M=g&63;m||(M=64,h||(C=64)),s.push(n[E],n[T],n[C],n[M])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(XE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):L1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||p==null||g==null||T==null)throw new U1;const C=u<<2|p>>4;if(s.push(C),g!==64){const M=p<<4&240|g>>2;if(s.push(M),T!==64){const B=g<<6&192|T;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class U1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z1=function(i){const e=XE(i);return JE.encodeByteArray(e,!0)},Th=function(i){return z1(i).replace(/\./g,"")},WE=function(i){try{return JE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=()=>B1().__FIREBASE_DEFAULTS__,H1=()=>{if(typeof process>"u"||typeof Wv>"u")return;const i=Wv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},F1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&WE(i[1]);return e&&JSON.parse(e)},Yh=()=>{try{return P1()||q1()||H1()||F1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ZE=i=>{var e,n;return(n=(e=Yh())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},G1=i=>{const e=ZE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},eb=()=>{var i;return(i=Yh())==null?void 0:i.config},tb=i=>{var e;return(e=Yh())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Th(JSON.stringify(n)),Th(JSON.stringify(h)),""].join(".")}const Yl={};function $1(){const i={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?i.emulator.push(e):i.prod.push(e);return i}function K1(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Zv=!1;function rb(i,e){if(typeof window>"u"||typeof document>"u"||!Io(window.location.host)||Yl[i]===e||Yl[i]||Zv)return;Yl[i]=e;function n(C){return`__firebase__banner__${C}`}const s="__firebase__banner",u=$1().prod.length>0;function h(){const C=document.getElementById(s);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function m(C,M){C.setAttribute("width","24"),C.setAttribute("id",M),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function g(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Zv=!0,h()},C}function E(C,M){C.setAttribute("id",M),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=K1(s),M=n("text"),B=document.getElementById(M)||document.createElement("span"),X=n("learnmore"),U=document.getElementById(X)||document.createElement("a"),Y=n("preprendIcon"),W=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const j=C.element;p(j),E(U,X);const $=g();m(W,Y),j.append(W,B,U,$),document.body.appendChild(j)}u?(B.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function J1(){var e;const i=(e=Yh())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function eA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tA(){const i=on();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function nA(){return!J1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rA(){try{return typeof indexedDB=="object"}catch{return!1}}function iA(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="FirebaseError";class xi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=sA,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?aA(u,s):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new xi(o,p,s)}}function aA(i,e){return i.replace(oA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const oA=/\{\$([^}]+)}/g;function lA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function da(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(e_(u)&&e_(h)){if(!da(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function e_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Bl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ql(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function uA(i,e){const n=new cA(i,e);return n.subscribe.bind(n)}class cA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");hA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=wm),o.error===void 0&&(o.error=wm),o.complete===void 0&&(o.complete=wm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hA(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(i){return i&&i._delegate?i._delegate:i}class fa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Q1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mA(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);s===p&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fA(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fA(i){return i===aa?void 0:i}function mA(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const gA={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},yA=Ue.INFO,vA={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},_A=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=vA[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bp{constructor(e){this.name=e,this._logLevel=yA,this._logHandler=_A,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const EA=(i,e)=>e.some(n=>i instanceof n);let t_,n_;function bA(){return t_||(t_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TA(){return n_||(n_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ib=new WeakMap,Um=new WeakMap,sb=new WeakMap,Sm=new WeakMap,Tp=new WeakMap;function xA(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(fs(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&ib.set(n,i)}).catch(()=>{}),Tp.set(e,i),e}function wA(i){if(Um.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});Um.set(i,e)}let zm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Um.get(i);if(e==="objectStoreNames")return i.objectStoreNames||sb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fs(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function SA(i){zm=i(zm)}function AA(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Am(this),e,...n);return sb.set(s,e.sort?e.sort():[e]),fs(s)}:TA().includes(i)?function(...e){return i.apply(Am(this),e),fs(ib.get(this))}:function(...e){return fs(i.apply(Am(this),e))}}function CA(i){return typeof i=="function"?AA(i):(i instanceof IDBTransaction&&wA(i),EA(i,bA())?new Proxy(i,zm):i)}function fs(i){if(i instanceof IDBRequest)return xA(i);if(Sm.has(i))return Sm.get(i);const e=CA(i);return e!==i&&(Sm.set(i,e),Tp.set(e,i)),e}const Am=i=>Tp.get(i);function RA(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),p=fs(h);return s&&h.addEventListener("upgradeneeded",m=>{s(fs(h.result),m.oldVersion,m.newVersion,fs(h.transaction),m)}),n&&h.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const NA=["get","getKey","getAll","getAllKeys","count"],IA=["put","add","delete","clear"],Cm=new Map;function r_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=IA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||NA.includes(n)))return;const u=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),o&&m.done]))[0]};return Cm.set(e,u),u}SA(i=>({...i,get:(e,n,s)=>r_(e,n)||i.get(e,n,s),has:(e,n)=>!!r_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function kA(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bm="@firebase/app",i_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new bp("@firebase/app"),OA="@firebase/app-compat",MA="@firebase/analytics-compat",VA="@firebase/analytics",jA="@firebase/app-check-compat",PA="@firebase/app-check",LA="@firebase/auth",UA="@firebase/auth-compat",zA="@firebase/database",BA="@firebase/data-connect",qA="@firebase/database-compat",HA="@firebase/functions",FA="@firebase/functions-compat",GA="@firebase/installations",QA="@firebase/installations-compat",YA="@firebase/messaging",$A="@firebase/messaging-compat",KA="@firebase/performance",XA="@firebase/performance-compat",JA="@firebase/remote-config",WA="@firebase/remote-config-compat",ZA="@firebase/storage",eC="@firebase/storage-compat",tC="@firebase/firestore",nC="@firebase/ai",rC="@firebase/firestore-compat",iC="firebase",sC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",aC={[Bm]:"fire-core",[OA]:"fire-core-compat",[VA]:"fire-analytics",[MA]:"fire-analytics-compat",[PA]:"fire-app-check",[jA]:"fire-app-check-compat",[LA]:"fire-auth",[UA]:"fire-auth-compat",[zA]:"fire-rtdb",[BA]:"fire-data-connect",[qA]:"fire-rtdb-compat",[HA]:"fire-fn",[FA]:"fire-fn-compat",[GA]:"fire-iid",[QA]:"fire-iid-compat",[YA]:"fire-fcm",[$A]:"fire-fcm-compat",[KA]:"fire-perf",[XA]:"fire-perf-compat",[JA]:"fire-rc",[WA]:"fire-rc-compat",[ZA]:"fire-gcs",[eC]:"fire-gcs-compat",[tC]:"fire-fst",[rC]:"fire-fst-compat",[nC]:"fire-vertex","fire-js":"fire-js",[iC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map,oC=new Map,Hm=new Map;function s_(i,e){try{i.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Eo(i){const e=i.name;if(Hm.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;Hm.set(e,i);for(const n of xh.values())s_(n,i);for(const n of oC.values())s_(n,i);return!0}function xp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function $n(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new fu("app","Firebase",lC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=sC;function ab(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:qm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ms.create("bad-app-name",{appName:String(o)});if(n||(n=eb()),!n)throw ms.create("no-options");const u=xh.get(o);if(u){if(da(n,u.options)&&da(s,u.config))return u;throw ms.create("duplicate-app",{appName:o})}const h=new pA(o);for(const m of Hm.values())h.addComponent(m);const p=new uC(n,s,h);return xh.set(o,p),p}function ob(i=qm){const e=xh.get(i);if(!e&&i===qm&&eb())return ab();if(!e)throw ms.create("no-app",{appName:i});return e}function ps(i,e,n){let s=aC[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(h.join(" "));return}Eo(new fa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firebase-heartbeat-database",hC=1,eu="firebase-heartbeat-store";let Rm=null;function lb(){return Rm||(Rm=RA(cC,hC,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(i=>{throw ms.create("idb-open",{originalErrorMessage:i.message})})),Rm}async function dC(i){try{const n=(await lb()).transaction(eu),s=await n.objectStore(eu).get(ub(i));return await n.done,s}catch(e){if(e instanceof xi)vi.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(n.message)}}}async function a_(i,e){try{const s=(await lb()).transaction(eu,"readwrite");await s.objectStore(eu).put(e,ub(i)),await s.done}catch(n){if(n instanceof xi)vi.warn(n.message);else{const s=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(s.message)}}}function ub(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=1024,mC=30;class pC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=o_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>mC){const h=vC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){vi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=o_(),{heartbeatsToSend:s,unsentEntries:o}=gC(this._heartbeatsCache.heartbeats),u=Th(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return vi.warn(n),""}}}function o_(){return new Date().toISOString().substring(0,10)}function gC(i,e=fC){const n=[];let s=i.slice();for(const o of i){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),l_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),l_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class yC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rA()?iA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return a_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return a_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function l_(i){return Th(JSON.stringify({version:2,heartbeats:i})).length}function vC(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(i){Eo(new fa("platform-logger",e=>new DA(e),"PRIVATE")),Eo(new fa("heartbeat",e=>new pC(e),"PRIVATE")),ps(Bm,i_,i),ps(Bm,i_,"esm2020"),ps("fire-js","")}_C("");var EC="firebase",bC="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ps(EC,bC,"app");function cb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TC=cb,hb=new fu("auth","Firebase",cb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new bp("@firebase/auth");function xC(i,...e){wh.logLevel<=Ue.WARN&&wh.warn(`Auth (${Do}): ${i}`,...e)}function hh(i,...e){wh.logLevel<=Ue.ERROR&&wh.error(`Auth (${Do}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(i,...e){throw wp(i,...e)}function Pr(i,...e){return wp(i,...e)}function db(i,e,n){const s={...TC(),[e]:n};return new fu("auth","Firebase",s).create(e,{appName:i.name})}function pi(i){return db(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wp(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return hb.create(i,...e)}function Ae(i,e,...n){if(!i)throw wp(e,...n)}function di(i){const e="INTERNAL ASSERTION FAILED: "+i;throw hh(e),new Error(e)}function _i(i,e){i||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function wC(){return u_()==="http:"||u_()==="https:"}function u_(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wC()||Z1()||"connection"in navigator)?navigator.onLine:!0}function AC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=X1()||eA()}get(){return SC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(i,e){_i(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NC=new pu(3e4,6e4);function Ss(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function As(i,e,n,s,o={}){return mb(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const p=mu({key:i.config.apiKey,...h}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...u};return W1()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Io(i.emulatorConfig.host)&&(g.credentials="include"),fb.fetch()(await pb(i,i.config.apiHost,n,p),g)})}async function mb(i,e,n){i._canInitEmulator=!1;const s={...CC,...e};try{const o=new DC(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw rh(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(i,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw rh(i,"email-already-in-use",h);if(m==="USER_DISABLED")throw rh(i,"user-disabled",h);const E=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw db(i,E,g);dr(i,E)}}catch(o){if(o instanceof xi)throw o;dr(i,"network-request-failed",{message:String(o)})}}async function gu(i,e,n,s,o={}){const u=await As(i,e,n,s,o);return"mfaPendingCredential"in u&&dr(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function pb(i,e,n,s){const o=`${e}${n}?${s}`,u=i,h=u.config.emulator?Sp(i.config,o):`${i.config.apiScheme}://${o}`;return RC.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function IC(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Pr(this.auth,"network-request-failed")),NC.get())})}}function rh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Pr(i,e,s);return o.customData._tokenResponse=n,o}function c_(i){return i!==void 0&&i.enterprise!==void 0}class kC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OC(i,e){return As(i,"GET","/v2/recaptchaConfig",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(i,e){return As(i,"POST","/v1/accounts:delete",e)}async function Sh(i,e){return As(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VC(i,e=!1){const n=Bt(i),s=await n.getIdToken(e),o=Ap(s);Ae(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:$l(Nm(o.auth_time)),issuedAtTime:$l(Nm(o.iat)),expirationTime:$l(Nm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Nm(i){return Number(i)*1e3}function Ap(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return hh("JWT malformed, contained fewer than 3 sections"),null;try{const o=WE(n);return o?JSON.parse(o):(hh("Failed to decode base64 JWT payload"),null)}catch(o){return hh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function h_(i){const e=Ap(i);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof xi&&jC(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function jC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$l(this.lastLoginAt),this.creationTime=$l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(i){var T;const e=i.auth,n=await i.getIdToken(),s=await tu(i,Sh(e,{idToken:n}));Ae(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=(T=o.providerUserInfo)!=null&&T.length?gb(o.providerUserInfo):[],h=UC(i.providerData,u),p=i.isAnonymous,m=!(i.email&&o.passwordHash)&&!(h!=null&&h.length),g=p?m:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Gm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,E)}async function LC(i){const e=Bt(i);await Ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UC(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function gb(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(i,e){const n=await mb(i,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await pb(i,o,"/v1/token",`key=${u}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:s};return i.emulatorConfig&&Io(i.emulatorConfig.host)&&(m.credentials="include"),fb.fetch()(h,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BC(i,e){return As(i,"POST","/v2/accounts:revokeToken",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=h_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await zC(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new go;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ae(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Ae(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(i,e){Ae(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new PC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Gm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VC(this,e)}reload(){return LC(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ah(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await tu(this,MC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,m=n._redirectEventId??void 0,g=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:T,emailVerified:C,isAnonymous:M,providerData:B,stsTokenManager:X}=n;Ae(T&&X,e,"internal-error");const U=go.fromJSON(this.name,X);Ae(typeof T=="string",e,"internal-error"),os(s,e.name),os(o,e.name),Ae(typeof C=="boolean",e,"internal-error"),Ae(typeof M=="boolean",e,"internal-error"),os(u,e.name),os(h,e.name),os(p,e.name),os(m,e.name),os(g,e.name),os(E,e.name);const Y=new hr({uid:T,auth:e,email:o,emailVerified:C,displayName:s,isAnonymous:M,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:U,createdAt:g,lastLoginAt:E});return B&&Array.isArray(B)&&(Y.providerData=B.map(W=>({...W}))),m&&(Y._redirectEventId=m),Y}static async _fromIdTokenResponse(e,n,s=!1){const o=new go;o.updateFromServerResponse(n);const u=new hr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ah(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ae(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?gb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),p=new go;p.updateFromIdToken(s);const m=new hr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Gm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new Map;function fi(i){_i(i instanceof Function,"Expected a class definition");let e=d_.get(i);return e?(_i(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,d_.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yb.type="NONE";const f_=yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(i,e,n){return`firebase:${i}:${e}:${n}`}class yo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=dh(this.userKey,o.apiKey,u),this.fullPersistenceKey=dh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sh(this.auth,{idToken:e}).catch(()=>{});return n?hr._fromGetAccountInfoResponse(this.auth,n,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new yo(fi(f_),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||fi(f_);const h=dh(s,e.config.apiKey,e.name);let p=null;for(const g of n)try{const E=await g._get(h);if(E){let T;if(typeof E=="string"){const C=await Sh(e,{idToken:E}).catch(()=>{});if(!C)break;T=await hr._fromGetAccountInfoResponse(e,C,E)}else T=hr._fromJSON(e,E);g!==u&&(p=T),u=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new yo(u,e,s):(u=m[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new yo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xb(e))return"Blackberry";if(wb(e))return"Webos";if(_b(e))return"Safari";if((e.includes("chrome/")||Eb(e))&&!e.includes("edge/"))return"Chrome";if(Tb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function vb(i=on()){return/firefox\//i.test(i)}function _b(i=on()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Eb(i=on()){return/crios\//i.test(i)}function bb(i=on()){return/iemobile/i.test(i)}function Tb(i=on()){return/android/i.test(i)}function xb(i=on()){return/blackberry/i.test(i)}function wb(i=on()){return/webos/i.test(i)}function Cp(i=on()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function qC(i=on()){var e;return Cp(i)&&!!((e=window.navigator)!=null&&e.standalone)}function HC(){return tA()&&document.documentMode===10}function Sb(i=on()){return Cp(i)||Tb(i)||wb(i)||xb(i)||/windows phone/i.test(i)||bb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(i,e=[]){let n;switch(i){case"Browser":n=m_(on());break;case"Worker":n=`${m_(on())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Do}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,p)=>{try{const m=e(u);h(m)}catch(m){p(m)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(i,e={}){return As(i,"GET","/v2/passwordPolicy",Ss(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=6;class YC{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new p_(this),this.idTokenSubscription=new p_(this),this.beforeStateQueue=new FC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fi(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sh(this,{idToken:e}),s=await hr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if($n(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(u=this.redirectUser)==null?void 0:u._redirectEventId,p=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!h||h===p)&&(m!=null&&m.user)&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ah(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(pi(this));const n=e?Bt(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GC(this),n=new YC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await BC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fi(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,o);return()=>{h=!0,m()}}else{const m=e.addObserver(n);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ab(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&xC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _a(i){return Bt(i)}class p_{constructor(e){this.auth=e,this.observer=null,this.addObserver=uA(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KC(i){$h=i}function Cb(i){return $h.loadJS(i)}function XC(){return $h.recaptchaEnterpriseScript}function JC(){return $h.gapiScript}function WC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class ZC{constructor(){this.enterprise=new e2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class e2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const t2="recaptcha-enterprise",Rb="NO_RECAPTCHA";class n2{constructor(e){this.type=t2,this.auth=_a(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{OC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new kC(m);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(m=>{p(m)})})}function o(u,h,p){const m=window.grecaptcha;c_(m)?m.enterprise.ready(()=>{m.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(Rb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZC().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(p=>{if(!n&&c_(window.grecaptcha))o(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=XC();m.length!==0&&(m+=p),Cb(m).then(()=>{o(p,u,h)}).catch(g=>{h(g)})}}).catch(p=>{h(p)})})}}async function g_(i,e,n,s=!1,o=!1){const u=new n2(i);let h;if(o)h=Rb;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Qm(i,e,n,s,o){var u;if((u=i._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await g_(i,e,n,n==="getOobCode");return s(i,h)}else return s(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await g_(i,e,n,n==="getOobCode");return s(i,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(i,e){const n=xp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(da(u,e??{}))return o;dr(o,"already-initialized")}return n.initialize({options:e})}function i2(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(fi);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function s2(i,e,n){const s=_a(i);Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Nb(e),{host:h,port:p}=a2(e),m=p===null?"":`:${p}`,g={url:`${u}//${h}${m}/`},E=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ae(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ae(da(g,s.config.emulator)&&da(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Io(h)?(nb(`${u}//${h}${m}`),rb("Auth",!0)):o2()}function Nb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function a2(i){const e=Nb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:y_(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:y_(h)}}}function y_(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function o2(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,n){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function l2(i,e){return As(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(i,e){return gu(i,"POST","/v1/accounts:signInWithPassword",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(i,e){return gu(i,"POST","/v1/accounts:signInWithEmailLink",Ss(i,e))}async function h2(i,e){return gu(i,"POST","/v1/accounts:signInWithEmailLink",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Rp{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new nu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qm(e,n,"signInWithPassword",u2);case"emailLink":return c2(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qm(e,s,"signUpPassword",l2);case"emailLink":return h2(e,{idToken:n,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(i,e){return gu(i,"POST","/v1/accounts:signInWithIdp",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="http://localhost";class ma extends Rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new ma(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return vo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,vo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vo(e,n)}buildRequest(){const e={requestUri:d2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m2(i){const e=Bl(ql(i)).link,n=e?Bl(ql(e)).deep_link_id:null,s=Bl(ql(i)).deep_link_id;return(s?Bl(ql(s)).link:null)||s||n||e||i}class Np{constructor(e){const n=Bl(ql(e)),s=n.apiKey??null,o=n.oobCode??null,u=f2(n.mode??null);Ae(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=m2(e);try{return new Np(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Np.parseLink(n);return Ae(s,"argument-error"),nu._fromEmailAndCode(e,s.code,s.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends Ib{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends yu{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ma._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return us.credential(n,s)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends yu{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends yu{constructor(){super("twitter.com")}static credential(e,n){return ma._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return hs.credential(n,s)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(i,e){return gu(i,"POST","/v1/accounts:signUp",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await hr._fromIdTokenResponse(e,s,o),h=v_(s);return new pa({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=v_(s);return new pa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function v_(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends xi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Ch(e,n,s,o)}}function Db(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(i,u,e,s):u})}async function g2(i,e,n=!1){const s=await tu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return pa._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(i,e,n=!1){const{auth:s}=i;if($n(s.app))return Promise.reject(pi(s));const o="reauthenticate";try{const u=await tu(i,Db(s,o,e,i),n);Ae(u.idToken,s,"internal-error");const h=Ap(u.idToken);Ae(h,s,"internal-error");const{sub:p}=h;return Ae(i.uid===p,s,"user-mismatch"),pa._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&dr(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(i,e,n=!1){if($n(i.app))return Promise.reject(pi(i));const s="signIn",o=await Db(i,s,e),u=await pa._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function v2(i,e){return kb(_a(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(i){const e=_a(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _2(i,e,n){if($n(i.app))return Promise.reject(pi(i));const s=_a(i),h=await Qm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p2).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Ob(i),m}),p=await pa._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(p.user),p}function E2(i,e,n){return $n(i.app)?Promise.reject(pi(i)):v2(Bt(i),ko.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Ob(i),s})}function b2(i,e,n,s){return Bt(i).onIdTokenChanged(e,n,s)}function T2(i,e,n){return Bt(i).beforeAuthStateChanged(e,n)}function x2(i,e,n,s){return Bt(i).onAuthStateChanged(e,n,s)}function w2(i){return Bt(i).signOut()}const Rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rh,"1"),this.storage.removeItem(Rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=1e3,A2=10;class Vb extends Mb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);HC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,A2):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},S2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vb.type="LOCAL";const C2=Vb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Mb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jb.type="SESSION";const Pb=jb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Kh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(h).map(async g=>g(n.origin,u)),m=await R2(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((p,m)=>{const g=Ip("",20);o.port1.start();const E=setTimeout(()=>{m(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===g)switch(C.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(C.data.response);break;default:clearTimeout(E),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function I2(i){Lr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function D2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k2(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function O2(){return Lb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firebaseLocalStorageDb",M2=1,Nh="firebaseLocalStorage",zb="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xh(i,e){return i.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function V2(){const i=indexedDB.deleteDatabase(Ub);return new vu(i).toPromise()}function Ym(){const i=indexedDB.open(Ub,M2);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Nh,{keyPath:zb})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Nh)?e(s):(s.close(),await V2(),e(await Ym()))})})}async function __(i,e,n){const s=Xh(i,!0).put({[zb]:e,value:n});return new vu(s).toPromise()}async function j2(i,e){const n=Xh(i,!1).get(e),s=await new vu(n).toPromise();return s===void 0?null:s.value}function E_(i,e){const n=Xh(i,!0).delete(e);return new vu(n).toPromise()}const P2=800,L2=3;class Bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>L2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kh._getInstance(O2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await D2(),!this.activeServiceWorker)return;this.sender=new N2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await __(e,Rh,"1"),await E_(e,Rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>__(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>j2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>E_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Xh(o,!1).getAll();return new vu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bb.type="LOCAL";const U2=Bb;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(i,e){return e?fi(e):(Ae(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends Rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B2(i){return kb(i.auth,new Dp(i),i.bypassAuthState)}function q2(i){const{auth:e,user:n}=i;return Ae(n,e,"internal-error"),y2(n,new Dp(i),i.bypassAuthState)}async function H2(i){const{auth:e,user:n}=i;return Ae(n,e,"internal-error"),g2(n,new Dp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B2;case"linkViaPopup":case"linkViaRedirect":return H2;case"reauthViaPopup":case"reauthViaRedirect":return q2;default:dr(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new pu(2e3,1e4);class po extends qb{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=Ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,F2.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="pendingRedirect",fh=new Map;class Q2 extends qb{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const s=await Y2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y2(i,e){const n=X2(e),s=K2(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function $2(i,e){fh.set(i._key(),e)}function K2(i){return fi(i._redirectPersistence)}function X2(i){return dh(G2,i.config.apiKey,i.name)}async function J2(i,e,n=!1){if($n(i.app))return Promise.reject(pi(i));const s=_a(i),o=z2(s,e),h=await new Q2(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=600*1e3;class Z2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Hb(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Pr(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=W2&&this.cachedEventUids.clear(),this.cachedEventUids.has(b_(e))}saveEventToCache(e){this.cachedEventUids.add(b_(e)),this.lastProcessedEventTime=Date.now()}}function b_(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Hb({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(i,e={}){return As(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rR=/^https?/;async function iR(i){if(i.config.emulator)return;const{authorizedDomains:e}=await tR(i);for(const n of e)try{if(sR(n))return}catch{}dr(i,"unauthorized-domain")}function sR(i){const e=Fm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!rR.test(n))return!1;if(nR.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new pu(3e4,6e4);function T_(){const i=Lr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function oR(i){return new Promise((e,n)=>{var o,u,h;function s(){T_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T_(),n(Pr(i,"network-request-failed"))},timeout:aR.get()})}if((u=(o=Lr().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((h=Lr().gapi)!=null&&h.load)s();else{const p=WC("iframefcb");return Lr()[p]=()=>{gapi.load?s():n(Pr(i,"network-request-failed"))},Cb(`${JC()}?onload=${p}`).catch(m=>n(m))}}).catch(e=>{throw mh=null,e})}let mh=null;function lR(i){return mh=mh||oR(i),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new pu(5e3,15e3),cR="__/auth/iframe",hR="emulator/auth/iframe",dR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mR(i){const e=i.config;Ae(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Sp(e,hR):`https://${i.config.authDomain}/${cR}`,s={apiKey:e.apiKey,appName:i.name,v:Do},o=fR.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function pR(i){const e=await lR(i),n=Lr().gapi;return Ae(n,i,"internal-error"),e.open({where:document.body,url:mR(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dR,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Pr(i,"network-request-failed"),p=Lr().setTimeout(()=>{u(h)},uR.get());function m(){Lr().clearTimeout(p),o(s)}s.ping(m).then(m,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yR=500,vR=600,_R="_blank",ER="http://localhost";class x_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(i,e,n,s=yR,o=vR){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const m={...gR,width:s.toString(),height:o.toString(),top:u,left:h},g=on().toLowerCase();n&&(p=Eb(g)?_R:n),vb(g)&&(e=e||ER,m.scrollbars="yes");const E=Object.entries(m).reduce((C,[M,B])=>`${C}${M}=${B},`,"");if(qC(g)&&p!=="_self")return TR(e||"",p),new x_(null);const T=window.open(e||"",p,E);Ae(T,i,"popup-blocked");try{T.focus()}catch{}return new x_(T)}function TR(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="__/auth/handler",wR="emulator/auth/handler",SR=encodeURIComponent("fac");async function w_(i,e,n,s,o,u){Ae(i.config.authDomain,i,"auth-domain-config-required"),Ae(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Do,eventId:o};if(e instanceof Ib){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",lA(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof yu){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}i.tenantId&&(h.tid=i.tenantId);const p=h;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const m=await i._getAppCheckToken(),g=m?`#${SR}=${encodeURIComponent(m)}`:"";return`${AR(i)}?${mu(p).slice(1)}${g}`}function AR({config:i}){return i.emulator?Sp(i,wR):`https://${i.authDomain}/${xR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="webStorageSupport";class CR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pb,this._completeRedirectFn=J2,this._overrideRedirectResult=$2}async _openPopup(e,n,s,o){var h;_i((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const u=await w_(e,n,s,Fm(),o);return bR(e,u,Ip())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await w_(e,n,s,Fm(),o);return I2(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(_i(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await pR(e),s=new Z2(e);return n.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Im,{type:Im},o=>{var h;const u=(h=o==null?void 0:o[0])==null?void 0:h[Im];u!==void 0&&n(!!u),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Sb()||_b()||Cp()}}const RR=CR;var S_="@firebase/auth",A_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DR(i){Eo(new fa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=s.options;Ae(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:h,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ab(i)},g=new $C(s,o,u,m);return i2(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Eo(new fa("auth-internal",e=>{const n=_a(e.getProvider("auth").getImmediate());return(s=>new NR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ps(S_,A_,IR(i)),ps(S_,A_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=300,OR=tb("authIdTokenMaxAge")||kR;let C_=null;const MR=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>OR)return;const o=n==null?void 0:n.token;C_!==o&&(C_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function VR(i=ob()){const e=xp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=r2(i,{popupRedirectResolver:RR,persistence:[U2,C2,Pb]}),s=tb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=MR(u.toString());T2(n,h,()=>h(n.currentUser)),b2(n,p=>h(p))}}const o=ZE("auth");return o&&s2(n,`http://${o}`),n}function jR(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}KC({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Pr("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",jR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DR("Browser");var R_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gs,Fb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function x(){}x.prototype=A.prototype,R.F=A.prototype,R.prototype=new x,R.prototype.constructor=R,R.D=function(N,I,V){for(var D=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)D[Te-2]=arguments[Te];return A.prototype[I].apply(N,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,A,x){x||(x=0);const N=Array(16);if(typeof A=="string")for(var I=0;I<16;++I)N[I]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(I=0;I<16;++I)N[I]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=R.g[0],x=R.g[1],I=R.g[2];let V=R.g[3],D;D=A+(V^x&(I^V))+N[0]+3614090360&4294967295,A=x+(D<<7&4294967295|D>>>25),D=V+(I^A&(x^I))+N[1]+3905402710&4294967295,V=A+(D<<12&4294967295|D>>>20),D=I+(x^V&(A^x))+N[2]+606105819&4294967295,I=V+(D<<17&4294967295|D>>>15),D=x+(A^I&(V^A))+N[3]+3250441966&4294967295,x=I+(D<<22&4294967295|D>>>10),D=A+(V^x&(I^V))+N[4]+4118548399&4294967295,A=x+(D<<7&4294967295|D>>>25),D=V+(I^A&(x^I))+N[5]+1200080426&4294967295,V=A+(D<<12&4294967295|D>>>20),D=I+(x^V&(A^x))+N[6]+2821735955&4294967295,I=V+(D<<17&4294967295|D>>>15),D=x+(A^I&(V^A))+N[7]+4249261313&4294967295,x=I+(D<<22&4294967295|D>>>10),D=A+(V^x&(I^V))+N[8]+1770035416&4294967295,A=x+(D<<7&4294967295|D>>>25),D=V+(I^A&(x^I))+N[9]+2336552879&4294967295,V=A+(D<<12&4294967295|D>>>20),D=I+(x^V&(A^x))+N[10]+4294925233&4294967295,I=V+(D<<17&4294967295|D>>>15),D=x+(A^I&(V^A))+N[11]+2304563134&4294967295,x=I+(D<<22&4294967295|D>>>10),D=A+(V^x&(I^V))+N[12]+1804603682&4294967295,A=x+(D<<7&4294967295|D>>>25),D=V+(I^A&(x^I))+N[13]+4254626195&4294967295,V=A+(D<<12&4294967295|D>>>20),D=I+(x^V&(A^x))+N[14]+2792965006&4294967295,I=V+(D<<17&4294967295|D>>>15),D=x+(A^I&(V^A))+N[15]+1236535329&4294967295,x=I+(D<<22&4294967295|D>>>10),D=A+(I^V&(x^I))+N[1]+4129170786&4294967295,A=x+(D<<5&4294967295|D>>>27),D=V+(x^I&(A^x))+N[6]+3225465664&4294967295,V=A+(D<<9&4294967295|D>>>23),D=I+(A^x&(V^A))+N[11]+643717713&4294967295,I=V+(D<<14&4294967295|D>>>18),D=x+(V^A&(I^V))+N[0]+3921069994&4294967295,x=I+(D<<20&4294967295|D>>>12),D=A+(I^V&(x^I))+N[5]+3593408605&4294967295,A=x+(D<<5&4294967295|D>>>27),D=V+(x^I&(A^x))+N[10]+38016083&4294967295,V=A+(D<<9&4294967295|D>>>23),D=I+(A^x&(V^A))+N[15]+3634488961&4294967295,I=V+(D<<14&4294967295|D>>>18),D=x+(V^A&(I^V))+N[4]+3889429448&4294967295,x=I+(D<<20&4294967295|D>>>12),D=A+(I^V&(x^I))+N[9]+568446438&4294967295,A=x+(D<<5&4294967295|D>>>27),D=V+(x^I&(A^x))+N[14]+3275163606&4294967295,V=A+(D<<9&4294967295|D>>>23),D=I+(A^x&(V^A))+N[3]+4107603335&4294967295,I=V+(D<<14&4294967295|D>>>18),D=x+(V^A&(I^V))+N[8]+1163531501&4294967295,x=I+(D<<20&4294967295|D>>>12),D=A+(I^V&(x^I))+N[13]+2850285829&4294967295,A=x+(D<<5&4294967295|D>>>27),D=V+(x^I&(A^x))+N[2]+4243563512&4294967295,V=A+(D<<9&4294967295|D>>>23),D=I+(A^x&(V^A))+N[7]+1735328473&4294967295,I=V+(D<<14&4294967295|D>>>18),D=x+(V^A&(I^V))+N[12]+2368359562&4294967295,x=I+(D<<20&4294967295|D>>>12),D=A+(x^I^V)+N[5]+4294588738&4294967295,A=x+(D<<4&4294967295|D>>>28),D=V+(A^x^I)+N[8]+2272392833&4294967295,V=A+(D<<11&4294967295|D>>>21),D=I+(V^A^x)+N[11]+1839030562&4294967295,I=V+(D<<16&4294967295|D>>>16),D=x+(I^V^A)+N[14]+4259657740&4294967295,x=I+(D<<23&4294967295|D>>>9),D=A+(x^I^V)+N[1]+2763975236&4294967295,A=x+(D<<4&4294967295|D>>>28),D=V+(A^x^I)+N[4]+1272893353&4294967295,V=A+(D<<11&4294967295|D>>>21),D=I+(V^A^x)+N[7]+4139469664&4294967295,I=V+(D<<16&4294967295|D>>>16),D=x+(I^V^A)+N[10]+3200236656&4294967295,x=I+(D<<23&4294967295|D>>>9),D=A+(x^I^V)+N[13]+681279174&4294967295,A=x+(D<<4&4294967295|D>>>28),D=V+(A^x^I)+N[0]+3936430074&4294967295,V=A+(D<<11&4294967295|D>>>21),D=I+(V^A^x)+N[3]+3572445317&4294967295,I=V+(D<<16&4294967295|D>>>16),D=x+(I^V^A)+N[6]+76029189&4294967295,x=I+(D<<23&4294967295|D>>>9),D=A+(x^I^V)+N[9]+3654602809&4294967295,A=x+(D<<4&4294967295|D>>>28),D=V+(A^x^I)+N[12]+3873151461&4294967295,V=A+(D<<11&4294967295|D>>>21),D=I+(V^A^x)+N[15]+530742520&4294967295,I=V+(D<<16&4294967295|D>>>16),D=x+(I^V^A)+N[2]+3299628645&4294967295,x=I+(D<<23&4294967295|D>>>9),D=A+(I^(x|~V))+N[0]+4096336452&4294967295,A=x+(D<<6&4294967295|D>>>26),D=V+(x^(A|~I))+N[7]+1126891415&4294967295,V=A+(D<<10&4294967295|D>>>22),D=I+(A^(V|~x))+N[14]+2878612391&4294967295,I=V+(D<<15&4294967295|D>>>17),D=x+(V^(I|~A))+N[5]+4237533241&4294967295,x=I+(D<<21&4294967295|D>>>11),D=A+(I^(x|~V))+N[12]+1700485571&4294967295,A=x+(D<<6&4294967295|D>>>26),D=V+(x^(A|~I))+N[3]+2399980690&4294967295,V=A+(D<<10&4294967295|D>>>22),D=I+(A^(V|~x))+N[10]+4293915773&4294967295,I=V+(D<<15&4294967295|D>>>17),D=x+(V^(I|~A))+N[1]+2240044497&4294967295,x=I+(D<<21&4294967295|D>>>11),D=A+(I^(x|~V))+N[8]+1873313359&4294967295,A=x+(D<<6&4294967295|D>>>26),D=V+(x^(A|~I))+N[15]+4264355552&4294967295,V=A+(D<<10&4294967295|D>>>22),D=I+(A^(V|~x))+N[6]+2734768916&4294967295,I=V+(D<<15&4294967295|D>>>17),D=x+(V^(I|~A))+N[13]+1309151649&4294967295,x=I+(D<<21&4294967295|D>>>11),D=A+(I^(x|~V))+N[4]+4149444226&4294967295,A=x+(D<<6&4294967295|D>>>26),D=V+(x^(A|~I))+N[11]+3174756917&4294967295,V=A+(D<<10&4294967295|D>>>22),D=I+(A^(V|~x))+N[2]+718787259&4294967295,I=V+(D<<15&4294967295|D>>>17),D=x+(V^(I|~A))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(I+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+I&4294967295,R.g[3]=R.g[3]+V&4294967295}s.prototype.v=function(R,A){A===void 0&&(A=R.length);const x=A-this.blockSize,N=this.C;let I=this.h,V=0;for(;V<A;){if(I==0)for(;V<=x;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<A;)if(N[I++]=R.charCodeAt(V++),I==this.blockSize){o(this,N),I=0;break}}else for(;V<A;)if(N[I++]=R[V++],I==this.blockSize){o(this,N),I=0;break}}this.h=I,this.o+=A},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var x=R.length-8;x<R.length;++x)R[x]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,x=0;x<4;++x)for(let N=0;N<32;N+=8)R[A++]=this.g[x]>>>N&255;return R};function u(R,A){var x=p;return Object.prototype.hasOwnProperty.call(x,R)?x[R]:x[R]=A(R)}function h(R,A){this.h=A;const x=[];let N=!0;for(let I=R.length-1;I>=0;I--){const V=R[I]|0;N&&V==A||(x[I]=V,N=!1)}this.g=x}var p={};function m(R){return-128<=R&&R<128?u(R,function(A){return new h([A|0],A<0?-1:0)}):new h([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return U(g(-R));const A=[];let x=1;for(let N=0;R>=x;N++)A[N]=R/x|0,x*=4294967296;return new h(A,0)}function E(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return U(E(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=g(Math.pow(A,8));let N=T;for(let V=0;V<R.length;V+=8){var I=Math.min(8,R.length-V);const D=parseInt(R.substring(V,V+I),A);I<8?(I=g(Math.pow(A,I)),N=N.j(I).add(g(D))):(N=N.j(x),N=N.add(g(D)))}return N}var T=m(0),C=m(1),M=m(16777216);i=h.prototype,i.m=function(){if(X(this))return-U(this).m();let R=0,A=1;for(let x=0;x<this.g.length;x++){const N=this.i(x);R+=(N>=0?N:4294967296+N)*A,A*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(B(this))return"0";if(X(this))return"-"+U(this).toString(R);const A=g(Math.pow(R,6));var x=this;let N="";for(;;){const I=$(x,A).g;x=Y(x,I.j(A));let V=((x.g.length>0?x.g[0]:x.h)>>>0).toString(R);if(x=I,B(x))return V+N;for(;V.length<6;)V="0"+V;N=V+N}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function B(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function X(R){return R.h==-1}i.l=function(R){return R=Y(this,R),X(R)?-1:B(R)?0:1};function U(R){const A=R.g.length,x=[];for(let N=0;N<A;N++)x[N]=~R.g[N];return new h(x,~R.h).add(C)}i.abs=function(){return X(this)?U(this):this},i.add=function(R){const A=Math.max(this.g.length,R.g.length),x=[];let N=0;for(let I=0;I<=A;I++){let V=N+(this.i(I)&65535)+(R.i(I)&65535),D=(V>>>16)+(this.i(I)>>>16)+(R.i(I)>>>16);N=D>>>16,V&=65535,D&=65535,x[I]=D<<16|V}return new h(x,x[x.length-1]&-2147483648?-1:0)};function Y(R,A){return R.add(U(A))}i.j=function(R){if(B(this)||B(R))return T;if(X(this))return X(R)?U(this).j(U(R)):U(U(this).j(R));if(X(R))return U(this.j(U(R)));if(this.l(M)<0&&R.l(M)<0)return g(this.m()*R.m());const A=this.g.length+R.g.length,x=[];for(var N=0;N<2*A;N++)x[N]=0;for(N=0;N<this.g.length;N++)for(let I=0;I<R.g.length;I++){const V=this.i(N)>>>16,D=this.i(N)&65535,Te=R.i(I)>>>16,pe=R.i(I)&65535;x[2*N+2*I]+=D*pe,W(x,2*N+2*I),x[2*N+2*I+1]+=V*pe,W(x,2*N+2*I+1),x[2*N+2*I+1]+=D*Te,W(x,2*N+2*I+1),x[2*N+2*I+2]+=V*Te,W(x,2*N+2*I+2)}for(R=0;R<A;R++)x[R]=x[2*R+1]<<16|x[2*R];for(R=A;R<2*A;R++)x[R]=0;return new h(x,0)};function W(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function j(R,A){this.g=R,this.h=A}function $(R,A){if(B(A))throw Error("division by zero");if(B(R))return new j(T,T);if(X(R))return A=$(U(R),A),new j(U(A.g),U(A.h));if(X(A))return A=$(R,U(A)),new j(U(A.g),A.h);if(R.g.length>30){if(X(R)||X(A))throw Error("slowDivide_ only works with positive integers.");for(var x=C,N=A;N.l(R)<=0;)x=le(x),N=le(N);var I=oe(x,1),V=oe(N,1);for(N=oe(N,2),x=oe(x,2);!B(N);){var D=V.add(N);D.l(R)<=0&&(I=I.add(x),V=D),N=oe(N,1),x=oe(x,1)}return A=Y(R,I.j(A)),new j(I,A)}for(I=T;R.l(A)>=0;){for(x=Math.max(1,Math.floor(R.m()/A.m())),N=Math.ceil(Math.log(x)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),V=g(x),D=V.j(A);X(D)||D.l(R)>0;)x-=N,V=g(x),D=V.j(A);B(V)&&(V=C),I=I.add(V),R=Y(R,D)}return new j(I,R)}i.B=function(R){return $(this,R).h},i.and=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let N=0;N<A;N++)x[N]=this.i(N)&R.i(N);return new h(x,this.h&R.h)},i.or=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let N=0;N<A;N++)x[N]=this.i(N)|R.i(N);return new h(x,this.h|R.h)},i.xor=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let N=0;N<A;N++)x[N]=this.i(N)^R.i(N);return new h(x,this.h^R.h)};function le(R){const A=R.g.length+1,x=[];for(let N=0;N<A;N++)x[N]=R.i(N)<<1|R.i(N-1)>>>31;return new h(x,R.h)}function oe(R,A){const x=A>>5;A%=32;const N=R.g.length-x,I=[];for(let V=0;V<N;V++)I[V]=A>0?R.i(V+x)>>>A|R.i(V+x+1)<<32-A:R.i(V+x);return new h(I,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Fb=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=E,gs=h}).apply(typeof R_<"u"?R_:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gb,Hl,Qb,ph,$m,Yb,$b,Kb;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var v=0;v<c.length;++v){var b=c[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=n(this);function o(c,v){if(v)e:{var b=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var H=c[S];if(!(H in b))break e;b=b[H]}c=c[c.length-1],S=b[c],v=v(S),v!=S&&v!=null&&e(b,c,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(v){var b=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&b.push([S,v[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function p(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function m(c,v,b){return c.call.apply(c.bind,arguments)}function g(c,v,b){return g=m,g.apply(null,arguments)}function E(c,v){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function T(c,v){function b(){}b.prototype=v.prototype,c.Z=v.prototype,c.prototype=new b,c.prototype.constructor=c,c.Ob=function(S,H,J){for(var he=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)he[ke-2]=arguments[ke];return v.prototype[H].apply(S,he)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function M(c){const v=c.length;if(v>0){const b=Array(v);for(let S=0;S<v;S++)b[S]=c[S];return b}return[]}function B(c,v){for(let S=1;S<arguments.length;S++){const H=arguments[S];var b=typeof H;if(b=b!="object"?b:H?Array.isArray(H)?"array":b:"null",b=="array"||b=="object"&&typeof H.length=="number"){b=c.length||0;const J=H.length||0;c.length=b+J;for(let he=0;he<J;he++)c[b+he]=H[he]}else c.push(H)}}class X{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(c){h.setTimeout(()=>{throw c},0)}function Y(){var c=R;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class W{constructor(){this.h=this.g=null}add(v,b){const S=j.get();S.set(v,b),this.h?this.h.next=S:this.g=S,this.h=S}}var j=new X(()=>new $,c=>c.reset());class ${constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let le,oe=!1,R=new W,A=()=>{const c=Promise.resolve(void 0);le=()=>{c.then(x)}};function x(){for(var c;c=Y();){try{c.h.call(c.g)}catch(b){U(b)}var v=j;v.j(c),v.h<100&&(v.h++,c.next=v.g,v.g=c)}oe=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const b=()=>{};h.addEventListener("test",b,v),h.removeEventListener("test",b,v)}catch{}return c})();function D(c){return/^[\s\xa0]*$/.test(c)}function Te(c,v){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,v)}T(Te,I),Te.prototype.init=function(c,v){const b=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget,v||(b=="mouseover"?v=c.fromElement:b=="mouseout"&&(v=c.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var pe="closure_listenable_"+(Math.random()*1e6|0),z=0;function re(c,v,b,S,H){this.listener=c,this.proxy=null,this.src=v,this.type=b,this.capture=!!S,this.ha=H,this.key=++z,this.da=this.fa=!1}function ce(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function de(c,v,b){for(const S in c)v.call(b,c[S],S,c)}function ve(c,v){for(const b in c)v.call(void 0,c[b],b,c)}function O(c){const v={};for(const b in c)v[b]=c[b];return v}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(c,v){let b,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(b in S)c[b]=S[b];for(let J=0;J<Q.length;J++)b=Q[J],Object.prototype.hasOwnProperty.call(S,b)&&(c[b]=S[b])}}function ee(c){this.src=c,this.g={},this.h=0}ee.prototype.add=function(c,v,b,S,H){const J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);const he=xe(c,v,S,H);return he>-1?(v=c[he],b||(v.fa=!1)):(v=new re(v,this.src,J,!!S,H),v.fa=b,c.push(v)),v};function ge(c,v){const b=v.type;if(b in c.g){var S=c.g[b],H=Array.prototype.indexOf.call(S,v,void 0),J;(J=H>=0)&&Array.prototype.splice.call(S,H,1),J&&(ce(v),c.g[b].length==0&&(delete c.g[b],c.h--))}}function xe(c,v,b,S){for(let H=0;H<c.length;++H){const J=c[H];if(!J.da&&J.listener==v&&J.capture==!!b&&J.ha==S)return H}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),ft={};function Ke(c,v,b,S,H){if(Array.isArray(v)){for(let J=0;J<v.length;J++)Ke(c,v[J],b,S,H);return null}return b=Wn(b),c&&c[pe]?c.J(v,b,p(S)?!!S.capture:!1,H):bn(c,v,b,!1,S,H)}function bn(c,v,b,S,H,J){if(!v)throw Error("Invalid event type");const he=p(H)?!!H.capture:!!H;let ke=Qr(c);if(ke||(c[Re]=ke=new ee(c)),b=ke.add(v,b,S,he,J),b.proxy)return b;if(S=Si(),b.proxy=S,S.src=c,S.listener=b,c.addEventListener)V||(H=he),H===void 0&&(H=!1),c.addEventListener(v.toString(),S,H);else if(c.attachEvent)c.attachEvent(On(v.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Si(){function c(b){return v.call(c.src,c.listener,b)}const v=Is;return c}function Ai(c,v,b,S,H){if(Array.isArray(v))for(var J=0;J<v.length;J++)Ai(c,v[J],b,S,H);else S=p(S)?!!S.capture:!!S,b=Wn(b),c&&c[pe]?(c=c.i,J=String(v).toString(),J in c.g&&(v=c.g[J],b=xe(v,b,S,H),b>-1&&(ce(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete c.g[J],c.h--)))):c&&(c=Qr(c))&&(v=c.g[v.toString()],c=-1,v&&(c=xe(v,b,S,H)),(b=c>-1?v[c]:null)&&Ci(b))}function Ci(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[pe])ge(v.i,c);else{var b=c.type,S=c.proxy;v.removeEventListener?v.removeEventListener(b,S,c.capture):v.detachEvent?v.detachEvent(On(b),S):v.addListener&&v.removeListener&&v.removeListener(S),(b=Qr(v))?(ge(b,c),b.h==0&&(b.src=null,v[Re]=null)):ce(c)}}}function On(c){return c in ft?ft[c]:ft[c]="on"+c}function Is(c,v){if(c.da)c=!0;else{v=new Te(v,this);const b=c.listener,S=c.ha||c.src;c.fa&&Ci(c),c=b.call(S,v)}return c}function Qr(c){return c=c[Re],c instanceof ee?c:null}var At="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wn(c){return typeof c=="function"?c:(c[At]||(c[At]=function(v){return c.handleEvent(v)}),c[At])}function ot(){N.call(this),this.i=new ee(this),this.M=this,this.G=null}T(ot,N),ot.prototype[pe]=!0,ot.prototype.removeEventListener=function(c,v,b,S){Ai(this,c,v,b,S)};function _t(c,v){var b,S=c.G;if(S)for(b=[];S;S=S.G)b.push(S);if(c=c.M,S=v.type||v,typeof v=="string")v=new I(v,c);else if(v instanceof I)v.target=v.target||c;else{var H=v;v=new I(S,c),ue(v,H)}H=!0;let J,he;if(b)for(he=b.length-1;he>=0;he--)J=v.g=b[he],H=Ri(J,S,!0,v)&&H;if(J=v.g=c,H=Ri(J,S,!0,v)&&H,H=Ri(J,S,!1,v)&&H,b)for(he=0;he<b.length;he++)J=v.g=b[he],H=Ri(J,S,!1,v)&&H}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var c=this.i;for(const v in c.g){const b=c.g[v];for(let S=0;S<b.length;S++)ce(b[S]);delete c.g[v],c.h--}}this.G=null},ot.prototype.J=function(c,v,b,S){return this.i.add(String(c),v,!1,b,S)},ot.prototype.K=function(c,v,b,S){return this.i.add(String(c),v,!0,b,S)};function Ri(c,v,b,S){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();let H=!0;for(let J=0;J<v.length;++J){const he=v[J];if(he&&!he.da&&he.capture==b){const ke=he.listener,bt=he.ha||he.src;he.fa&&ge(c.i,he),H=ke.call(bt,S)!==!1&&H}}return H&&!S.defaultPrevented}function yd(c,v){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(c,v||0)}function Cu(c){c.g=yd(()=>{c.g=null,c.i&&(c.i=!1,Cu(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class ln extends N{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Cu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ds(c){N.call(this),this.h=c,this.g={}}T(Ds,N);var Po=[];function Lo(c){de(c.g,function(v,b){this.g.hasOwnProperty(b)&&Ci(v)},c),c.g={}}Ds.prototype.N=function(){Ds.Z.N.call(this),Lo(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ni=h.JSON.stringify,vd=h.JSON.parse,Ru=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Nu(){}function Iu(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){I.call(this,"d")}T(Yt,I);function Mn(){I.call(this,"c")}T(Mn,I);var Et={},Du=null;function xa(){return Du=Du||new ot}Et.Ia="serverreachability";function ku(c){I.call(this,Et.Ia,c)}T(ku,I);function pr(c){const v=xa();_t(v,new ku(v))}Et.STAT_EVENT="statevent";function ks(c,v){I.call(this,Et.STAT_EVENT,c),this.stat=v}T(ks,I);function Ct(c){const v=xa();_t(v,new ks(v,c))}Et.Ja="timingevent";function gr(c,v){I.call(this,Et.Ja,c),this.size=v}T(gr,I);function yr(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},v)}function er(){this.g=!0}er.prototype.ua=function(){this.g=!1};function _d(c,v,b,S,H,J){c.info(function(){if(c.g)if(J){var he="",ke=J.split("&");for(let Qe=0;Qe<ke.length;Qe++){var bt=ke[Qe].split("=");if(bt.length>1){const ct=bt[0];bt=bt[1];const Ln=ct.split("_");he=Ln.length>=2&&Ln[1]=="type"?he+(ct+"="+bt+"&"):he+(ct+"=redacted&")}}}else he=null;else he=J;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+v+`
`+b+`
`+he})}function Ou(c,v,b,S,H,J,he){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+v+`
`+b+`
`+J+" "+he})}function vr(c,v,b,S){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ed(c,b)+(S?" "+S:"")})}function Os(c,v){c.info(function(){return"TIMEOUT: "+v})}er.prototype.info=function(){};function Ed(c,v){if(!c.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(c=0;c<J.length;c++)if(Array.isArray(J[c])){var b=J[c];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var H=S[0];if(H!="noop"&&H!="stop"&&H!="close")for(let he=1;he<S.length;he++)S[he]=""}}}}return Ni(J)}catch{return v}}var Ms={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Uo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zo;function Vs(){}T(Vs,Nu),Vs.prototype.g=function(){return new XMLHttpRequest},zo=new Vs;function Yr(c){return encodeURIComponent(String(c))}function Mu(c){var v=1;c=c.split(":");const b=[];for(;v>0&&c.length;)b.push(c.shift()),v--;return c.length&&b.push(c.join(":")),b}function tr(c,v,b,S){this.j=c,this.i=v,this.l=b,this.S=S||1,this.V=new Ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new nr}function nr(){this.i=null,this.g="",this.h=!1}var Rt={},qt={};function _r(c,v,b){c.M=1,c.A=js(It(v)),c.u=b,c.R=!0,wa(c,null)}function wa(c,v){c.F=Date.now(),Er(c),c.B=It(c.A);var b=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),Ra(b.i,"t",S),c.C=0,b=c.j.L,c.h=new nr,c.g=Ku(c.j,b?v:null,!c.u),c.P>0&&(c.O=new ln(g(c.Y,c,c.g),c.P)),v=c.V,b=c.g,S=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(Po[0]=H.toString()),H=Po);for(let J=0;J<H.length;J++){const he=Ke(b,H[J],S||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,v)):(c.v="GET",c.g.ea(c.B,c.v,null,v)),pr(),_d(c.i,c.v,c.B,c.l,c.S,c.u)}tr.prototype.ba=function(c){c=c.target;const v=this.O;v&&sr(c)==3?v.j():this.Y(c)},tr.prototype.Y=function(c){try{if(c==this.g)e:{const ke=sr(this.g),bt=this.g.ya(),Qe=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||$t(this.g)))){this.K||ke!=4||bt==7||(bt==8||Qe<=0?pr(3):pr(2)),br(this);var v=this.g.ca();this.X=v;var b=bd(this);if(this.o=v==200,Ou(this.i,this.v,this.B,this.l,this.S,ke,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,H=this.g;if((S=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(S)){var J=S;break t}}J=null}if(c=J)vr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tr(this,c);else{this.o=!1,this.m=3,Ct(12),Tn(this),Vn(this);break e}}if(this.R){c=!0;let ct;for(;!this.K&&this.C<b.length;)if(ct=ju(this,b),ct==qt){ke==4&&(this.m=4,Ct(14),c=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Rt){this.m=4,Ct(15),vr(this.i,this.l,b,"[Invalid Chunk]"),c=!1;break}else vr(this.i,this.l,ct,null),Tr(this,ct);if(Vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||b.length!=0||this.h.h||(this.m=1,Ct(16),c=!1),this.o=this.o&&c,!c)vr(this.i,this.l,b,"[Invalid Chunked Response]"),Tn(this),Vn(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),tl(he),he.P=!0,Ct(11))}}else vr(this.i,this.l,b,null),Tr(this,b);ke==4&&Tn(this),this.o&&!this.K&&(ke==4?Gu(this.j,this):(this.o=!1,Er(this)))}else Kr(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),Tn(this),Vn(this)}}}catch{}finally{}};function bd(c){if(!Vu(c))return c.g.la();const v=$t(c.g);if(v==="")return"";let b="";const S=v.length,H=sr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Tn(c),Vn(c),"";c.h.i=new h.TextDecoder}for(let J=0;J<S;J++)c.h.h=!0,b+=c.h.i.decode(v[J],{stream:!(H&&J==S-1)});return v.length=0,c.h.g+=b,c.C=0,c.h.g}function Vu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ju(c,v){var b=c.C,S=v.indexOf(`
`,b);return S==-1?qt:(b=Number(v.substring(b,S)),isNaN(b)?Rt:(S+=1,S+b>v.length?qt:(v=v.slice(S,S+b),c.C=S+b,v)))}tr.prototype.cancel=function(){this.K=!0,Tn(this)};function Er(c){c.T=Date.now()+c.H,Sa(c,c.H)}function Sa(c,v){if(c.D!=null)throw Error("WatchDog timer not null");c.D=yr(g(c.aa,c),v)}function br(c){c.D&&(h.clearTimeout(c.D),c.D=null)}tr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Os(this.i,this.B),this.M!=2&&(pr(),Ct(17)),Tn(this),this.m=2,Vn(this)):Sa(this,this.T-c)};function Vn(c){c.j.I==0||c.K||Gu(c.j,c)}function Tn(c){br(c);var v=c.O;v&&typeof v.dispose=="function"&&v.dispose(),c.O=null,Lo(c.V),c.g&&(v=c.g,c.g=null,v.abort(),v.dispose())}function Tr(c,v){try{var b=c.j;if(b.I!=0&&(b.g==c||wr(b.h,c))){if(!c.L&&wr(b.h,c)&&b.I==3){try{var S=b.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<c.F)Oa(b),Pi(b);else break e;Hs(b),Ct(18)}}else b.xa=H[1],0<b.xa-b.K&&H[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=yr(g(b.Va,b),6e3));xr(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ir(b,11)}else if((c.L||b.g==c)&&Oa(b),!D(v))for(H=b.Ba.g.parse(v),v=0;v<H.length;v++){let Qe=H[v];const ct=Qe[0];if(!(ct<=b.K))if(b.K=ct,Qe=Qe[1],b.I==2)if(Qe[0]=="c"){b.M=Qe[1],b.ba=Qe[2];const Ln=Qe[3];Ln!=null&&(b.ka=Ln,b.j.info("VER="+b.ka));const Dr=Qe[4];Dr!=null&&(b.za=Dr,b.j.info("SVER="+b.za));const ar=Qe[5];ar!=null&&typeof ar=="number"&&ar>0&&(S=1.5*ar,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const or=c.g;if(or){const Fs=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var J=S.h;J.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ho(J,J.h),J.h=null))}if(S.G){const Ma=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;Ma&&(S.wa=Ma,Xe(S.J,S.G,Ma))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-c.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var he=c;if(S.na=$u(S,S.L?S.ba:null,S.W),he.L){Fo(S.h,he);var ke=he,bt=S.O;bt&&(ke.H=bt),ke.D&&(br(ke),Er(ke)),S.g=he}else Hu(S);b.i.length>0&&Nr(b)}else Qe[0]!="stop"&&Qe[0]!="close"||Ir(b,7);else b.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ir(b,7):Zo(b):Qe[0]!="noop"&&b.l&&b.l.qa(Qe),b.A=0)}}pr(4)}catch{}}var Nt=class{constructor(c,v){this.g=c,this.map=v}};function Bo(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xr(c){return c.h?1:c.g?c.g.size:0}function wr(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Ho(c,v){c.g?c.g.add(v):c.h=v}function Fo(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Bo.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Go(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const b of c.g.values())v=v.concat(b.G);return v}return M(c.i)}var Pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Aa(c,v){if(c){c=c.split("&");for(let b=0;b<c.length;b++){const S=c[b].indexOf("=");let H,J=null;S>=0?(H=c[b].substring(0,S),J=c[b].substring(S+1)):H=c[b],v(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function xn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;c instanceof xn?(this.l=c.l,Ht(this,c.j),this.o=c.o,this.g=c.g,Ii(this,c.u),this.h=c.h,Qo(this,Bu(c.i)),this.m=c.m):c&&(v=String(c).match(Pu))?(this.l=!1,Ht(this,v[1]||"",!0),this.o=Sr(v[2]||""),this.g=Sr(v[3]||"",!0),Ii(this,v[4]),this.h=Sr(v[5]||"",!0),Qo(this,v[6]||"",!0),this.m=Sr(v[7]||"")):(this.l=!1,this.i=new ki(null,this.l))}xn.prototype.toString=function(){const c=[];var v=this.j;v&&c.push(Ps(v,Ca,!0),":");var b=this.g;return(b||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Ps(v,Ca,!0),"@"),c.push(Yr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&c.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&c.push("/"),c.push(Ps(b,b.charAt(0)=="/"?Yo:Lu,!0))),(b=this.i.toString())&&c.push("?",b),(b=this.m)&&c.push("#",Ps(b,Uu)),c.join("")},xn.prototype.resolve=function(c){const v=It(this);let b=!!c.j;b?Ht(v,c.j):b=!!c.o,b?v.o=c.o:b=!!c.g,b?v.g=c.g:b=c.u!=null;var S=c.h;if(b)Ii(v,c.u);else if(b=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var H=v.h.lastIndexOf("/");H!=-1&&(S=v.h.slice(0,H+1)+S)}if(H=S,H==".."||H==".")S="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){S=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let he=0;he<H.length;){const ke=H[he++];ke=="."?S&&he==H.length&&J.push(""):ke==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),S&&he==H.length&&J.push("")):(J.push(ke),S=!0)}S=J.join("/")}else S=H}return b?v.h=S:b=c.i.toString()!=="",b?Qo(v,Bu(c.i)):b=!!c.m,b&&(v.m=c.m),v};function It(c){return new xn(c)}function Ht(c,v,b){c.j=b?Sr(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function Ii(c,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);c.u=v}else c.u=null}function Qo(c,v,b){v instanceof ki?(c.i=v,Na(c.i,c.l)):(b||(v=Ps(v,Di)),c.i=new ki(v,c.l))}function Xe(c,v,b){c.i.set(v,b)}function js(c){return Xe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Sr(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ps(c,v,b){return typeof c=="string"?(c=encodeURI(c).replace(v,hn),b&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function hn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ca=/[#\/\?@]/g,Lu=/[#\?:]/g,Yo=/[#\?]/g,Di=/[#\?@]/g,Uu=/#/g;function ki(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function dn(c){c.g||(c.g=new Map,c.h=0,c.i&&Aa(c.i,function(v,b){c.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}i=ki.prototype,i.add=function(c,v){dn(this),this.i=null,c=Oi(this,c);let b=this.g.get(c);return b||this.g.set(c,b=[]),b.push(v),this.h+=1,this};function zu(c,v){dn(c),v=Oi(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function $o(c,v){return dn(c),v=Oi(c,v),c.g.has(v)}i.forEach=function(c,v){dn(this),this.g.forEach(function(b,S){b.forEach(function(H){c.call(v,H,S,this)},this)},this)};function Ko(c,v){dn(c);let b=[];if(typeof v=="string")$o(c,v)&&(b=b.concat(c.g.get(Oi(c,v))));else for(c=Array.from(c.g.values()),v=0;v<c.length;v++)b=b.concat(c[v]);return b}i.set=function(c,v){return dn(this),this.i=null,c=Oi(this,c),$o(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=Ko(this,c),c.length>0?String(c[0]):v):v};function Ra(c,v,b){zu(c,v),b.length>0&&(c.i=null,c.g.set(Oi(c,v),M(b)),c.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var b=v[S];const H=Yr(b);b=Ko(this,b);for(let J=0;J<b.length;J++){let he=H;b[J]!==""&&(he+="="+Yr(b[J])),c.push(he)}}return this.i=c.join("&")};function Bu(c){const v=new ki;return v.i=c.i,c.g&&(v.g=new Map(c.g),v.h=c.h),v}function Oi(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function Na(c,v){v&&!c.j&&(dn(c),c.i=null,c.g.forEach(function(b,S){const H=S.toLowerCase();S!=H&&(zu(this,S),Ra(this,H,b))},c)),c.j=v}function rr(c,v){const b=new er;if(h.Image){const S=new Image;S.onload=E(jn,b,"TestLoadImage: loaded",!0,v,S),S.onerror=E(jn,b,"TestLoadImage: error",!1,v,S),S.onabort=E(jn,b,"TestLoadImage: abort",!1,v,S),S.ontimeout=E(jn,b,"TestLoadImage: timeout",!1,v,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else v(!1)}function Xo(c,v){const b=new er,S=new AbortController,H=setTimeout(()=>{S.abort(),jn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:S.signal}).then(J=>{clearTimeout(H),J.ok?jn(b,"TestPingServer: ok",!0,v):jn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),jn(b,"TestPingServer: error",!1,v)})}function jn(c,v,b,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(b)}catch{}}function Mi(){this.g=new Ru}function Ar(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Ar,Nu),Ar.prototype.g=function(){return new Ls(this.i,this.h)};function Ls(c,v){ot.call(this),this.H=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ls,ot),i=Ls.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=v,this.readyState=1,ir(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(v.body=c),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ia(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ia(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Vi(this):ir(this),this.readyState==3&&Ia(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Vi(this))},i.Na=function(c){this.g&&(this.response=c,Vi(this))},i.ga=function(){this.g&&Vi(this)};function Vi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ir(c)}i.setRequestHeader=function(c,v){this.A.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,c.push(b[0]+": "+b[1]),b=v.next();return c.join(`\r
`)};function ir(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Pn(c){let v="";return de(c,function(b,S){v+=S,v+=":",v+=b,v+=`\r
`}),v}function Us(c,v,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Pn(b),typeof c=="string"?b!=null&&Yr(b):Xe(c,v,b))}function Ze(c){ot.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Ze,ot);var Cr=/^https?$/i,Jo=["POST","PUT"];i=Ze.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,v,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zo.g(),this.g.onreadystatechange=C(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(J){zs(this,J);return}if(c=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)b.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())b.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),H=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(Jo,v,void 0)>=0)||S||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,he]of b)this.g.setRequestHeader(J,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(J){zs(this,J)}};function zs(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.o=5,Wo(c),$r(c)}function Wo(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,_t(this,"complete"),_t(this,"abort"),$r(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$r(this,!0)),Ze.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Bs(this):this.Xa())},i.Xa=function(){Bs(this)};function Bs(c){if(c.h&&typeof u<"u"){if(c.v&&sr(c)==4)setTimeout(c.Ca.bind(c),0);else if(_t(c,"readystatechange"),sr(c)==4){c.h=!1;try{const J=c.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var S;if(S=J===0){let he=String(c.D).match(Pu)[1]||null;!he&&h.self&&h.self.location&&(he=h.self.location.protocol.slice(0,-1)),S=!Cr.test(he?he.toLowerCase():"")}b=S}if(b)_t(c,"complete"),_t(c,"success");else{c.o=6;try{var H=sr(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",Wo(c)}}finally{$r(c)}}}}function $r(c,v){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const b=c.g;c.g=null,v||_t(c,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function sr(c){return c.g?c.g.readyState:0}i.ca=function(){try{return sr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),vd(v)}};function $t(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Kr(c){const v={};c=(c.g&&sr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(D(c[S]))continue;var b=Mu(c[S]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=v[H]||[];v[H]=J,J.push(b)}ve(v,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(c,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[c]||v}function ji(c){this.za=0,this.i=[],this.j=new er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rr("baseRetryDelayMs",5e3,c),this.Za=Rr("retryDelaySeedMs",1e4,c),this.Ta=Rr("forwardChannelMaxRetries",2,c),this.va=Rr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Bo(c&&c.concurrentRequestLimit),this.Ba=new Mi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ji.prototype,i.ka=8,i.I=1,i.connect=function(c,v,b,S){Ct(0),this.W=c,this.H=v||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=$u(this,null,this.W),Nr(this)};function Zo(c){if(Da(c),c.I==3){var v=c.V++,b=It(c.J);if(Xe(b,"SID",c.M),Xe(b,"RID",v),Xe(b,"TYPE","terminate"),qs(c,b),v=new tr(c,c.j,v),v.M=2,v.A=js(It(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&h.Image&&(new Image().src=v.A,b=!0),b||(v.g=Ku(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Er(v)}Yu(c)}function Pi(c){c.g&&(tl(c),c.g.cancel(),c.g=null)}function Da(c){Pi(c),c.v&&(h.clearTimeout(c.v),c.v=null),Oa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function Nr(c){if(!qo(c.h)&&!c.m){c.m=!0;var v=c.Ea;le||A(),oe||(le(),oe=!0),R.add(v,c),c.D=0}}function ka(c,v){return xr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=v.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=yr(g(c.Ea,c,v),Qu(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new tr(this,this.j,c);let J=this.o;if(this.U&&(J?(J=O(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=qu(this,H,v),b=It(this.J),Xe(b,"RID",c),Xe(b,"CVER",22),this.G&&Xe(b,"X-HTTP-Session-Id",this.G),qs(this,b),J&&(this.R?v="headers="+Yr(Pn(J))+"&"+v:this.u&&Us(b,this.u,J)),Ho(this.h,H),this.Ra&&Xe(b,"TYPE","init"),this.S?(Xe(b,"$req",v),Xe(b,"SID","null"),H.U=!0,_r(H,b,null)):_r(H,b,v),this.I=2}}else this.I==3&&(c?el(this,c):this.i.length==0||qo(this.h)||el(this))};function el(c,v){var b;v?b=v.l:b=c.V++;const S=It(c.J);Xe(S,"SID",c.M),Xe(S,"RID",b),Xe(S,"AID",c.K),qs(c,S),c.u&&c.o&&Us(S,c.u,c.o),b=new tr(c,c.j,b,c.D+1),c.u===null&&(b.J=c.o),v&&(c.i=v.G.concat(c.i)),v=qu(c,b,1e3),b.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ho(c.h,b),_r(b,S,v)}function qs(c,v){c.H&&de(c.H,function(b,S){Xe(v,S,b)}),c.l&&de({},function(b,S){Xe(v,S,b)})}function qu(c,v,b){b=Math.min(c.i.length,b);const S=c.l?g(c.l.Ka,c.l,c):null;e:{var H=c.i;let ke=-1;for(;;){const bt=["count="+b];ke==-1?b>0?(ke=H[0].g,bt.push("ofs="+ke)):ke=0:bt.push("ofs="+ke);let Qe=!0;for(let ct=0;ct<b;ct++){var J=H[ct].g;const Ln=H[ct].map;if(J-=ke,J<0)ke=Math.max(0,H[ct].g-100),Qe=!1;else try{J="req"+J+"_"||"";try{var he=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Dr,ar]of he){let or=ar;p(ar)&&(or=Ni(ar)),bt.push(J+Dr+"="+encodeURIComponent(or))}}catch(Dr){throw bt.push(J+"type="+encodeURIComponent("_badmap")),Dr}}catch{S&&S(Ln)}}if(Qe){he=bt.join("&");break e}}he=void 0}return c=c.i.splice(0,b),v.G=c,he}function Hu(c){if(!c.g&&!c.v){c.Y=1;var v=c.Da;le||A(),oe||(le(),oe=!0),R.add(v,c),c.A=0}}function Hs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=yr(g(c.Da,c),Qu(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Fu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=yr(g(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Pi(this),Fu(this))};function tl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function Fu(c){c.g=new tr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var v=It(c.na);Xe(v,"RID","rpc"),Xe(v,"SID",c.M),Xe(v,"AID",c.K),Xe(v,"CI",c.F?"0":"1"),!c.F&&c.ia&&Xe(v,"TO",c.ia),Xe(v,"TYPE","xmlhttp"),qs(c,v),c.u&&c.o&&Us(v,c.u,c.o),c.O&&(c.g.H=c.O);var b=c.g;c=c.ba,b.M=1,b.A=js(It(v)),b.u=null,b.R=!0,wa(b,c)}i.Va=function(){this.C!=null&&(this.C=null,Pi(this),Hs(this),Ct(19))};function Oa(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Gu(c,v){var b=null;if(c.g==v){Oa(c),tl(c),c.g=null;var S=2}else if(wr(c.h,v))b=v.G,Fo(c.h,v),S=1;else return;if(c.I!=0){if(v.o)if(S==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var H=c.D;S=xa(),_t(S,new gr(S,b)),Nr(c)}else Hu(c);else if(H=v.m,H==3||H==0&&v.X>0||!(S==1&&ka(c,v)||S==2&&Hs(c)))switch(b&&b.length>0&&(v=c.h,v.i=v.i.concat(b)),H){case 1:Ir(c,5);break;case 4:Ir(c,10);break;case 3:Ir(c,6);break;default:Ir(c,2)}}}function Qu(c,v){let b=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(b*=2),b*v}function Ir(c,v){if(c.j.info("Error code "+v),v==2){var b=g(c.bb,c),S=c.Ua;const H=!S;S=new xn(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ht(S,"https"),js(S),H?rr(S.toString(),b):Xo(S.toString(),b)}else Ct(2);c.I=0,c.l&&c.l.pa(v),Yu(c),Da(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Yu(c){if(c.I=0,c.ja=[],c.l){const v=Go(c.h);(v.length!=0||c.i.length!=0)&&(B(c.ja,v),B(c.ja,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.oa()}}function $u(c,v,b){var S=b instanceof xn?It(b):new xn(b);if(S.g!="")v&&(S.g=v+"."+S.g),Ii(S,S.u);else{var H=h.location;S=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;const J=new xn(null);S&&Ht(J,S),v&&(J.g=v),H&&Ii(J,H),b&&(J.h=b),S=J}return b=c.G,v=c.wa,b&&v&&Xe(S,b,v),Xe(S,"VER",c.ka),qs(c,S),S}function Ku(c,v,b){if(v&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Aa&&!c.ma?new Ze(new Ar({ab:b})):new Ze(c.ma),v.Fa(c.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}i=Xu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Li(){}Li.prototype.g=function(c,v){return new un(c,v)};function un(c,v){ot.call(this),this.g=new ji(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(c?c["X-WebChannel-Client-Profile"]=v.sa:c={"X-WebChannel-Client-Profile":v.sa}),this.g.U=c,(c=v&&v.Qb)&&!D(c)&&(this.g.u=c),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Xr(this)}T(un,ot),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Zo(this.g)},un.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var b={};b.__data__=c,c=b}else this.v&&(b={},b.__data__=Ni(c),c=b);v.i.push(new Nt(v.Ya++,c)),v.I==3&&Nr(v)},un.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,un.Z.N.call(this)};function Ju(c){Yt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const b in v){c=b;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}T(Ju,Yt);function Wu(){Mn.call(this),this.status=1}T(Wu,Mn);function Xr(c){this.g=c}T(Xr,Xu),Xr.prototype.ra=function(){_t(this.g,"a")},Xr.prototype.qa=function(c){_t(this.g,new Ju(c))},Xr.prototype.pa=function(c){_t(this.g,new Wu)},Xr.prototype.oa=function(){_t(this.g,"b")},Li.prototype.createWebChannel=Li.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Kb=function(){return new Li},$b=function(){return xa()},Yb=Et,$m={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,ph=Ms,Uo.COMPLETE="complete",Qb=Uo,Iu.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Hl=Iu,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,Gb=Ze}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const N_="@firebase/firestore",I_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new bp("@firebase/firestore");function co(){return ga.logLevel}function me(i,...e){if(ga.logLevel<=Ue.DEBUG){const n=e.map(kp);ga.debug(`Firestore (${Oo}): ${i}`,...n)}}function Ei(i,...e){if(ga.logLevel<=Ue.ERROR){const n=e.map(kp);ga.error(`Firestore (${Oo}): ${i}`,...n)}}function bo(i,...e){if(ga.logLevel<=Ue.WARN){const n=e.map(kp);ga.warn(`Firestore (${Oo}): ${i}`,...n)}}function kp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Xb(i,s,n)}function Xb(i,e,n){let s=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ei(s),new Error(s)}function $e(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||Xb(e,o,s)}function De(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(sn.UNAUTHENTICATED)))}shutdown(){}}class LR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class UR{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let u=new gi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new gi,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=u;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new gi)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new Jb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class zR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new zR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class D_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);const s=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new D_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new D_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=HR(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ze(i,e){return i<e?-1:i>e?1:0}function Km(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Dm(o)===Dm(u)?ze(o,u):Dm(o)?1:-1}return ze(i.length,e.length)}const FR=55296,GR=57343;function Dm(i){const e=i.charCodeAt(0);return e>=FR&&e<=GR}function To(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="__name__";class jr{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ce(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return jr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=jr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ze(e.length,n.length)}static compareSegments(e,n){const s=jr.isNumericId(e),o=jr.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?jr.extractNumericId(e).compare(jr.extractNumericId(n)):Km(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class at extends jr{construct(e,n,s){return new at(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new at(n)}static emptyPath(){return new at([])}}const QR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends jr{construct(e,n,s){return new en(e,n,s)}static isValidIdentifier(e){return QR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k_}static keyField(){return new en([k_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new fe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new fe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new fe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(s+=p,o++):(u(),o++)}if(u(),h)throw new fe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(at.fromString(e))}static fromName(e){return new be(at.fromString(e).popFirst(5))}static empty(){return new be(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(i,e,n){if(!n)throw new fe(se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function YR(i,e,n,s){if(e===!0&&s===!0)throw new fe(se.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function O_(i){if(!be.isDocumentKey(i))throw new fe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function M_(i){if(be.isDocumentKey(i))throw new fe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Zb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Jh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce(12329,{type:typeof i})}function En(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jh(i);throw new fe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(i,e){const n={typeString:i};return e&&(n.value=e),n}function _u(i,e){if(!Zb(i))throw new fe(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new fe(se.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=-62135596800,j_=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*j_);return new it(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<V_)throw new fe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j_}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_u(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-V_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:Pt("string",it._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new it(0,0))}static max(){return new Ne(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=-1;function $R(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new it(n+1,0):new it(n,s));return new vs(o,be.empty(),e)}function KR(i){return new vs(i.readTime,i.key,ru)}class vs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new vs(Ne.min(),be.empty(),ru)}static max(){return new vs(Ne.max(),be.empty(),ru)}}function XR(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(i.documentKey,e.documentKey),n!==0?n:ze(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(i){if(i.code!==se.FAILED_PRECONDITION||i.message!==JR)throw i;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,s)=>{n(e)}))}static reject(e){return new ae(((n,s)=>{s(e)}))}static waitFor(e){return new ae(((n,s)=>{let o=0,u=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++u,h&&u===o&&n()}),(m=>s(m)))})),h=!0,u===o&&n()}))}static or(e){let n=ae.resolve(!1);for(const s of e)n=n.next((o=>o?ae.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ae(((s,o)=>{const u=e.length,h=new Array(u);let p=0;for(let m=0;m<u;m++){const g=m;n(e[g]).next((E=>{h[g]=E,++p,p===u&&s(h)}),(E=>o(E)))}}))}static doWhile(e,n){return new ae(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function ZR(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function Zh(i){return i==null}function Ih(i){return i===0&&1/i==-1/0}function eN(i){return typeof i=="number"&&Number.isInteger(i)&&!Ih(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="";function tN(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=P_(e)),e=nN(i.get(n),e);return P_(e)}function nN(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case eT:n+="";break;default:n+=u}}return n}function P_(i){return i+eT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Cs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function tT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Zt.RED,this.left=o??Zt.EMPTY,this.right=u??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Zt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new U_(this.data.getIterator())}getIteratorFrom(e){return new U_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class U_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new zt(en.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new nT("Invalid base64 string: "+u):u}})(e);return new tn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const rN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(i){if($e(!!i,39018),typeof i=="string"){let e=0;const n=rN.exec(i);if($e(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(i.seconds),nanos:wt(i.nanos)}}function wt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Es(i){return typeof i=="string"?tn.fromBase64String(i):tn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="server_timestamp",iT="__type__",sT="__previous_value__",aT="__local_write_time__";function Vp(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[iT])==null?void 0:s.stringValue)===rT}function ed(i){const e=i.mapValue.fields[sT];return Vp(e)?ed(e):e}function iu(i){const e=_s(i.mapValue.fields[aT].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n,s,o,u,h,p,m,g,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=E}}const Dh="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||Dh}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===Dh}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",sN="__max__",ah={mapValue:{}},lT="__vector__",kh="value";function bs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vp(i)?4:oN(i)?9007199254740991:aN(i)?10:11:Ce(28295,{value:i})}function Hr(i,e){if(i===e)return!0;const n=bs(i);if(n!==bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return iu(i).isEqual(iu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=_s(o.timestampValue),p=_s(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Es(o.bytesValue).isEqual(Es(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return wt(o.geoPointValue.latitude)===wt(u.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return wt(o.integerValue)===wt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=wt(o.doubleValue),p=wt(u.doubleValue);return h===p?Ih(h)===Ih(p):isNaN(h)&&isNaN(p)}return!1})(i,e);case 9:return To(i.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},p=u.mapValue.fields||{};if(L_(h)!==L_(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!Hr(h[m],p[m])))return!1;return!0})(i,e);default:return Ce(52216,{left:i})}}function au(i,e){return(i.values||[]).find((n=>Hr(n,e)))!==void 0}function xo(i,e){if(i===e)return 0;const n=bs(i),s=bs(e);if(n!==s)return ze(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=wt(u.integerValue||u.doubleValue),m=wt(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(i,e);case 3:return z_(i.timestampValue,e.timestampValue);case 4:return z_(iu(i),iu(e));case 5:return Km(i.stringValue,e.stringValue);case 6:return(function(u,h){const p=Es(u),m=Es(h);return p.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),m=h.split("/");for(let g=0;g<p.length&&g<m.length;g++){const E=ze(p[g],m[g]);if(E!==0)return E}return ze(p.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=ze(wt(u.latitude),wt(h.latitude));return p!==0?p:ze(wt(u.longitude),wt(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return B_(i.arrayValue,e.arrayValue);case 10:return(function(u,h){var C,M,B,X;const p=u.fields||{},m=h.fields||{},g=(C=p[kh])==null?void 0:C.arrayValue,E=(M=m[kh])==null?void 0:M.arrayValue,T=ze(((B=g==null?void 0:g.values)==null?void 0:B.length)||0,((X=E==null?void 0:E.values)==null?void 0:X.length)||0);return T!==0?T:B_(g,E)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===ah.mapValue&&h===ah.mapValue)return 0;if(u===ah.mapValue)return 1;if(h===ah.mapValue)return-1;const p=u.fields||{},m=Object.keys(p),g=h.fields||{},E=Object.keys(g);m.sort(),E.sort();for(let T=0;T<m.length&&T<E.length;++T){const C=Km(m[T],E[T]);if(C!==0)return C;const M=xo(p[m[T]],g[E[T]]);if(M!==0)return M}return ze(m.length,E.length)})(i.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function z_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ze(i,e);const n=_s(i),s=_s(e),o=ze(n.seconds,s.seconds);return o!==0?o:ze(n.nanos,s.nanos)}function B_(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=xo(n[o],s[o]);if(u)return u}return ze(n.length,s.length)}function wo(i){return Xm(i)}function Xm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=_s(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Es(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return be.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Xm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Xm(n.fields[h])}`;return o+"}"})(i.mapValue):Ce(61005,{value:i})}function gh(i){switch(bs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(i);return e?16+gh(e):16;case 5:return 2*i.stringValue.length;case 6:return Es(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+gh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Cs(s.fields,((u,h)=>{o+=u.length+gh(h)})),o})(i.mapValue);default:throw Ce(13486,{value:i})}}function q_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Jm(i){return!!i&&"integerValue"in i}function jp(i){return!!i&&"arrayValue"in i}function H_(i){return!!i&&"nullValue"in i}function F_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function yh(i){return!!i&&"mapValue"in i}function aN(i){var n,s;return((s=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[oT])==null?void 0:s.stringValue)===lT}function Kl(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Cs(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Kl(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kl(i.arrayValue.values[n]);return e}return{...i}}function oN(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===sN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(n)}setAll(e){let n=en.emptyPath(),s={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const m=this.getFieldsMap(n);this.applyChanges(m,s,o),s={},o=[],n=p.popLast()}h?s[p.lastSegment()]=Kl(h):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];yh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Cs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new _n(Kl(this.value))}}function uT(i){const e=[];return Cs(i.fields,((n,s)=>{const o=new en([n]);if(yh(s)){const u=uT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,s,o,u,h,p){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new an(e,0,Ne.min(),Ne.min(),Ne.min(),_n.empty(),0)}static newFoundDocument(e,n,s,o){return new an(e,1,n,Ne.min(),s,o,0)}static newNoDocument(e,n){return new an(e,2,n,Ne.min(),Ne.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,Ne.min(),Ne.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.position=e,this.inclusive=n}}function G_(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=be.comparator(be.fromName(h.referenceValue),n.key):s=xo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Q_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Hr(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n="asc"){this.field=e,this.dir=n}}function lN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class jt extends cT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new cN(e,n,s):n==="array-contains"?new fN(e,s):n==="in"?new mN(e,s):n==="not-in"?new pN(e,s):n==="array-contains-any"?new gN(e,s):new jt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new hN(e,s):new dN(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xo(n,this.value)):n!==null&&bs(this.value)===bs(n)&&this.matchesComparison(xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends cT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fr(e,n)}matches(e){return hT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hT(i){return i.op==="and"}function dT(i){return uN(i)&&hT(i)}function uN(i){for(const e of i.filters)if(e instanceof fr)return!1;return!0}function Wm(i){if(i instanceof jt)return i.field.canonicalString()+i.op.toString()+wo(i.value);if(dT(i))return i.filters.map((e=>Wm(e))).join(",");{const e=i.filters.map((n=>Wm(n))).join(",");return`${i.op}(${e})`}}function fT(i,e){return i instanceof jt?(function(s,o){return o instanceof jt&&s.op===o.op&&s.field.isEqual(o.field)&&Hr(s.value,o.value)})(i,e):i instanceof fr?(function(s,o){return o instanceof fr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,p)=>u&&fT(h,o.filters[p])),!0):!1})(i,e):void Ce(19439)}function mT(i){return i instanceof jt?(function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`})(i):i instanceof fr?(function(n){return n.op.toString()+" {"+n.getFilters().map(mT).join(" ,")+"}"})(i):"Filter"}class cN extends jt{constructor(e,n,s){super(e,n,s),this.key=be.fromName(s.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class hN extends jt{constructor(e,n){super(e,"in",n),this.keys=pT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class dN extends jt{constructor(e,n){super(e,"not-in",n),this.keys=pT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pT(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>be.fromName(s.referenceValue)))}class fN extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jp(n)&&au(n.arrayValue,this.value)}}class mN extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class pN extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class gN extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>au(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n=null,s=[],o=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function Y_(i,e=null,n=[],s=[],o=null,u=null,h=null){return new yN(i,e,n,s,o,u,h)}function Pp(i){const e=De(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Wm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Zh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>wo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>wo(s))).join(",")),e.Te=n}return e.Te}function Lp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!lN(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!fT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Q_(i.startAt,e.startAt)&&Q_(i.endAt,e.endAt)}function Zm(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n=null,s=[],o=[],u=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vN(i,e,n,s,o,u,h,p){return new Eu(i,e,n,s,o,u,h,p)}function td(i){return new Eu(i)}function $_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function gT(i){return i.collectionGroup!==null}function Xl(i){const e=De(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new zt(en.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Mh(u,s))})),n.has(en.keyField().canonicalString())||e.Ie.push(new Mh(en.keyField(),s))}return e.Ie}function Ur(i){const e=De(i);return e.Ee||(e.Ee=_N(e,Xl(i))),e.Ee}function _N(i,e){if(i.limitType==="F")return Y_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Mh(o.field,u)}));const n=i.endAt?new Oh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Oh(i.startAt.position,i.startAt.inclusive):null;return Y_(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ep(i,e){const n=i.filters.concat([e]);return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function tp(i,e,n){return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function nd(i,e){return Lp(Ur(i),Ur(e))&&i.limitType===e.limitType}function yT(i){return`${Pp(Ur(i))}|lt:${i.limitType}`}function ho(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>mT(o))).join(", ")}]`),Zh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>wo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>wo(o))).join(",")),`Target(${s})`})(Ur(i))}; limitType=${i.limitType})`}function rd(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):be.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of Xl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,p,m){const g=G_(h,p,m);return h.inclusive?g<=0:g<0})(s.startAt,Xl(s),o)||s.endAt&&!(function(h,p,m){const g=G_(h,p,m);return h.inclusive?g>=0:g>0})(s.endAt,Xl(s),o))})(i,e)}function EN(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function vT(i){return(e,n)=>{let s=!1;for(const o of Xl(i)){const u=bN(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function bN(i,e,n){const s=i.field.isKeyField()?be.comparator(e.key,n.key):(function(u,h,p){const m=h.data.field(u),g=p.data.field(u);return m!==null&&g!==null?xo(m,g):Ce(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return tT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new pt(be.comparator);function bi(){return TN}const _T=new pt(be.comparator);function Fl(...i){let e=_T;for(const n of i)e=e.insert(n.key,n);return e}function ET(i){let e=_T;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function la(){return Jl()}function bT(){return Jl()}function Jl(){return new Ea((i=>i.toString()),((i,e)=>i.isEqual(e)))}const xN=new pt(be.comparator),wN=new zt(be.comparator);function Be(...i){let e=wN;for(const n of i)e=e.add(n);return e}const SN=new zt(ze);function AN(){return SN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function TT(i){return{integerValue:""+i}}function CN(i,e){return eN(e)?TT(e):Up(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(){this._=void 0}}function RN(i,e,n){return i instanceof Vh?(function(o,u){const h={fields:{[iT]:{stringValue:rT},[aT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Vp(u)&&(u=ed(u)),u&&(h.fields[sT]=u),{mapValue:h}})(n,e):i instanceof ou?wT(i,e):i instanceof lu?ST(i,e):(function(o,u){const h=xT(o,u),p=K_(h)+K_(o.Ae);return Jm(h)&&Jm(o.Ae)?TT(p):Up(o.serializer,p)})(i,e)}function NN(i,e,n){return i instanceof ou?wT(i,e):i instanceof lu?ST(i,e):n}function xT(i,e){return i instanceof jh?(function(s){return Jm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Vh extends id{}class ou extends id{constructor(e){super(),this.elements=e}}function wT(i,e){const n=AT(e);for(const s of i.elements)n.some((o=>Hr(o,s)))||n.push(s);return{arrayValue:{values:n}}}class lu extends id{constructor(e){super(),this.elements=e}}function ST(i,e){let n=AT(e);for(const s of i.elements)n=n.filter((o=>!Hr(o,s)));return{arrayValue:{values:n}}}class jh extends id{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function K_(i){return wt(i.integerValue||i.doubleValue)}function AT(i){return jp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function IN(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof ou&&o instanceof ou||s instanceof lu&&o instanceof lu?To(s.elements,o.elements,Hr):s instanceof jh&&o instanceof jh?Hr(s.Ae,o.Ae):s instanceof Vh&&o instanceof Vh})(i.transform,e.transform)}class DN{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class sd{}function CT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new zp(i.key,Xn.none()):new bu(i.key,i.data,Xn.none());{const n=i.data,s=_n.empty();let o=new zt(en.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new Rs(i.key,s,new Dn(o.toArray()),Xn.none())}}function kN(i,e,n){i instanceof bu?(function(o,u,h){const p=o.value.clone(),m=J_(o.fieldTransforms,u,h.transformResults);p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):i instanceof Rs?(function(o,u,h){if(!vh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const p=J_(o.fieldTransforms,u,h.transformResults),m=u.data;m.setAll(RT(o)),m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(i,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Wl(i,e,n,s){return i instanceof bu?(function(u,h,p,m){if(!vh(u.precondition,h))return p;const g=u.value.clone(),E=W_(u.fieldTransforms,m,h);return g.setAll(E),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(i,e,n,s):i instanceof Rs?(function(u,h,p,m){if(!vh(u.precondition,h))return p;const g=W_(u.fieldTransforms,m,h),E=h.data;return E.setAll(RT(u)),E.setAll(g),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,h,p){return vh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(i,e,n)}function ON(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=xT(s.transform,o||null);u!=null&&(n===null&&(n=_n.empty()),n.set(s.field,u))}return n||null}function X_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&To(s,o,((u,h)=>IN(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class bu extends sd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rs extends sd{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function RT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function J_(i,e,n){const s=new Map;$e(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const u=i[o],h=u.transform,p=e.data.field(u.field);s.set(u.field,NN(h,p,n[o]))}return s}function W_(i,e,n){const s=new Map;for(const o of i){const u=o.transform,h=n.data.field(o.field);s.set(o.field,RN(u,h,e))}return s}class zp extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MN extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&kN(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Wl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Wl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=bT();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(o.key)?null:p;const m=CT(h,p);m!==null&&s.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ne.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Be())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,((n,s)=>X_(n,s)))&&To(this.baseMutations,e.baseMutations,((n,s)=>X_(n,s)))}}class Bp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return xN})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Bp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,He;function LN(i){switch(i){case se.OK:return Ce(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ce(15467,{code:i})}}function NT(i){if(i===void 0)return Ei("GRPC error has no .code"),se.UNKNOWN;switch(i){case Vt.OK:return se.OK;case Vt.CANCELLED:return se.CANCELLED;case Vt.UNKNOWN:return se.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return se.INTERNAL;case Vt.UNAVAILABLE:return se.UNAVAILABLE;case Vt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Vt.NOT_FOUND:return se.NOT_FOUND;case Vt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Vt.ABORTED:return se.ABORTED;case Vt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Vt.DATA_LOSS:return se.DATA_LOSS;default:return Ce(39323,{code:i})}}(He=Vt||(Vt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new gs([4294967295,4294967295],0);function Z_(i){const e=UN().encode(i),n=new Fb;return n.update(e),new Uint8Array(n.digest())}function eE(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new gs([n,s],0),new gs([o,u],0)]}class qp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Gl(`Invalid padding: ${n}`);if(s<0)throw new Gl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(gs.fromNumber(s)));return o.compare(zN)===1&&(o=new gs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Z_(e),[s,o]=eE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new qp(u,o,n);return s.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=Z_(e),[s,o]=eE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ad(Ne.min(),o,new pt(ze),bi(),Be())}}class Tu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Tu(s,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class IT{constructor(e,n){this.targetId=e,this.Ce=n}}class DT{constructor(e,n,s=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class tE{constructor(){this.ve=0,this.Fe=nE(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),s=Be();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ce(38017,{changeType:u})}})),new Tu(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=nE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BN{constructor(e){this.Ge=e,this.ze=new Map,this.je=bi(),this.Je=oh(),this.He=oh(),this.Ye=new pt(ze)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Zm(u))if(s===0){const h=new be(u.path);this.et(n,h,an.newNoDocument(h,Ne.min()))}else $e(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const p=this.ut(e),m=p?this.ct(p,e,h):1;if(m!==0){this.it(n);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,p;try{h=Es(s).toUint8Array()}catch(m){if(m instanceof nT)return bo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new qp(h,o,u)}catch(m){return bo(m instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&Zm(p.target)){const m=new be(p.target.path);this.It(m).has(h)||this.Et(h,m)||this.et(h,m,an.newNoDocument(m,e))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let s=Be();this.He.forEach(((u,h)=>{let p=!0;h.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new ad(e,n,this.Ye,this.je,s);return this.je=bi(),this.Je=oh(),this.He=oh(),this.Ye=new pt(ze),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new tE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new zt(ze),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new zt(ze),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function oh(){return new pt(be.comparator)}function nE(){return new pt(be.comparator)}const qN={asc:"ASCENDING",desc:"DESCENDING"},HN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FN={and:"AND",or:"OR"};class GN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(i,e){return i.useProto3Json||Zh(e)?e:{value:e}}function Ph(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function QN(i,e){return Ph(i,e.toTimestamp())}function zr(i){return $e(!!i,49232),Ne.fromTimestamp((function(n){const s=_s(n);return new it(s.seconds,s.nanos)})(i))}function Hp(i,e){return rp(i,e).canonicalString()}function rp(i,e){const n=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function OT(i){const e=at.fromString(i);return $e(LT(e),10190,{key:e.toString()}),e}function ip(i,e){return Hp(i.databaseId,e.path)}function km(i,e){const n=OT(e);if(n.get(1)!==i.databaseId.projectId)throw new fe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new fe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new be(VT(n))}function MT(i,e){return Hp(i.databaseId,e)}function YN(i){const e=OT(i);return e.length===4?at.emptyPath():VT(e)}function sp(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function VT(i){return $e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function rE(i,e,n){return{name:ip(i,e),fields:n.value.mapValue.fields}}function $N(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ce(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,E){return g.useProto3Json?($e(E===void 0||typeof E=="string",58123),tn.fromBase64String(E||"")):($e(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),tn.fromUint8Array(E||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(g){const E=g.code===void 0?se.UNKNOWN:NT(g.code);return new fe(E,g.message||"")})(h);n=new DT(s,o,u,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=km(i,s.document.name),u=zr(s.document.updateTime),h=s.document.createTime?zr(s.document.createTime):Ne.min(),p=new _n({mapValue:{fields:s.document.fields}}),m=an.newFoundDocument(o,u,h,p),g=s.targetIds||[],E=s.removedTargetIds||[];n=new _h(g,E,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=km(i,s.document),u=s.readTime?zr(s.readTime):Ne.min(),h=an.newNoDocument(o,u),p=s.removedTargetIds||[];n=new _h([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=km(i,s.document),u=s.removedTargetIds||[];n=new _h([],u,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new PN(o,u),p=s.targetId;n=new IT(p,h)}}return n}function KN(i,e){let n;if(e instanceof bu)n={update:rE(i,e.key,e.value)};else if(e instanceof zp)n={delete:ip(i,e.key)};else if(e instanceof Rs)n={update:rE(i,e.key,e.data),updateMask:iI(e.fieldMask)};else{if(!(e instanceof MN))return Ce(16599,{Vt:e.type});n={verify:ip(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const p=h.transform;if(p instanceof Vh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ou)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof lu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof jh)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Ce(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:QN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce(27497)})(i,e.precondition)),n}function XN(i,e){return i&&i.length>0?($e(e!==void 0,14353),i.map((n=>(function(o,u){let h=o.updateTime?zr(o.updateTime):zr(u);return h.isEqual(Ne.min())&&(h=zr(u)),new DN(h,o.transformResults||[])})(n,e)))):[]}function JN(i,e){return{documents:[MT(i,e.path)]}}function WN(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=MT(i,o);const u=(function(g){if(g.length!==0)return PT(fr.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(g){if(g.length!==0)return g.map((E=>(function(C){return{field:fo(C.field),direction:tI(C.dir)}})(E)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=np(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function ZN(i){let e=YN(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){$e(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(T){const C=jT(T);return C instanceof fr&&dT(C)?C.getFilters():[C]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((C=>(function(B){return new Mh(mo(B.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(C)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let C;return C=typeof T=="object"?T.value:T,Zh(C)?null:C})(n.limit));let m=null;n.startAt&&(m=(function(T){const C=!!T.before,M=T.values||[];return new Oh(M,C)})(n.startAt));let g=null;return n.endAt&&(g=(function(T){const C=!T.before,M=T.values||[];return new Oh(M,C)})(n.endAt)),vN(e,o,h,u,p,"F",m,g)}function eI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=mo(n.unaryFilter.field);return jt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(n.unaryFilter.field);return jt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=mo(n.unaryFilter.field);return jt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=mo(n.unaryFilter.field);return jt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(i):i.fieldFilter!==void 0?(function(n){return jt.create(mo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return fr.create(n.compositeFilter.filters.map((s=>jT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(n.compositeFilter.op))})(i):Ce(30097,{filter:i})}function tI(i){return qN[i]}function nI(i){return HN[i]}function rI(i){return FN[i]}function fo(i){return{fieldPath:i.canonicalString()}}function mo(i){return en.fromServerFormat(i.fieldPath)}function PT(i){return i instanceof jt?(function(n){if(n.op==="=="){if(F_(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(H_(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(F_(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(H_(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:nI(n.op),value:n.value}}})(i):i instanceof fr?(function(n){const s=n.getFilters().map((o=>PT(o)));return s.length===1?s[0]:{compositeFilter:{op:rI(n.op),filters:s}}})(i):Ce(54877,{filter:i})}function iI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function LT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,s,o,u=Ne.min(),h=Ne.min(),p=tn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.yt=e}}function aI(i){const e=ZN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.Cn=new lI}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(vs.min())}updateCollectionGroup(e,n,s){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class lI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zt(at.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(UT,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new So(0)}static cr(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="LruGarbageCollector",uI=1048576;function aE([i,e],[n,s]){const o=ze(i,n);return o===0?ze(e,s):o}class cI{constructor(e){this.Ir=e,this.buffer=new zt(aE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();aE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class hI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(sE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vo(n)?me(sE,"Ignoring IndexedDB error during garbage collection: ",n):await Mo(n)}await this.Vr(3e5)}))}}class dI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(Wh.ce);const s=new cI(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(iE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,u,h,p,m,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,p=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(g=Date.now(),co()<=Ue.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${u} targets in `+(m-p)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-E}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function fI(i,e){return new dI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.changes=new Ea((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ae.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&Wl(s.mutation,o,Dn.empty(),it.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Be()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Be()){const o=la();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=Fl();return u.forEach(((p,m)=>{h=h.insert(p,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=la();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Be())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,s,o){let u=bi();const h=Jl(),p=(function(){return Jl()})();return n.forEach(((m,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Rs)?u=u.insert(g.key,g):E!==void 0?(h.set(g.key,E.mutation.getFieldMask()),Wl(E.mutation,g,E.mutation.getFieldMask(),it.now())):h.set(g.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,u).next((m=>(m.forEach(((g,E)=>h.set(g,E))),n.forEach(((g,E)=>p.set(g,new pI(E,h.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=Jl();let o=new pt(((h,p)=>h-p)),u=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((m=>{const g=n.get(m);if(g===null)return;let E=s.get(m)||Dn.empty();E=p.applyToLocalView(g,E),s.set(m,E);const T=(o.get(p.batchId)||Be()).add(m);o=o.insert(p.batchId,T)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),g=m.key,E=m.value,T=bT();E.forEach((C=>{if(!u.has(C)){const M=CT(n.get(C),s.get(C));M!==null&&T.set(C,M),u=u.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,g,T))}return ae.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(h){return be.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ae.resolve(la());let p=ru,m=u;return h.next((g=>ae.forEach(g,((E,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(E)?ae.resolve():this.remoteDocumentCache.getEntry(e,E).next((C=>{m=m.insert(E,C)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,m,g,Be()))).next((E=>({batchId:p,changes:ET(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((s=>{let o=Fl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=Fl();return this.indexManager.getCollectionParents(e,u).next((p=>ae.forEach(p,(m=>{const g=(function(T,C){return new Eu(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,m.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((E=>{E.forEach(((T,C)=>{h=h.insert(T,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((m,g)=>{const E=g.getKey();h.get(E)===null&&(h=h.insert(E,an.newInvalidDocument(E)))}));let p=Fl();return h.forEach(((m,g)=>{const E=u.get(m);E!==void 0&&Wl(E.mutation,g,Dn.empty(),it.now()),rd(n,g)&&(p=p.insert(m,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:zr(o.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:aI(o.bundledQuery),readTime:zr(o.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.overlays=new pt(be.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const s=la();return ae.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.St(e,n,u)})),ae.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ae.resolve()}getOverlaysForCollection(e,n,s){const o=la(),u=n.length+1,h=new be(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,g=m.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&m.largestBatchId>s&&o.set(m.getKey(),m)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new pt(((g,E)=>g-E));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=la(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const p=la(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,E)=>p.set(g,E))),!(p.size()>=o)););return ae.resolve(p)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new jN(n,s));let u=this.qr.get(n);u===void 0&&(u=Be(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.Qr=new zt(Gt.$r),this.Ur=new zt(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Gt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Gt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new be(new at([])),s=new Gt(n,e),o=new Gt(n,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new at([])),s=new Gt(n,e),o=new Gt(n,e+1);let u=Be();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Gt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||ze(e.Yr,n.Yr)}static Kr(e,n){return ze(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Gt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new VN(u,n,s,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new Gt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ae.resolve(h)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Mp:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Gt(n,0),o=new Gt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const p=this.Xr(h.Yr);u.push(p)})),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zt(ze);return n.forEach((o=>{const u=new Gt(o,0),h=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(p=>{s=s.add(p.Yr)}))})),ae.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;be.isDocumentKey(u)||(u=u.child(""));const h=new Gt(new be(u),0);let p=new zt(ze);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(p=p.add(m.Yr)),!0)}),h),ae.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){$e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ae.forEach(n.mutations,(o=>{const u=new Gt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Gt(n,0),o=this.Zr.firstAfterOrEqual(s);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.ri=e,this.docs=(function(){return new pt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ae.resolve(s?s.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let s=bi();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():an.newInvalidDocument(o))})),ae.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=bi();const h=n.path,p=new be(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:g,value:{document:E}}=m.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||XR(KR(E),s)<=0||(o.has(E.key)||rd(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ae.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ce(9500)}ii(e,n){return ae.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new TI(this)}getSize(e){return ae.resolve(this.size)}}class TI extends mI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.persistence=e,this.si=new Ea((n=>Pp(n)),Lp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Fp,this.targetCount=0,this.ai=So.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new So(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ae.waitFor(u).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ae.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ae.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ae.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ae.resolve(s)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wh(0),this.li=!1,this.li=!0,this.hi=new _I,this.referenceDelegate=e(this),this.Pi=new xI(this),this.indexManager=new oI,this.remoteDocumentCache=(function(o){return new bI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new sI(n),this.Ii=new yI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new EI(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new wI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,n){return ae.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class wI extends WR{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Ri=new Fp,this.Vi=null}static mi(e){return new Gp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ae.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(s=>{const o=be.fromPath(s);return this.gi(e,o).next((u=>{u||n.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Lh{constructor(e,n){this.persistence=e,this.pi=new Ea((s=>tN(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=fI(this,n)}static mi(e,n){return new Lh(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return ae.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ae.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((p=>{p||(s++,u.removeEntry(h,Ne.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gh(e.data.value)),n}br(e,n,s){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ae.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Be(),o=Be();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Qp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nA()?8:ZR(on())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ys(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new SI;return this.Ss(e,n,h).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,h,p.size)}))})).next((()=>u.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(co()<=Ue.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(co()<=Ue.DEBUG&&me("QueryEngine","Query:",ho(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(co()<=Ue.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(n))):ae.resolve())}ys(e,n){if($_(n))return ae.resolve(null);let s=Ur(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=tp(n,null,"F"),s=Ur(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Be(...u);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,s).next((m=>{const g=this.Ds(n,p);return this.Cs(n,g,h,m.readTime)?this.ys(e,tp(n,null,"F")):this.vs(e,g,n,m)}))))})))))}ws(e,n,s,o){return $_(n)||o.isEqual(Ne.min())?ae.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,s,o)?ae.resolve(null):(co()<=Ue.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ho(n)),this.vs(e,h,n,$R(o,ru)).next((p=>p)))}))}Ds(e,n){let s=new zt(vT(e));return n.forEach(((o,u)=>{rd(e,u)&&(s=s.add(u))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return co()<=Ue.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ho(n)),this.ps.getDocumentsMatchingQuery(e,n,vs.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="LocalStore",CI=3e8;class RI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new pt(ze),this.xs=new Ea((u=>Pp(u)),Lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function NI(i,e,n,s){return new RI(i,e,n,s)}async function BT(i,e){const n=De(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],p=[];let m=Be();for(const g of o){h.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}for(const g of u){p.push(g.batchId);for(const E of g.mutations)m=m.add(E.key)}return n.localDocuments.getDocuments(s,m).next((g=>({Ls:g,removedBatchIds:h,addedBatchIds:p})))}))}))}function II(i,e){const n=De(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,m,g,E){const T=g.batch,C=T.keys();let M=ae.resolve();return C.forEach((B=>{M=M.next((()=>E.getEntry(m,B))).next((X=>{const U=g.docVersions.get(B);$e(U!==null,48541),X.version.compareTo(U)<0&&(T.applyToRemoteDocument(X,g),X.isValidDocument()&&(X.setReadTime(g.commitVersion),E.addEntry(X)))}))})),M.next((()=>p.mutationQueue.removeMutationBatch(m,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let m=Be();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(m=m.add(p.batch.mutations[g].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function qT(i){const e=De(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function DI(i,e){const n=De(i),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((E,T)=>{const C=o.get(T);if(!C)return;p.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,T))));let M=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?M=M.withResumeToken(tn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,s)),o=o.insert(T,M),(function(X,U,Y){return X.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=CI?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(C,M,E)&&p.push(n.Pi.updateTargetData(u,M))}));let m=bi(),g=Be();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),p.push(kI(u,h,e.documentUpdates).next((E=>{m=E.ks,g=E.qs}))),!s.isEqual(Ne.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((T=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));p.push(E)}return ae.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,m,g))).next((()=>m))})).then((u=>(n.Ms=o,u)))}function kI(i,e,n){let s=Be(),o=Be();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=bi();return n.forEach(((p,m)=>{const g=u.get(p);m.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ne.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):me(Yp,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",m.version)})),{ks:h,qs:o}}))}function OI(i,e){const n=De(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Mp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function MI(i,e){const n=De(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((u=>u?(o=u,ae.resolve(o)):n.Pi.allocateTargetId(s).next((h=>(o=new ds(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function ap(i,e,n){const s=De(i),o=s.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Vo(h))throw h;me(Yp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function oE(i,e,n){const s=De(i);let o=Ne.min(),u=Be();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,g,E){const T=De(m),C=T.xs.get(E);return C!==void 0?ae.resolve(T.Ms.get(C)):T.Pi.getTargetData(g,E)})(s,h,Ur(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,p.targetId).next((m=>{u=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,n?o:Ne.min(),n?u:Be()))).next((p=>(VI(s,EN(e),p),{documents:p,Qs:u})))))}function VI(i,e,n){let s=i.Os.get(e)||Ne.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class lE{constructor(){this.activeTargetIds=AN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jI{constructor(){this.Mo=new lE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new lE,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="ConnectivityMonitor";class cE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(uE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(uE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function op(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",LI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Dh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,u){const h=op(),p=this.zo(e,n.toUriEncodedString());me(Om,`Sending RPC '${e}' ${h}:`,p,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,u);const{host:g}=new URL(p),E=Io(g);return this.Jo(e,p,m,s,E).then((T=>(me(Om,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw bo(Om,`RPC '${e}' ${h} failed with error: `,T,"url: ",p,"request:",s),T}))}Ho(e,n,s,o,u,h){return this.Go(e,n,s,o,u)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,n){const s=LI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class BI extends UI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const h=op();return new Promise(((p,m)=>{const g=new Gb;g.setWithCredentials(!0),g.listenOnce(Qb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ph.NO_ERROR:const T=g.getResponseJson();me(rn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),p(T);break;case ph.TIMEOUT:me(rn,`RPC '${e}' ${h} timed out`),m(new fe(se.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const C=g.getStatus();if(me(rn,`RPC '${e}' ${h} failed with status:`,C,"response text:",g.getResponseText()),C>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const B=M==null?void 0:M.error;if(B&&B.status&&B.message){const X=(function(Y){const W=Y.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(W)>=0?W:se.UNKNOWN})(B.status);m(new fe(X,B.message))}else m(new fe(se.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new fe(se.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(rn,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);me(rn,`RPC '${e}' ${h} sending request:`,o),g.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=op(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Kb(),p=$b(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const E=u.join("");me(rn,`Creating RPC '${e}' stream ${o}: ${E}`,m);const T=h.createWebChannel(E,m);this.I_(T);let C=!1,M=!1;const B=new zI({Yo:U=>{M?me(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(C||(me(rn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),C=!0),me(rn,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),X=(U,Y,W)=>{U.listen(Y,(j=>{try{W(j)}catch($){setTimeout((()=>{throw $}),0)}}))};return X(T,Hl.EventType.OPEN,(()=>{M||(me(rn,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),X(T,Hl.EventType.CLOSE,(()=>{M||(M=!0,me(rn,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(T))})),X(T,Hl.EventType.ERROR,(U=>{M||(M=!0,bo(rn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),B.a_(new fe(se.UNAVAILABLE,"The operation could not be completed")))})),X(T,Hl.EventType.MESSAGE,(U=>{var Y;if(!M){const W=U.data[0];$e(!!W,16349);const j=W,$=(j==null?void 0:j.error)||((Y=j[0])==null?void 0:Y.error);if($){me(rn,`RPC '${e}' stream ${o} received error:`,$);const le=$.status;let oe=(function(x){const N=Vt[x];if(N!==void 0)return NT(N)})(le),R=$.message;oe===void 0&&(oe=se.INTERNAL,R="Unknown error status: "+le+" with message "+$.message),M=!0,B.a_(new fe(oe,R)),T.close()}else me(rn,`RPC '${e}' stream ${o} received:`,W),B.u_(W)}})),X(p,Yb.STAT_EVENT,(U=>{U.stat===$m.PROXY?me(rn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===$m.NOPROXY&&me(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i){return new GN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="PersistentStream";class FT{constructor(e,n,s,o,u,h,p,m){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new HT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Ei(n.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new fe(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(hE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qI extends FT{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$N(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ne.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ne.min():h.readTime?zr(h.readTime):Ne.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=sp(this.serializer),n.addTarget=(function(u,h){let p;const m=h.target;if(p=Zm(m)?{documents:JN(u,m)}:{query:WN(u,m).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=kT(u,h.resumeToken);const g=np(u,h.expectedCount);g!==null&&(p.expectedCount=g)}else if(h.snapshotVersion.compareTo(Ne.min())>0){p.readTime=Ph(u,h.snapshotVersion.toTimestamp());const g=np(u,h.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const s=eI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.q_(n)}}class HI extends FT{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=XN(e.writeResults,e.commitTime),s=zr(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=sp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>KN(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{}class GI extends FI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,rp(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(se.UNKNOWN,u.toString())}))}Ho(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,rp(n,s),o,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(se.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ei(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class YI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{ba(this)&&(me(ya,"Restarting streams for network reachability change."),await(async function(m){const g=De(m);g.Ea.add(4),await xu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await ld(g)})(this))}))})),this.Ra=new QI(s,o)}}async function ld(i){if(ba(i))for(const e of i.da)await e(!0)}async function xu(i){for(const e of i.da)await e(!1)}function GT(i,e){const n=De(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jp(n)?Xp(n):jo(n).O_()&&Kp(n,e))}function $p(i,e){const n=De(i),s=jo(n);n.Ia.delete(e),s.O_()&&QT(n,e),n.Ia.size===0&&(s.O_()?s.L_():ba(n)&&n.Ra.set("Unknown"))}function Kp(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jo(i).Y_(e)}function QT(i,e){i.Va.Ue(e),jo(i).Z_(e)}function Xp(i){i.Va=new BN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),jo(i).start(),i.Ra.ua()}function Jp(i){return ba(i)&&!jo(i).x_()&&i.Ia.size>0}function ba(i){return De(i).Ea.size===0}function YT(i){i.Va=void 0}async function $I(i){i.Ra.set("Online")}async function KI(i){i.Ia.forEach(((e,n)=>{Kp(i,e)}))}async function XI(i,e){YT(i),Jp(i)?(i.Ra.ha(e),Xp(i)):i.Ra.set("Unknown")}async function JI(i,e,n){if(i.Ra.set("Online"),e instanceof DT&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(s){me(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Uh(i,s)}else if(e instanceof _h?i.Va.Ze(e):e instanceof IT?i.Va.st(e):i.Va.tt(e),!n.isEqual(Ne.min()))try{const s=await qT(i.localStore);n.compareTo(s)>=0&&await(function(u,h){const p=u.Va.Tt(h);return p.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const E=u.Ia.get(g);E&&u.Ia.set(g,E.withResumeToken(m.resumeToken,h))}})),p.targetMismatches.forEach(((m,g)=>{const E=u.Ia.get(m);if(!E)return;u.Ia.set(m,E.withResumeToken(tn.EMPTY_BYTE_STRING,E.snapshotVersion)),QT(u,m);const T=new ds(E.target,m,g,E.sequenceNumber);Kp(u,T)})),u.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(s){me(ya,"Failed to raise snapshot:",s),await Uh(i,s)}}async function Uh(i,e,n){if(!Vo(e))throw e;i.Ea.add(1),await xu(i),i.Ra.set("Offline"),n||(n=()=>qT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(ya,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await ld(i)}))}function $T(i,e){return e().catch((n=>Uh(i,n,e)))}async function ud(i){const e=De(i),n=Ts(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mp;for(;WI(e);)try{const o=await OI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,ZI(e,o)}catch(o){await Uh(e,o)}KT(e)&&XT(e)}function WI(i){return ba(i)&&i.Ta.length<10}function ZI(i,e){i.Ta.push(e);const n=Ts(i);n.O_()&&n.X_&&n.ea(e.mutations)}function KT(i){return ba(i)&&!Ts(i).x_()&&i.Ta.length>0}function XT(i){Ts(i).start()}async function eD(i){Ts(i).ra()}async function tD(i){const e=Ts(i);for(const n of i.Ta)e.ea(n.mutations)}async function nD(i,e,n){const s=i.Ta.shift(),o=Bp.from(s,e,n);await $T(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await ud(i)}async function rD(i,e){e&&Ts(i).X_&&await(async function(s,o){if((function(h){return LN(h)&&h!==se.ABORTED})(o.code)){const u=s.Ta.shift();Ts(s).B_(),await $T(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ud(s)}})(i,e),KT(i)&&XT(i)}async function dE(i,e){const n=De(i);n.asyncQueue.verifyOperationInProgress(),me(ya,"RemoteStore received new credentials");const s=ba(n);n.Ea.add(3),await xu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ld(n)}async function iD(i,e){const n=De(i);e?(n.Ea.delete(2),await ld(n)):e||(n.Ea.add(2),await xu(n),n.Ra.set("Unknown"))}function jo(i){return i.ma||(i.ma=(function(n,s,o){const u=De(n);return u.sa(),new qI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:$I.bind(null,i),t_:KI.bind(null,i),r_:XI.bind(null,i),H_:JI.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Jp(i)?Xp(i):i.Ra.set("Unknown")):(await i.ma.stop(),YT(i))}))),i.ma}function Ts(i){return i.fa||(i.fa=(function(n,s,o){const u=De(n);return u.sa(),new HI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:eD.bind(null,i),r_:rD.bind(null,i),ta:tD.bind(null,i),na:nD.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await ud(i)):(await i.fa.stop(),i.Ta.length>0&&(me(ya,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,p=new Wp(e,n,h,o,u);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(i,e){if(Ei("AsyncQueue",`${e}: ${i}`),Vo(i))return new fe(se.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{static emptySet(e){return new _o(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||be.comparator(n.key,s.key):(n,s)=>be.comparator(n.key,s.key),this.keyedMap=Fl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new _o;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.ga=new pt(be.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ao{constructor(e,n,s,o,u,h,p,m,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Ao(e,n,_o.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aD{constructor(){this.queries=mE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=De(n),u=o.queries;o.queries=mE(),u.forEach(((h,p)=>{for(const m of p.Sa)m.onError(s)}))})(this,new fe(se.ABORTED,"Firestore shutting down"))}}function mE(){return new Ea((i=>yT(i)),nd)}async function eg(i,e){const n=De(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new sD,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=Zp(h,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&ng(n)}async function tg(i,e){const n=De(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function oD(i,e){const n=De(i);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const p of h.Sa)p.Fa(o)&&(s=!0);h.wa=o}}s&&ng(n)}function lD(i,e,n){const s=De(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function ng(i){i.Ca.forEach((e=>{e.next()}))}var lp,pE;(pE=lp||(lp={})).Ma="default",pE.Cache="cache";class rg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.key=e}}class WT{constructor(e){this.key=e}}class uD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=vT(e),this.tu=new _o(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new fE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const C=o.get(E),M=rd(this.query,T)?T:null,B=!!C&&this.mutatedKeys.has(C.key),X=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;C&&M?C.data.isEqual(M.data)?B!==X&&(s.track({type:3,doc:M}),U=!0):this.su(C,M)||(s.track({type:2,doc:M}),U=!0,(m&&this.eu(M,m)>0||g&&this.eu(M,g)<0)&&(p=!0)):!C&&M?(s.track({type:0,doc:M}),U=!0):C&&!M&&(s.track({type:1,doc:C}),U=!0,(m||g)&&(p=!0)),U&&(M?(h=h.add(M),u=X?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,T)=>(function(M,B){const X=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:U})}};return X(M)-X(B)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const p=n&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,g=m!==this.Za;return this.Za=m,h.length!==0||g?{snapshot:new Ao(this.query,e.tu,u,h,e.mutatedKeys,m===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new WT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new JT(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ig="SyncEngine";class cD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class hD{constructor(e){this.key=e,this.hu=!1}}class dD{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ea((p=>yT(p)),nd),this.Iu=new Map,this.Eu=new Set,this.du=new pt(be.comparator),this.Au=new Map,this.Ru=new Fp,this.Vu={},this.mu=new Map,this.fu=So.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fD(i,e,n=!0){const s=ix(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await ZT(s,e,n,!0),o}async function mD(i,e){const n=ix(i);await ZT(n,e,!0,!1)}async function ZT(i,e,n,s){const o=await MI(i.localStore,Ur(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let p;return s&&(p=await pD(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&GT(i.remoteStore,o),p}async function pD(i,e,n,s,o){i.pu=(T,C,M)=>(async function(X,U,Y,W){let j=U.view.ru(Y);j.Cs&&(j=await oE(X.localStore,U.query,!1).then((({documents:R})=>U.view.ru(R,j))));const $=W&&W.targetChanges.get(U.targetId),le=W&&W.targetMismatches.get(U.targetId)!=null,oe=U.view.applyChanges(j,X.isPrimaryClient,$,le);return yE(X,U.targetId,oe.au),oe.snapshot})(i,T,C,M);const u=await oE(i.localStore,e,!0),h=new uD(e,u.Qs),p=h.ru(u.documents),m=Tu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=h.applyChanges(p,i.isPrimaryClient,m);yE(i,n,g.au);const E=new cD(e,n,h);return i.Tu.set(e,E),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function gD(i,e,n){const s=De(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!nd(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&$p(s.remoteStore,o.targetId),up(s,o.targetId)})).catch(Mo)):(up(s,o.targetId),await ap(s.localStore,o.targetId,!0))}async function yD(i,e){const n=De(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$p(n.remoteStore,s.targetId))}async function vD(i,e,n){const s=SD(i);try{const o=await(function(h,p){const m=De(h),g=it.now(),E=p.reduce(((M,B)=>M.add(B.key)),Be());let T,C;return m.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let B=bi(),X=Be();return m.Ns.getEntries(M,E).next((U=>{B=U,B.forEach(((Y,W)=>{W.isValidDocument()||(X=X.add(Y))}))})).next((()=>m.localDocuments.getOverlayedDocuments(M,B))).next((U=>{T=U;const Y=[];for(const W of p){const j=ON(W,T.get(W.key).overlayedDocument);j!=null&&Y.push(new Rs(W.key,j,uT(j.value.mapValue),Xn.exists(!0)))}return m.mutationQueue.addMutationBatch(M,g,Y,p)})).next((U=>{C=U;const Y=U.applyToLocalDocumentSet(T,X);return m.documentOverlayCache.saveOverlays(M,U.batchId,Y)}))})).then((()=>({batchId:C.batchId,changes:ET(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,p,m){let g=h.Vu[h.currentUser.toKey()];g||(g=new pt(ze)),g=g.insert(p,m),h.Vu[h.currentUser.toKey()]=g})(s,o.batchId,n),await wu(s,o.changes),await ud(s.remoteStore)}catch(o){const u=Zp(o,"Failed to persist write");n.reject(u)}}async function ex(i,e){const n=De(i);try{const s=await DI(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?$e(h.hu,14607):o.removedDocuments.size>0&&($e(h.hu,42227),h.hu=!1))})),await wu(n,s,e)}catch(s){await Mo(s)}}function gE(i,e,n){const s=De(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const m=De(h);m.onlineState=p;let g=!1;m.queries.forEach(((E,T)=>{for(const C of T.Sa)C.va(p)&&(g=!0)})),g&&ng(m)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function _D(i,e,n){const s=De(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new pt(be.comparator);h=h.insert(u,an.newNoDocument(u,Ne.min()));const p=Be().add(u),m=new ad(Ne.min(),new Map,new pt(ze),h,p);await ex(s,m),s.du=s.du.remove(u),s.Au.delete(e),sg(s)}else await ap(s.localStore,e,!1).then((()=>up(s,e,n))).catch(Mo)}async function ED(i,e){const n=De(i),s=e.batch.batchId;try{const o=await II(n.localStore,e);nx(n,s,null),tx(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wu(n,o)}catch(o){await Mo(o)}}async function bD(i,e,n){const s=De(i);try{const o=await(function(h,p){const m=De(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let E;return m.mutationQueue.lookupMutationBatch(g,p).next((T=>($e(T!==null,37113),E=T.keys(),m.mutationQueue.removeMutationBatch(g,T)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,E,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E))).next((()=>m.localDocuments.getDocuments(g,E)))}))})(s.localStore,e);nx(s,e,n),tx(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await wu(s,o)}catch(o){await Mo(o)}}function tx(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function nx(i,e,n){const s=De(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function up(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||rx(i,s)}))}function rx(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&($p(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),sg(i))}function yE(i,e,n){for(const s of n)s instanceof JT?(i.Ru.addReference(s.key,e),TD(i,s)):s instanceof WT?(me(ig,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||rx(i,s.key)):Ce(19791,{wu:s})}function TD(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(me(ig,"New document in limbo: "+n),i.Eu.add(s),sg(i))}function sg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new be(at.fromString(e)),s=i.fu.next();i.Au.set(s,new hD(n)),i.du=i.du.insert(n,s),GT(i.remoteStore,new ds(Ur(td(n.path)),s,"TargetPurposeLimboResolution",Wh.ce))}}async function wu(i,e,n){const s=De(i),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,m)=>{h.push(s.pu(m,e,n).then((g=>{var E;if((g||n)&&s.isPrimaryClient){const T=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(m.targetId))==null?void 0:E.current;s.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(g){o.push(g);const T=Qp.As(m.targetId,g);u.push(T)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(m,g){const E=De(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ae.forEach(g,(C=>ae.forEach(C.Es,(M=>E.persistence.referenceDelegate.addReference(T,C.targetId,M))).next((()=>ae.forEach(C.ds,(M=>E.persistence.referenceDelegate.removeReference(T,C.targetId,M)))))))))}catch(T){if(!Vo(T))throw T;me(Yp,"Failed to update sequence numbers: "+T)}for(const T of g){const C=T.targetId;if(!T.fromCache){const M=E.Ms.get(C),B=M.snapshotVersion,X=M.withLastLimboFreeSnapshotVersion(B);E.Ms=E.Ms.insert(C,X)}}})(s.localStore,u))}async function xD(i,e){const n=De(i);if(!n.currentUser.isEqual(e)){me(ig,"User change. New user:",e.toKey());const s=await BT(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((m=>{m.reject(new fe(se.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wu(n,s.Ls)}}function wD(i,e){const n=De(i),s=n.Au.get(e);if(s&&s.hu)return Be().add(s.key);{let o=Be();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const p=n.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function ix(i){const e=De(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_D.bind(null,e),e.Pu.H_=oD.bind(null,e.eventManager),e.Pu.yu=lD.bind(null,e.eventManager),e}function SD(i){const e=De(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ED.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bD.bind(null,e),e}class zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return NI(this.persistence,new AI,e.initialUser,this.serializer)}Cu(e){return new zT(Gp.mi,this.serializer)}Du(e){return new jI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zh.provider={build:()=>new zh};class AD extends zh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$e(this.persistence.referenceDelegate instanceof Lh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new hI(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new zT((s=>Lh.mi(s,n)),this.serializer)}}class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=xD.bind(null,this.syncEngine),await iD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aD})()}createDatastore(e){const n=od(e.databaseInfo.databaseId),s=(function(u){return new BI(u)})(e.databaseInfo);return(function(u,h,p,m){return new GI(u,h,p,m)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,p){return new YI(s,o,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>gE(this.syncEngine,n,0)),(function(){return cE.v()?new cE:new PI})())}createSyncEngine(e,n){return(function(o,u,h,p,m,g,E){const T=new dD(o,u,h,p,m,g);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=De(o);me(ya,"RemoteStore shutting down."),u.Ea.add(5),await xu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class CD{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{me(xs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(me(xs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Zp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Vm(i,e){i.asyncQueue.verifyOperationInProgress(),me(xs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await BT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function vE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await RD(i);me(xs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>dE(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>dE(e.remoteStore,o))),i._onlineComponents=e}async function RD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(xs,"Using user provided OfflineComponentProvider");try{await Vm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;bo("Error using user provided cache. Falling back to memory cache: "+n),await Vm(i,new zh)}}else me(xs,"Using default OfflineComponentProvider"),await Vm(i,new AD(void 0));return i._offlineComponents}async function sx(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(xs,"Using user provided OnlineComponentProvider"),await vE(i,i._uninitializedComponentsProvider._online)):(me(xs,"Using default OnlineComponentProvider"),await vE(i,new cp))),i._onlineComponents}function ND(i){return sx(i).then((e=>e.syncEngine))}async function Bh(i){const e=await sx(i),n=e.eventManager;return n.onListen=fD.bind(null,e.syncEngine),n.onUnlisten=gD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yD.bind(null,e.syncEngine),n}function ID(i,e,n={}){const s=new gi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,m,g){const E=new ag({next:C=>{E.Nu(),h.enqueueAndForget((()=>tg(u,T)));const M=C.docs.has(p);!M&&C.fromCache?g.reject(new fe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&C.fromCache&&m&&m.source==="server"?g.reject(new fe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(C)},error:C=>g.reject(C)}),T=new rg(td(p.path),E,{includeMetadataChanges:!0,qa:!0});return eg(u,T)})(await Bh(i),i.asyncQueue,e,n,s))),s.promise}function DD(i,e,n={}){const s=new gi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,m,g){const E=new ag({next:C=>{E.Nu(),h.enqueueAndForget((()=>tg(u,T))),C.fromCache&&m.source==="server"?g.reject(new fe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(C)},error:C=>g.reject(C)}),T=new rg(p,E,{includeMetadataChanges:!0,qa:!0});return eg(u,T)})(await Bh(i),i.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firestore.googleapis.com",EE=!0;class bE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ox,this.ssl=EE}else this.host=e.host,this.ssl=e.ssl??EE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uI)throw new fe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ax(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cd{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new PR;switch(s.type){case"firstParty":return new BR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=_E.get(n);s&&(me("ComponentProvider","Removing Datastore"),_E.delete(n),s.terminate())})(this),Promise.resolve()}}function kD(i,e,n,s={}){var g;i=En(i,cd);const o=Io(e),u=i._getSettings(),h={...u,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;o&&(nb(`https://${p}`),rb("Firestore",!0)),u.host!==ox&&u.host!==p&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...u,host:p,ssl:o,emulatorOptions:s};if(!da(m,h)&&(i._setSettings(m),s.mockUserToken)){let E,T;if(typeof s.mockUserToken=="string")E=s.mockUserToken,T=sn.MOCK_USER;else{E=Y1(s.mockUserToken,(g=i._app)==null?void 0:g.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new fe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new sn(C)}i._authCredentials=new LR(new Jb(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ta(this.firestore,e,this._query)}}class vt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(_u(n,vt._jsonSchema))return new vt(e,s||null,new be(at.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:Pt("string",vt._jsonSchemaVersion),referencePath:Pt("string")};class ys extends Ta{constructor(e,n,s){super(e,n,td(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new be(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function rt(i,e,...n){if(i=Bt(i),Wb("collection","path",e),i instanceof cd){const s=at.fromString(e,...n);return M_(s),new ys(i,null,s)}{if(!(i instanceof vt||i instanceof ys))throw new fe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return M_(s),new ys(i.firestore,null,s)}}function mt(i,e,...n){if(i=Bt(i),arguments.length===1&&(e=Op.newId()),Wb("doc","path",e),i instanceof cd){const s=at.fromString(e,...n);return O_(s),new vt(i,null,new be(s))}{if(!(i instanceof vt||i instanceof ys))throw new fe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(e,...n));return O_(s),new vt(i.firestore,i instanceof ys?i.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="AsyncQueue";class xE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new HT(this,"async_queue_retry"),this._c=()=>{const s=Mm();s&&me(TE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new gi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vo(e))throw e;me(TE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ei("INTERNAL UNHANDLED ERROR: ",wE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Wp.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:wE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function wE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Ti extends cd{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new xE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xE(e),this._firestoreClient=void 0,await e}}}function OD(i,e){const n=typeof i=="object"?i:ob(),s=typeof i=="string"?i:Dh,o=xp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=G1("firestore");u&&kD(o,...u)}return o}function hd(i){if(i._terminated)throw new fe(se.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||MD(i),i._firestoreClient}function MD(i){var s,o,u;const e=i._freezeSettings(),n=(function(p,m,g,E){return new iN(p,m,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,ax(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new CD(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(p){const m=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(m),_online:m}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(tn.fromBase64String(e))}catch(n){throw new fe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_u(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Pt("string",Kn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(_u(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:Pt("string",Br._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_u(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new qr(e.vectorValues);throw new fe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Pt("string",qr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=/^__.*__$/;class jD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new bu(e,this.data,n,this.fieldTransforms)}}class lx{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ux(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:i})}}class lg{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ux(this.Ac)&&VD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class PD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||od(e)}Cc(e,n,s,o=!1){return new lg({Ac:e,methodName:n,Dc:s,path:en.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(i){const e=i._freezeSettings(),n=od(i._databaseId);return new PD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function cx(i,e,n,s,o,u={}){const h=i.Cc(u.merge||u.mergeFields?2:0,e,n,o);ug("Data must be an object, but it was:",h,s);const p=hx(s,h);let m,g;if(u.merge)m=new Dn(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const C=hp(e,T,n);if(!h.contains(C))throw new fe(se.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);fx(E,C)||E.push(C)}m=new Dn(E),g=h.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,g=h.fieldTransforms;return new jD(new _n(p),m,g)}class md extends og{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}function LD(i,e,n,s){const o=i.Cc(1,e,n);ug("Data must be an object, but it was:",o,s);const u=[],h=_n.empty();Cs(s,((m,g)=>{const E=cg(e,m,n);g=Bt(g);const T=o.yc(E);if(g instanceof md)u.push(E);else{const C=Su(g,T);C!=null&&(u.push(E),h.set(E,C))}}));const p=new Dn(u);return new lx(h,p,o.fieldTransforms)}function UD(i,e,n,s,o,u){const h=i.Cc(1,e,n),p=[hp(e,s,n)],m=[o];if(u.length%2!=0)throw new fe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<u.length;C+=2)p.push(hp(e,u[C])),m.push(u[C+1]);const g=[],E=_n.empty();for(let C=p.length-1;C>=0;--C)if(!fx(g,p[C])){const M=p[C];let B=m[C];B=Bt(B);const X=h.yc(M);if(B instanceof md)g.push(M);else{const U=Su(B,X);U!=null&&(g.push(M),E.set(M,U))}}const T=new Dn(g);return new lx(E,T,h.fieldTransforms)}function zD(i,e,n,s=!1){return Su(n,i.Cc(s?4:3,e))}function Su(i,e){if(dx(i=Bt(i)))return ug("Unsupported field value:",e,i),hx(i,e);if(i instanceof og)return(function(s,o){if(!ux(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const p of s){let m=Su(p,o.wc(h));m==null&&(m={nullValue:"NULL_VALUE"}),u.push(m),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=Bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return CN(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=it.fromDate(s);return{timestampValue:Ph(o.serializer,u)}}if(s instanceof it){const u=new it(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ph(o.serializer,u)}}if(s instanceof Br)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kn)return{bytesValue:kT(o.serializer,s._byteString)};if(s instanceof vt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Hp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof qr)return(function(h,p){return{mapValue:{fields:{[oT]:{stringValue:lT},[kh]:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Up(p.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Jh(s)}`)})(i,e)}function hx(i,e){const n={};return tT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(i,((s,o)=>{const u=Su(o,e.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function dx(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof it||i instanceof Br||i instanceof Kn||i instanceof vt||i instanceof og||i instanceof qr)}function ug(i,e,n){if(!dx(n)||!Zb(n)){const s=Jh(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function hp(i,e,n){if((e=Bt(e))instanceof dd)return e._internalPath;if(typeof e=="string")return cg(i,e);throw qh("Field path arguments must be of type string or ",i,!1,void 0,n)}const BD=new RegExp("[~\\*/\\[\\]]");function cg(i,e,n){if(e.search(BD)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new dd(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function qh(i,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(u||h)&&(m+=" (found",u&&(m+=` in field ${s}`),h&&(m+=` in document ${o}`),m+=")"),new fe(se.INVALID_ARGUMENT,p+i+m)}function fx(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qD extends mx{data(){return super.data()}}function hg(i,e){return typeof e=="string"?cg(i,e):e instanceof dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dg{}class HD extends dg{}function FD(i,e,...n){let s=[];e instanceof dg&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((m=>m instanceof fg)).length,p=u.filter((m=>m instanceof pd)).length;if(h>1||h>0&&p>0)throw new fe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class pd extends HD{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new pd(e,n,s)}_apply(e){const n=this._parse(e);return gx(e._query,n),new Ta(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=fd(e.firestore);return(function(u,h,p,m,g,E,T){let C;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new fe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){CE(T,E);const B=[];for(const X of T)B.push(AE(m,u,X));C={arrayValue:{values:B}}}else C=AE(m,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||CE(T,E),C=zD(p,h,T,E==="in"||E==="not-in");return jt.create(g,E,C)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function GD(i,e,n){const s=e,o=hg("where",i);return pd._create(o,s,n)}class fg extends dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const p=u.getFlattenedFilters();for(const m of p)gx(h,m),h=ep(h,m)})(e._query,n),new Ta(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function AE(i,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new fe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gT(e)&&n.indexOf("/")!==-1)throw new fe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(at.fromString(n));if(!be.isDocumentKey(s))throw new fe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return q_(i,new be(s))}if(n instanceof vt)return q_(i,n._key);throw new fe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jh(n)}.`)}function CE(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gx(i,e){const n=(function(o,u){for(const h of o)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new fe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QD{convertValue(e,n="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Cs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){var s,o,u;const n=(u=(o=(s=e.fields)==null?void 0:s[kh].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>wt(h.doubleValue)));return new qr(n)}convertGeoPoint(e){return new Br(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ed(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=_s(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=at.fromString(e);$e(LT(s),9688,{name:e});const o=new su(s.get(1),s.get(3)),u=new be(s.popFirst(5));return o.isEqual(n)||Ei(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Ql{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ca extends mx{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(hg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ca._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",ca._jsonSchema={type:Pt("string",ca._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Eh extends ca{data(e={}){return super.data(e)}}class ha{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ql(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Eh(this._firestore,this._userDataWriter,s.key,s,new Ql(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const m=new Eh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ql(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const m=new Eh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ql(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return p.type!==0&&(g=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),E=h.indexOf(p.doc.key)),{type:YD(p.type),doc:m,oldIndex:g,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ha._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(i){i=En(i,vt);const e=En(i.firestore,Ti);return ID(hd(e),i._key).then((n=>vx(e,i,n)))}ha._jsonSchemaVersion="firestore/querySnapshot/1.0",ha._jsonSchema={type:Pt("string",ha._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class mg extends QD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function Ut(i){i=En(i,Ta);const e=En(i.firestore,Ti),n=hd(e),s=new mg(e);return px(i._query),DD(n,i._query).then((o=>new ha(e,s,i,o)))}function pg(i,e,n){i=En(i,vt);const s=En(i.firestore,Ti),o=yx(i.converter,e);return gd(s,[cx(fd(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Xn.none())])}function Ns(i,e,n,...s){i=En(i,vt);const o=En(i.firestore,Ti),u=fd(o);let h;return h=typeof(e=Bt(e))=="string"||e instanceof dd?UD(u,"updateDoc",i._key,e,n,s):LD(u,"updateDoc",i._key,e),gd(o,[h.toMutation(i._key,Xn.exists(!0))])}function oa(i){return gd(En(i.firestore,Ti),[new zp(i._key,Xn.none())])}function uu(i,e){const n=En(i.firestore,Ti),s=mt(i),o=yx(i.converter,e);return gd(n,[cx(fd(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Xn.exists(!1))]).then((()=>s))}function cu(i,...e){var m,g,E;i=Bt(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||SE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(SE(e[s])){const T=e[s];e[s]=(m=T.next)==null?void 0:m.bind(T),e[s+1]=(g=T.error)==null?void 0:g.bind(T),e[s+2]=(E=T.complete)==null?void 0:E.bind(T)}let u,h,p;if(i instanceof vt)h=En(i.firestore,Ti),p=td(i._key.path),u={next:T=>{e[s]&&e[s](vx(h,i,T))},error:e[s+1],complete:e[s+2]};else{const T=En(i,Ta);h=En(T.firestore,Ti),p=T._query;const C=new mg(h);u={next:M=>{e[s]&&e[s](new ha(h,C,T,M))},error:e[s+1],complete:e[s+2]},px(i._query)}return(function(C,M,B,X){const U=new ag(X),Y=new rg(M,U,B);return C.asyncQueue.enqueueAndForget((async()=>eg(await Bh(C),Y))),()=>{U.Nu(),C.asyncQueue.enqueueAndForget((async()=>tg(await Bh(C),Y)))}})(hd(h),p,o,u)}function gd(i,e){return(function(s,o){const u=new gi;return s.asyncQueue.enqueueAndForget((async()=>vD(await ND(s),o,u))),u.promise})(hd(i),e)}function vx(i,e,n){const s=n.docs.get(e._key),o=new mg(i);return new ca(i,o,e._key,s,new Ql(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Oo=o})(Do),Eo(new fa("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),p=new Ti(new UR(s.getProvider("auth-internal")),new qR(h,s.getProvider("app-check-internal")),(function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new fe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(g.options.projectId,E)})(h,o),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ps(N_,I_,e),ps(N_,I_,"esm2020")})();const $D={apiKey:"AIzaSyC_siLrELAuTt3VOx2JxzcNbT1maHV9jLk",authDomain:"training-portal-aistudio.firebaseapp.com",projectId:"training-portal-aistudio",storageBucket:"training-portal-aistudio.firebasestorage.app",messagingSenderId:"1046304865031",appId:"1:1046304865031:web:2d82a09eba80d21d2a23a2",measurementId:"G-L8QQR7766D"},_x=ab($D),Hh=VR(_x),Se=OD(_x),KD=async i=>{const e=["quiz","survey"];for(const g of e){const E=rt(Se,`courses/${i}/${g}`),C=(await Ut(E)).docs.map(M=>oa(M.ref));await Promise.all(C)}const s=(await Ut(rt(Se,"users"))).docs.map(async g=>{const E=mt(Se,`users/${g.id}/enrollments/${i}`);if((await Co(E)).exists())return oa(E)});await Promise.all(s);const o=rt(Se,`chat_rooms/${i}/messages`),h=(await Ut(o)).docs.map(g=>oa(g.ref));await Promise.all(h);const p=mt(Se,`chat_rooms/${i}`);(await Co(p)).exists()&&await oa(p),await oa(mt(Se,`courses/${i}`))},St=({size:i=24,className:e=""})=>y.jsxs("svg",{className:`animate-spin text-primary-500 dark:text-primary-400 ${e}`,style:{width:i,height:i},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Au=()=>y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-50/80 dark:bg-gray-900/80",children:y.jsx(St,{size:48})}),Ex=P.createContext(void 0),Gr=()=>{const i=P.useContext(Ex);if(!i)throw new Error("useAuthContext must be used within an AuthProvider");return i},XD=({children:i})=>{const[e,n]=P.useState(null),[s,o]=P.useState(null),[u,h]=P.useState(!0);P.useEffect(()=>{const g=x2(Hh,E=>{n(E),E||(o(null),h(!1))});return()=>g()},[]),P.useEffect(()=>{let g=()=>{};if(e){h(!0);const E=mt(Se,`users/${e.uid}`);g=cu(E,T=>{if(T.exists()){const C=T.data();o(C)}else o(null);h(!1)})}else h(!1);return()=>g()},[e]);const p=P.useCallback(async()=>{await w2(Hh),n(null),o(null)},[]),m={currentUser:e,userProfile:s,isLoading:u,logout:p,setUserProfile:o};return u?y.jsx(Au,{}):y.jsx(Ex.Provider,{value:m,children:i})},JD={"header.title":{en:"Training Portal",th:""},"header.dashboard":{en:"Dashboard",th:""},"header.adminDashboard":{en:"Admin Dashboard",th:""},"header.yourProfile":{en:"Your Profile",th:""},"header.signOut":{en:"Sign out",th:""},"login.title":{en:"Sign in to your account",th:""},"login.nationalIdPlaceholder":{en:"National ID (13 digits)",th:" (13 )"},"login.dobLabel":{en:"Date of Birth",th:""},"login.button":{en:"Sign in / Register",th:" / "},"login.error.bothRequired":{en:"Please enter both National ID and Date of Birth.",th:""},"login.error.invalidCredentials":{en:"Invalid credentials. Please check your National ID or Date of Birth.",th:" "},"login.error.weakPassword":{en:"Date of Birth must be at least 6 characters long.",th:" 6 "},"login.error.signupError":{en:"An unexpected error occurred during sign up. Please try again.",th:" "},"login.error.loginError":{en:"An unexpected error occurred during login. Please try again.",th:" "},"login.error.invalidNationalIdFormat":{en:"National ID must be 13 digits.",th:" 13 "},"login.error.invalidNationalIdChecksum":{en:"The National ID provided is incorrect.",th:""},"login.confirmRegistration.title":{en:"Confirm Registration",th:""},"login.confirmRegistration.message":{en:"This appears to be your first time. Please re-enter your Date of Birth to create your account.",th:" "},"login.confirmRegistration.confirmButton":{en:"Confirm & Register",th:""},"login.confirmRegistration.cancelButton":{en:"Cancel",th:""},"login.confirmRegistration.error.mismatch":{en:"The Date of Birth does not match.",th:""},"dashboard.title":{en:"Dashboard",th:""},"dashboard.enrolledCourses":{en:"Enrolled Courses",th:""},"dashboard.noEnrolledCourses":{en:"You are not enrolled in any courses yet.",th:" "},"dashboard.availableCourses":{en:"Available Courses",th:""},"dashboard.noAvailableCourses":{en:"No new courses available at the moment.",th:""},"dashboard.goToCourse":{en:"Go to Course",th:""},"dashboard.enrollNow":{en:"Enroll Now",th:""},"dashboard.progress":{en:"Progress",th:""},"dashboard.progressComplete":{en:"{progress}% Complete",th:" {progress}%"},"profile.title":{en:"Your Profile",th:""},"profile.incompleteMessage":{en:"Please complete your profile to access the training courses.",th:""},"profile.updateMessage":{en:"Keep your personal information up to date.",th:""},"profile.prefix":{en:"Prefix",th:""},"profile.select":{en:"Select...",th:"..."},"profile.other":{en:"Other (Please specify)",th:" ()"},"profile.otherPlaceholder":{en:"Please specify",th:""},"prefix.mr":{en:"Mr.",th:""},"prefix.mrs":{en:"Mrs.",th:""},"prefix.ms":{en:"Ms.",th:""},"prefix.dr":{en:"Dr.",th:"."},"profile.name":{en:"Name",th:""},"profile.surname":{en:"Surname",th:""},"profile.position":{en:"Position",th:""},"profile.organization":{en:"Organization/Cooperative",th:"/"},"profile.address":{en:"Address",th:" ()"},"profile.district":{en:"Sub-district (Tambon)",th:""},"profile.amphoe":{en:"District (Amphoe)",th:""},"profile.province":{en:"Province",th:""},"province.krabi":{en:"Krabi",th:""},"province.chumphon":{en:"Chumphon",th:""},"province.trang":{en:"Trang",th:""},"province.nakhonsithammarat":{en:"Nakhon Si Thammarat",th:""},"province.narathiwat":{en:"Narathiwat",th:""},"province.pattani":{en:"Pattani",th:""},"province.phangnga":{en:"Phang Nga",th:""},"province.phatthalung":{en:"Phatthalung",th:""},"province.phuket":{en:"Phuket",th:""},"province.yala":{en:"Yala",th:""},"province.ranong":{en:"Ranong",th:""},"province.songkhla":{en:"Songkhla",th:""},"province.satun":{en:"Satun",th:""},"province.suratthani":{en:"Surat Thani",th:""},"profile.education":{en:"Education Level",th:""},"education.primary":{en:"Primary School",th:""},"education.secondary":{en:"Secondary School",th:""},"education.vocational":{en:"Vocational Certificate",th:"."},"education.higherVocational":{en:"Higher Vocational Certificate",th:"."},"education.bachelors":{en:"Bachelor's Degree",th:""},"education.masters":{en:"Master's Degree",th:""},"profile.phone":{en:"Phone",th:""},"profile.contactEmail":{en:"Contact Email",th:""},"profile.error.requiredFields":{en:"Please fill in all required fields: Name, Surname, Position, Organization, Address, Sub-district, District, and Province.",th:": , , , , , , , "},"profile.success":{en:"Profile updated successfully!",th:"!"},"profile.error.updateFailed":{en:"Failed to update profile. Please try again.",th:" "},"profile.saveButton":{en:"Save Profile",th:""},"admin.dashboard.title":{en:"Admin Dashboard",th:""},"admin.dashboard.totalUsers":{en:"Total Users",th:""},"admin.dashboard.totalCourses":{en:"Total Courses",th:""},"admin.dashboard.exportUsers":{en:"Export All Users (CSV)",th:" (CSV)"},"admin.dashboard.manageUsers":{en:"Manage Users",th:""},"admin.dashboard.courses":{en:"All Courses",th:""},"admin.dashboard.assignedCourses":{en:"Assigned Courses",th:""},"admin.dashboard.createCourse":{en:"Create New Course",th:""},"admin.dashboard.manage":{en:"Manage",th:""},"admin.dashboard.delete":{en:"Delete",th:""},"admin.dashboard.deleteConfirmTitle":{en:"Confirm Deletion",th:""},"admin.dashboard.deleteConfirmMessage":{en:"Are you sure you want to delete the course '{courseTitle}'? This action cannot be undone.",th:" '{courseTitle}'? "},"admin.dashboard.deleteConfirmButton":{en:"Yes, Delete",th:", "},"admin.dashboard.deleteCancelButton":{en:"Cancel",th:""},"admin.dashboard.noCourses":{en:"No courses created yet.",th:""},"admin.dashboard.noAssignedCourses":{en:"You have not been assigned to any courses.",th:""},"admin.dashboard.progressSummaryTitle":{en:"User Progress Summary",th:""},"admin.dashboard.courseTitle":{en:"Course Title",th:""},"admin.dashboard.enrolled":{en:"Enrolled",th:""},"admin.dashboard.notStarted":{en:"Not Started",th:""},"admin.dashboard.inProgress":{en:"In Progress",th:""},"admin.dashboard.completed":{en:"Completed",th:""},"admin.dashboard.exportReport":{en:"Export Report",th:""},"admin.dashboard.exporting":{en:"Exporting...",th:"..."},"admin.dashboard.noEnrollmentsToExport":{en:"There are no enrollments for this course to export.",th:""},"admin.dashboard.exportError":{en:"An error occurred while exporting the report.",th:""},"admin.dashboard.enrollmentStatus":{en:"Enrollment",th:""},"admin.dashboard.enrollmentOpen":{en:"Open",th:""},"admin.dashboard.enrollmentClosed":{en:"Closed",th:""},"userManagement.title":{en:"User Management",th:""},"userManagement.back":{en:" Back to Dashboard",th:" "},"userManagement.table.name":{en:"Name",th:""},"userManagement.table.email":{en:"Email",th:""},"userManagement.table.role":{en:"Role",th:""},"userManagement.role.user":{en:"User",th:""},"userManagement.role.subAdmin":{en:"Sub-Admin",th:""},"userManagement.role.admin":{en:"Admin",th:""},"courseEditor.createTitle":{en:"Create New Course",th:""},"courseEditor.editTitle":{en:"Edit Course",th:""},"courseEditor.back":{en:" Back to Dashboard",th:" "},"courseEditor.titleLabel":{en:"Title",th:""},"courseEditor.descriptionLabel":{en:"Description",th:""},"courseEditor.passPercentageLabel":{en:"Pass Percentage (%)",th:" (%)"},"courseEditor.postTestStatusLabel":{en:"Post-Test Status",th:""},"courseEditor.postTestActive":{en:"Active",th:""},"courseEditor.postTestInactive":{en:"Inactive",th:""},"courseEditor.enrollmentStatusLabel":{en:"Enrollment Status",th:""},"courseEditor.enrollmentOpen":{en:"Open for Enrollment",th:""},"courseEditor.enrollmentClosed":{en:"Closed for Enrollment",th:""},"courseEditor.contentLabel":{en:"Course Content",th:""},"courseEditor.contentHelp":{en:"Use the rich text editor below to format your course content.",th:""},"courseEditor.saveButton":{en:"Save Course",th:""},"courseEditor.tab.general":{en:"General",th:""},"courseEditor.tab.quiz":{en:"Quiz",th:""},"courseEditor.tab.survey":{en:"Survey",th:""},"courseEditor.tab.chat":{en:"Chat",th:""},"courseEditor.tab.certificate":{en:"Certificate",th:""},"courseEditor.saveFirstMessage":{en:"Please save the course details first to manage this section.",th:""},"courseEditor.assignedAdmins.title":{en:"Assigned Sub-Admins",th:""},"courseEditor.assignedAdmins.none":{en:"No sub-admins available.",th:""},"courseEditor.certificate.title":{en:"Certificate Configuration",th:""},"courseEditor.certificate.enable":{en:"Enable Certificate for this Course",th:""},"courseEditor.certificate.templateUrl":{en:"Certificate Template URL (Image)",th:"URL "},"courseEditor.certificate.templateUrlHelp":{en:"Link to a background image for the certificate.",th:""},"courseEditor.certificate.namePosition":{en:"Name Position",th:""},"courseEditor.certificate.datePosition":{en:"Completion Date Position",th:""},"courseEditor.certificate.x_axis":{en:"X (from left)",th:"X ()"},"courseEditor.certificate.y_axis":{en:"Y (from top)",th:"Y ()"},"courseEditor.certificate.showDate":{en:"Show Completion Date on Certificate",th:""},"courseEditor.certificate.showPrefix":{en:"Show Prefix on Certificate",th:""},"courseEditor.certificate.previewTitle":{en:"Live Preview",th:""},"courseEditor.certificate.previewLoading":{en:"Loading preview...",th:"..."},"courseEditor.certificate.previewNoTemplate":{en:"Enter a valid template URL to see a preview.",th:" URL "},"courseEditor.certificate.unit_px":{en:"px",th:"px"},"courseEditor.certificate.unit_percent":{en:"%",th:"%"},"course.content":{en:"Course Content",th:""},"course.discussion":{en:"Discussion",th:""},"course.sendMessage":{en:"Send",th:""},"course.messagePlaceholder":{en:"Type a message...",th:"..."},"course.progress":{en:"Your Progress",th:""},"course.stepsCompleted":{en:"steps completed",th:""},"course.preTest":{en:"Pre-Test",th:""},"course.contentStep":{en:"Content",th:""},"course.postTest":{en:"Post-Test",th:""},"course.survey":{en:"Survey",th:""},"course.startPreTest":{en:"Start Pre-Test",th:""},"course.markAsRead":{en:"Mark Content as Read",th:""},"course.startPostTest":{en:"Start Post-Test",th:""},"course.postTestNotAvailable":{en:"Post-Test is not yet available",th:""},"course.startSurvey":{en:"Start Survey",th:""},"course.completedMessage":{en:"Congratulations! You have completed this course.",th:"! "},"course.notFound":{en:"Course or enrollment data not found.",th:""},"course.noContent":{en:"No content available.",th:""},"course.noMessages":{en:"No messages yet. Be the first to start the conversation!",th:" !"},"course.downloadCertificate":{en:"Download Certificate",th:""},"course.generatingCertificate":{en:"Generating...",th:"..."},"quiz.cancel":{en:"Cancel",th:""},"quiz.title":{en:"Quiz",th:""},"quiz.submit":{en:"Submit",th:""},"survey.title":{en:"Course Evaluation Survey",th:""},"survey.submit":{en:"Submit Survey",th:""},"quizEditor.title":{en:"Quiz Manager",th:""},"surveyEditor.title":{en:"Survey Manager",th:""},"quizEditor.addQuestion":{en:"Add Question",th:""},"quizEditor.addOption":{en:"Add Option",th:""},"quizEditor.confirmDelete":{en:"Are you sure you want to delete this question?",th:""},"surveyEditor.confirmDelete":{en:"Are you sure you want to delete this question?",th:""},"quizEditor.error.minOptions":{en:"A question must have at least two options.",th:""},"quizEditor.saveChanges":{en:"Save Changes",th:""},"notFound.title":{en:"Page Not Found",th:""},"notFound.message":{en:"Sorry, we couldnt find the page youre looking for.",th:" "},"notFound.goHome":{en:"Go back home",th:""},"report.header.userId":{en:"User ID",th:""},"report.header.email":{en:"Email",th:""},"report.header.contactEmail":{en:"Contact Email",th:""},"report.header.role":{en:"Role",th:""},"report.header.prefix":{en:"Prefix",th:""},"report.header.name":{en:"Name",th:""},"report.header.surname":{en:"Surname",th:""},"report.header.birthYear":{en:"Birth Year",th:""},"report.header.position":{en:"Position",th:""},"report.header.organization":{en:"Organization",th:""},"report.header.address":{en:"Address",th:""},"report.header.district":{en:"Sub-district",th:""},"report.header.amphoe":{en:"District",th:""},"report.header.province":{en:"Province",th:""},"report.header.education":{en:"Education",th:""},"report.header.phone":{en:"Phone",th:""},"report.header.enrollmentStatus":{en:"Enrollment Status",th:""},"report.header.progress":{en:"Progress",th:""},"report.header.postTestScore":{en:"Post-Test Score",th:""},"report.header.preTest":{en:"Pre-Test",th:""},"report.header.contentViewed":{en:"Content Viewed",th:""},"report.header.postTest":{en:"Post-Test",th:""},"report.header.survey":{en:"Survey",th:""},"report.status.yes":{en:"Yes",th:""},"report.status.no":{en:"No",th:""},"notification.error.fetchCourse":{en:"Failed to fetch course data.",th:""},"notification.error.sendMessage":{en:"Failed to send message.",th:""},"notification.success.preTest":{en:"Pre-test submitted successfully!",th:"!"},"notification.success.contentViewed":{en:"Content marked as read!",th:"!"},"notification.success.postTestPass":{en:"Congratulations, you passed! Your score: {score}%",th:" ! : {score}%"},"notification.error.postTestFail":{en:"Please try again. Your score: {score}%",th:" : {score}%"},"notification.success.survey":{en:"Thank you for your feedback!",th:"!"},"notification.error.requiredFields":{en:"Please fill in all required fields.",th:""},"notification.success.courseCreated":{en:"Course created successfully!",th:"!"},"notification.success.courseUpdated":{en:"Course updated successfully!",th:"!"},"notification.error.saveCourse":{en:"Failed to save course.",th:""},"notification.error.courseNotFound":{en:"Course not found.",th:""},"notification.error.fetchQuestions":{en:"Failed to fetch questions.",th:""},"notification.error.addQuestion":{en:"Failed to add question.",th:""},"notification.success.deleteQuestion":{en:"Question deleted.",th:""},"notification.error.deleteQuestion":{en:"Failed to delete question.",th:""},"notification.error.updateQuestion":{en:"Failed to update question.",th:""},"notification.success.saveQuestions":{en:"Questions saved successfully!",th:"!"},"notification.error.saveQuestions":{en:"Failed to save questions.",th:""},"notification.success.courseDeleted":{en:"Course deleted successfully.",th:""},"notification.error.courseDeletionFailed":{en:"Failed to delete course.",th:""},"notification.success.enrolled":{en:"Successfully enrolled in {courseTitle}!",th:" {courseTitle} !"},"notification.success.enrollAndRedirect":{en:"Enrolled successfully! Please complete your profile to proceed.",th:"! "},"notification.error.enrollFailed":{en:"Failed to enroll in the course. Please try again.",th:" "},"notification.success.userRoleUpdated":{en:"User's role updated successfully.",th:""},"notification.error.userRoleUpdateFailed":{en:"Failed to update user's role.",th:""},"notification.error.certGeneration":{en:"Could not generate certificate. The template might be invalid.",th:" "},"notification.success.enrollmentStatusUpdated":{en:"Enrollment status updated successfully.",th:""},"notification.error.enrollmentStatusUpdateFailed":{en:"Failed to update enrollment status.",th:""},"chat.replyingTo":{en:"Replying to",th:""},"chat.replyAction":{en:"Reply",th:""}},bx=P.createContext(void 0),Qt=()=>{const i=P.useContext(bx);if(!i)throw new Error("useLanguage must be used within a LanguageProvider");return i},WD=({children:i})=>{const[e,n]=P.useState(()=>{if(typeof window<"u"){const h=localStorage.getItem("language");if(h==="th"||h==="en")return h}return"th"});P.useEffect(()=>{localStorage.setItem("language",e)},[e]);const s=()=>{n(h=>h==="en"?"th":"en")},o=P.useCallback(h=>{const p=JD[h];return p?p[e]:(console.warn(`Translation key not found: ${h}`),h)},[e]),u={language:e,toggleLanguage:s,t:o};return y.jsx(bx.Provider,{value:u,children:i})},ZD=()=>{const{currentUser:i,userProfile:e,isLoading:n}=Gr();if(n)return y.jsx(Au,{});if(i){const s=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="sub-admin"?"/admin":"/";return y.jsx(vp,{to:s,replace:!0})}return y.jsx(Gh,{})},jm=({children:i})=>{const{userProfile:e,isLoading:n}=Gr();return n?y.jsx(Au,{}):!e||e.role!=="user"?y.jsx(vp,{to:"/login",replace:!0}):i?y.jsx(y.Fragment,{children:i}):y.jsx(Gh,{})},e4=()=>{const{userProfile:i,isLoading:e}=Gr();return e?y.jsx(Au,{}):!i||i.role!=="admin"&&i.role!=="sub-admin"?y.jsx(vp,{to:"/",replace:!0}):y.jsx(Gh,{})},t4=()=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("circle",{cx:"12",cy:"12",r:"5"}),y.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),y.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),y.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),y.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),y.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),y.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),y.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),y.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),n4=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:y.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),r4=()=>{const[i,e]=P.useState(()=>typeof window<"u"?localStorage.theme==="dark":!1);P.useEffect(()=>{i?(document.documentElement.classList.add("dark"),localStorage.theme="dark"):(document.documentElement.classList.remove("dark"),localStorage.theme="light")},[i]);const n=()=>{e(s=>!s)};return y.jsx("button",{onClick:n,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500","aria-label":"Toggle theme",children:i?y.jsx(t4,{}):y.jsx(n4,{})})},i4=()=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("circle",{cx:"12",cy:"12",r:"10"}),y.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),y.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),s4=()=>{const{language:i,toggleLanguage:e}=Qt();return y.jsxs("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 relative","aria-label":"Toggle language",children:[y.jsx(i4,{}),y.jsx("span",{className:"absolute bottom-0 right-[-2px] block h-4 w-5 text-xs font-bold bg-gray-200 dark:bg-gray-600 rounded-sm leading-tight",children:i.toUpperCase()})]})},a4=()=>{const{currentUser:i,userProfile:e,logout:n}=Gr(),{t:s}=Qt(),o=Fr(),[u,h]=P.useState(!1),p=async()=>{await n(),o("/login")},m=({to:g,children:E})=>y.jsx(ua,{to:g,className:"text-gray-600 dark:text-gray-300 hover:text-primary-500 dark:hover:text-primary-400 px-3 py-2 rounded-md text-sm font-medium",children:E});return y.jsx("header",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-md shadow-sm sticky top-0 z-40",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsxs(ua,{to:(e==null?void 0:e.role)==="admin"?"/admin":"/",className:"flex-shrink-0 flex items-center",children:[y.jsx("img",{className:"h-10 w-auto",src:"/img/logo.png",alt:"Logo"}),y.jsx("span",{className:"ml-3 text-xl font-bold text-gray-800 dark:text-gray-200",children:s("header.title")})]}),y.jsx("nav",{className:"hidden md:block ml-10",children:y.jsxs("div",{className:"flex items-baseline space-x-4",children:[i&&(e==null?void 0:e.role)==="user"&&y.jsx(m,{to:"/",children:s("header.dashboard")}),i&&(e==null?void 0:e.role)==="admin"&&y.jsx(m,{to:"/admin",children:s("header.adminDashboard")})]})})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(s4,{}),y.jsx(r4,{})]}),i&&e&&y.jsxs("div",{className:"ml-4 relative",children:[y.jsx("div",{children:y.jsxs("button",{onClick:()=>h(!u),className:"max-w-xs bg-gray-100 dark:bg-gray-700 rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-gray-700 focus:ring-primary-500",id:"user-menu","aria-haspopup":"true",children:[y.jsx("span",{className:"sr-only",children:"Open user menu"}),y.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-500 flex items-center justify-center text-white font-bold",children:e.name?e.name.charAt(0):e.email.charAt(0).toUpperCase()})]})}),u&&y.jsxs("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu",children:[y.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-200 border-b dark:border-gray-600",children:[y.jsx("p",{className:"font-semibold",children:e.name||"User"}),y.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),e.role==="user"&&y.jsx(ua,{to:"/profile",onClick:()=>h(!1),className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:s("header.yourProfile")}),y.jsx("button",{onClick:p,className:"w-full text-left block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:s("header.signOut")})]})]})]})]})})})},o4=({isOpen:i,onClose:e,onConfirm:n,isLoading:s,confirmPassword:o,setConfirmPassword:u,error:h})=>{const{t:p}=Qt();return i?y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:y.jsxs("form",{onSubmit:n,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-sm w-full",children:[y.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:p("login.confirmRegistration.title")}),y.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:p("login.confirmRegistration.message")}),y.jsxs("div",{className:"mt-4",children:[y.jsx("label",{htmlFor:"confirm-dob",className:"sr-only",children:p("login.dobLabel")}),y.jsx("input",{id:"confirm-dob",name:"confirm-dob",type:"date",required:!0,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:p("login.dobLabel"),value:o,onChange:m=>u(m.target.value)})]}),h&&y.jsx("p",{className:"text-red-500 text-sm text-center mt-2",children:h}),y.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[y.jsx("button",{type:"button",onClick:e,disabled:s,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50",children:p("login.confirmRegistration.cancelButton")}),y.jsxs("button",{type:"submit",disabled:s,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:bg-primary-400 flex items-center",children:[s&&y.jsx(St,{size:16,className:"mr-2"}),p("login.confirmRegistration.confirmButton")]})]})]})}):null},l4=i=>{if(!i||i.length!==13||!/^\d{13}$/.test(i))return!1;let e=0;for(let s=0;s<12;s++)e+=parseInt(i.charAt(s),10)*(13-s);return(11-e%11)%10===parseInt(i.charAt(12),10)},u4=()=>{const[i,e]=P.useState(""),[n,s]=P.useState(""),[o,u]=P.useState(""),[h,p]=P.useState(""),[m,g]=P.useState(!1);Fr();const{t:E}=Qt(),[T,C]=P.useState(!1),[M,B]=P.useState(""),[X,U]=P.useState(""),Y=()=>i?i.length!==13?(p(E("login.error.invalidNationalIdFormat")),!1):l4(i)?(p(""),!0):(p(E("login.error.invalidNationalIdChecksum")),!1):(p(""),!0),W=le=>{const oe=le.target.value.replace(/\D/g,"");oe.length>13||(e(oe),h&&p(""))},j=async le=>{if(le.preventDefault(),!Y())return;if(!i||!n){u(E("login.error.bothRequired"));return}g(!0),u("");const oe=`${i}@training-portal.app`,R=n.replace(/-/g,"");try{await E2(Hh,oe,R)}catch(A){A.code==="auth/invalid-credential"||A.code==="auth/user-not-found"?C(!0):u(E("login.error.loginError"))}finally{g(!1)}},$=async le=>{if(le.preventDefault(),g(!0),U(""),M!==n){U(E("login.confirmRegistration.error.mismatch")),g(!1);return}const oe=`${i}@training-portal.app`,R=n.replace(/-/g,"");try{const x=(await _2(Hh,oe,R)).user,N={uid:x.uid,email:x.email,role:"user",prefix:"",name:"",surname:"",position:"",organization:"",address:"",district:"",amphoe:"",province:"",education:"",phone:"",contactEmail:"",dob:n};await pg(mt(Se,`users/${x.uid}`),N),C(!1)}catch(A){A.code==="auth/email-already-in-use"?U(E("login.error.invalidCredentials")):U(E("login.error.signupError"))}finally{g(!1)}};return y.jsxs(y.Fragment,{children:[y.jsx(o4,{isOpen:T,onClose:()=>C(!1),onConfirm:$,isLoading:m,confirmPassword:M,setConfirmPassword:B,error:X}),y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"max-w-md w-full space-y-8 p-10 bg-white dark:bg-gray-800 shadow-xl rounded-2xl",children:[y.jsxs("div",{children:[y.jsx("img",{className:"mx-auto h-12 w-auto",src:"/img/logo.png",alt:E("header.title")}),y.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:E("login.title")})]}),y.jsxs("form",{className:"mt-8 space-y-6",onSubmit:j,children:[y.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"national-id",className:"sr-only",children:"National ID"}),y.jsx("input",{id:"national-id",name:"national-id",type:"text",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-t-md focus:outline-none focus:z-10 sm:text-sm ${h?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 dark:border-gray-600 focus:ring-primary-500 focus:border-primary-500"}`,placeholder:E("login.nationalIdPlaceholder"),value:i,onChange:W,onBlur:Y})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"dob",className:"sr-only",children:E("login.dobLabel")}),y.jsx("input",{id:"dob",name:"dob",type:"date",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 placeholder-gray-500 text-gray-900 dark:text-white bg-white dark:bg-gray-700 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:E("login.dobLabel"),value:n,onChange:le=>s(le.target.value)})]})]}),h&&y.jsx("p",{className:"text-red-500 text-sm text-left",children:h}),o&&y.jsx("p",{className:"text-red-500 text-sm text-center",children:o}),y.jsx("div",{children:y.jsx("button",{type:"submit",disabled:m,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:bg-primary-300",children:m?y.jsx(St,{size:20,className:"text-white"}):E("login.button")})})]})]})})]})},RE=({course:i,isEnrolled:e,onEnroll:n,isEnrolling:s,onGoToCourse:o,progressPercentage:u})=>{const{t:h}=Qt();return y.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden transition-transform hover:scale-105 flex flex-col",children:[y.jsxs("div",{className:"p-6 flex-grow",children:[y.jsx("h3",{className:"text-lg font-semibold text-primary-600 dark:text-primary-400",children:i.title}),y.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300 min-h-[40px]",children:i.description})]}),y.jsxs("div",{className:"px-6 pb-6",children:[e&&typeof u=="number"&&y.jsxs("div",{className:"mb-4",children:[y.jsxs("div",{className:"flex justify-between mb-1",children:[y.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:h("dashboard.progress")}),y.jsx("span",{className:"text-sm font-medium text-primary-700 dark:text-primary-300",children:h("dashboard.progressComplete").replace("{progress}",u.toString())})]}),y.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:y.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${u}%`}})})]}),e?y.jsx("button",{onClick:()=>o(i.id),className:"w-full text-center inline-block bg-green-600 text-white font-bold py-2 px-4 rounded hover:bg-green-700",children:h("dashboard.goToCourse")}):y.jsx("button",{onClick:()=>n(i),disabled:s===i.id,className:"w-full bg-primary-600 text-white font-bold py-2 px-4 rounded hover:bg-primary-700 disabled:bg-primary-400 flex items-center justify-center",children:s===i.id?y.jsx(St,{size:20}):h("dashboard.enrollNow")})]})]})},c4=()=>{const{currentUser:i,userProfile:e}=Gr(),{t:n}=Qt(),{showNotification:s}=wi(),o=Fr(),[u,h]=P.useState([]),[p,m]=P.useState({}),[g,E]=P.useState(!0),[T,C]=P.useState(null);P.useEffect(()=>{if(!i)return;(async()=>{E(!0);try{const j=(await Ut(rt(Se,"courses"))).docs.map(oe=>({id:oe.id,...oe.data()}));h(j);const $=rt(Se,`users/${i.uid}/enrollments`),le=cu($,oe=>{const R={};oe.docs.forEach(A=>{R[A.id]={courseId:A.id,...A.data()}}),m(R),E(!1)});return()=>le()}catch(W){console.error("Error fetching dashboard data:",W),E(!1)}})()},[i]);const M=async Y=>{if(i){C(Y.id);try{const W=mt(Se,`users/${i.uid}/enrollments/${Y.id}`);await pg(W,{status:"not-started",preTestCompleted:!1,contentViewed:!1,postTestCompleted:!1,postTestScore:null,surveyCompleted:!1,surveyResponses:null}),s(n("notification.success.enrollAndRedirect"),"success"),o("/profile")}catch(W){console.error("Error enrolling in course:",W),s(n("notification.error.enrollFailed"),"error")}finally{C(null)}}},B=Y=>{!(e!=null&&e.name)||!(e!=null&&e.surname)||!(e!=null&&e.position)||!(e!=null&&e.organization)||!(e!=null&&e.province)||!(e!=null&&e.address)||!(e!=null&&e.district)||!(e!=null&&e.amphoe)?(s(n("profile.incompleteMessage"),"error"),o("/profile")):o(`/course/${Y}`)},X=u.filter(Y=>p[Y.id]),U=u.filter(Y=>!p[Y.id]&&Y.isEnrollmentOpen!==!1);return g?y.jsx("div",{className:"flex justify-center items-center py-20",children:y.jsx(St,{size:48})}):y.jsxs("div",{className:"max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:n("dashboard.title")}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:n("dashboard.enrolledCourses")}),X.length>0?y.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(Y=>{const W=p[Y.id];if(!W)return null;const j=[W.preTestCompleted,W.contentViewed,W.postTestCompleted,W.surveyCompleted].filter(Boolean).length,$=Math.round(j/4*100);return y.jsx(RE,{course:Y,isEnrolled:!0,onEnroll:M,isEnrolling:T,onGoToCourse:B,progressPercentage:$},Y.id)})}):y.jsx("div",{className:"text-center py-10 bg-gray-100 dark:bg-gray-800 rounded-lg",children:y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n("dashboard.noEnrolledCourses")})})]}),y.jsxs("section",{className:"mt-12",children:[y.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:n("dashboard.availableCourses")}),U.length>0?y.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(Y=>y.jsx(RE,{course:Y,isEnrolled:!1,onEnroll:M,isEnrolling:T,onGoToCourse:B},Y.id))}):y.jsx("div",{className:"text-center py-10 bg-gray-100 dark:bg-gray-800 rounded-lg",children:y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n("dashboard.noAvailableCourses")})})]})]})},NE=[{key:"mr",value:"Mr."},{key:"mrs",value:"Mrs."},{key:"ms",value:"Ms."},{key:"dr",value:"Dr."}],IE=[{key:"krabi",value:"Krabi"},{key:"chumphon",value:"Chumphon"},{key:"trang",value:"Trang"},{key:"nakhonsithammarat",value:"Nakhon Si Thammarat"},{key:"narathiwat",value:"Narathiwat"},{key:"pattani",value:"Pattani"},{key:"phangnga",value:"Phang Nga"},{key:"phatthalung",value:"Phatthalung"},{key:"phuket",value:"Phuket"},{key:"yala",value:"Yala"},{key:"ranong",value:"Ranong"},{key:"songkhla",value:"Songkhla"},{key:"satun",value:"Satun"},{key:"suratthani",value:"Surat Thani"}],DE=[{key:"primary",value:"Primary School"},{key:"secondary",value:"Secondary School"},{key:"vocational",value:"Vocational Certificate"},{key:"higherVocational",value:"Higher Vocational Certificate"},{key:"bachelors",value:"Bachelor's Degree"},{key:"masters",value:"Master's Degree"}],h4=()=>{const{userProfile:i,currentUser:e,setUserProfile:n}=Gr(),{t:s}=Qt(),{showNotification:o}=wi(),u=Fr(),[h,p]=P.useState({prefix:"",name:"",surname:"",position:"",organization:"",address:"",district:"",amphoe:"",province:"",education:"",phone:"",contactEmail:""}),[m,g]=P.useState(""),[E,T]=P.useState(""),[C,M]=P.useState(""),[B,X]=P.useState(!1);P.useEffect(()=>{if(i){const $=(le,oe,R)=>{const A=i[le]||"";return A&&!oe.some(x=>x.key===A||x.value===A)?(R(A),"Other"):(R(""),A)};p({prefix:$("prefix",NE,g),name:i.name||"",surname:i.surname||"",position:i.position||"",organization:i.organization||"",address:i.address||"",district:i.district||"",amphoe:i.amphoe||"",province:$("province",IE,T),education:$("education",DE,M),phone:i.phone||"",contactEmail:i.contactEmail||""})}},[i]);const U=$=>{const{name:le,value:oe}=$.target;p(R=>({...R,[le]:oe})),oe!=="Other"&&(le==="prefix"&&g(""),le==="province"&&T(""),le==="education"&&M(""))},Y=async $=>{if($.preventDefault(),!e)return;const le=h.province==="Other"?E:h.province;if(!h.position||!h.name||!h.surname||!h.address||!h.district||!h.amphoe||!h.organization||!le){o(s("profile.error.requiredFields"),"error");return}X(!0);const oe={...h,prefix:h.prefix==="Other"?m:h.prefix,province:le,education:h.education==="Other"?C:h.education};try{const R=mt(Se,`users/${e.uid}`),A={...i,...oe};await Ns(R,oe),n(A),o(s("profile.success"),"success"),u("/")}catch(R){console.error("Error updating profile: ",R),o(s("profile.error.updateFailed"),"error")}finally{X(!1)}},W="mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",j=`${W} mt-2`;return y.jsx("div",{className:"max-w-4xl mx-auto py-10 px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:[y.jsxs("div",{className:"p-6",children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s("profile.title")}),y.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s("profile.updateMessage")})]}),y.jsxs("form",{onSubmit:Y,className:"p-6 border-t border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:s("profile.prefix")}),y.jsxs("select",{name:"prefix",value:h.prefix,onChange:U,className:W,children:[y.jsx("option",{value:"",children:s("profile.select")}),NE.map($=>y.jsx("option",{value:$.key,children:s(`prefix.${$.key}`)},$.key)),y.jsx("option",{value:"Other",children:s("profile.other")})]}),h.prefix==="Other"&&y.jsx("input",{type:"text",value:m,onChange:$=>g($.target.value),className:j,placeholder:s("profile.otherPlaceholder")})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s("profile.name")," ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",name:"name",value:h.name,onChange:U,className:W,required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s("profile.surname")," ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",name:"surname",value:h.surname,onChange:U,className:W,required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s("profile.position")," ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",name:"position",value:h.position,onChange:U,className:W,required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s("profile.organization")," ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",name:"organization",value:h.organization,onChange:U,className:W,required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s("profile.address")," ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",name:"address",value:h.address,onChange:U,className:W,required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s("profile.district")," ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",name:"district",value:h.district,onChange:U,className:W,required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s("profile.amphoe")," ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{type:"text",name:"amphoe",value:h.amphoe,onChange:U,className:W,required:!0})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[s("profile.province")," ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsxs("select",{name:"province",value:h.province,onChange:U,className:W,required:!0,children:[y.jsx("option",{value:"",children:s("profile.select")}),IE.map($=>y.jsx("option",{value:$.value,children:s(`province.${$.key}`)},$.key)),y.jsx("option",{value:"Other",children:s("profile.other")})]}),h.province==="Other"&&y.jsx("input",{type:"text",value:E,onChange:$=>T($.target.value),className:j,placeholder:s("profile.otherPlaceholder"),required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:s("profile.education")}),y.jsxs("select",{name:"education",value:h.education,onChange:U,className:W,children:[y.jsx("option",{value:"",children:s("profile.select")}),DE.map($=>y.jsx("option",{value:$.value,children:s(`education.${$.key}`)},$.key)),y.jsx("option",{value:"Other",children:s("profile.other")})]}),h.education==="Other"&&y.jsx("input",{type:"text",value:C,onChange:$=>M($.target.value),className:j,placeholder:s("profile.otherPlaceholder")})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:s("profile.phone")}),y.jsx("input",{type:"tel",name:"phone",value:h.phone||"",onChange:U,className:W})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:s("profile.contactEmail")}),y.jsx("input",{type:"email",name:"contactEmail",value:h.contactEmail||"",onChange:U,className:W})]})]}),y.jsx("div",{className:"pt-5 text-right",children:y.jsx("button",{type:"submit",disabled:B,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:bg-primary-400",children:B?y.jsx(St,{size:20}):s("profile.saveButton")})})]})]})})},d4=i=>{const e=i.toDate();return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(e)},f4=i=>new Promise((e,n)=>{const{templateUrl:s,userName:o,completionDate:u,courseTitle:h,nameCoordinates:p,dateCoordinates:m,nameFontSettings:g,dateFontSettings:E,showDateOnCertificate:T}=i,C=new Image;C.crossOrigin="Anonymous",C.src=s,C.onload=()=>{const M=document.createElement("canvas");M.width=C.width,M.height=C.height;const B=M.getContext("2d");if(!B)return n(new Error("Could not get canvas context."));B.drawImage(C,0,0);const X=(le,oe)=>le.unit==="%"?le.value/100*oe:le.value,U=(g==null?void 0:g.size)||48,Y=(g==null?void 0:g.family)||"serif";B.font=`${U}px ${Y}`,B.fillStyle="#000000",B.textAlign="center";const W=X(p.x,M.width),j=X(p.y,M.height);if(B.fillText(o,W,j),T!==!1){const le=(E==null?void 0:E.size)||24,oe=(E==null?void 0:E.family)||"serif";B.font=`${le}px ${oe}`,B.fillStyle="#333333",B.textAlign="center";const R=X(m.x,M.width),A=X(m.y,M.height);B.fillText(d4(u),R,A)}const $=document.createElement("a");$.download=`Certificate_${h.replace(/\s+/g,"_")}.png`,$.href=M.toDataURL("image/png"),$.click(),e()},C.onerror=()=>{n(new Error("Failed to load certificate template image."))}}),m4=({questions:i,onSubmit:e,onClose:n})=>{const{t:s}=Qt(),[o,u]=P.useState({}),h=(m,g)=>{u(E=>({...E,[m]:g}))},p=()=>{if(Object.keys(o).length!==i.length){alert("Please answer all questions.");return}let m=0;i.forEach(E=>{const T=o[E.id],C=E.options.find(M=>M.isCorrect);C&&C.id===T&&m++});const g=Math.round(m/i.length*100);e(g)};return y.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full max-h-[90vh] flex flex-col",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:s("quiz.title")}),y.jsx("div",{className:"my-4 space-y-6 overflow-y-auto flex-grow pr-2",children:i.map((m,g)=>y.jsxs("div",{children:[y.jsxs("p",{className:"font-semibold",children:[g+1,". ",m.questionText]}),y.jsx("div",{className:"mt-2 space-y-3 pl-4",children:m.options.map(E=>y.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-colors duration-200 ${o[m.id]===E.id?"bg-primary-50 dark:bg-primary-900/50 border-primary-500":"bg-transparent border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[y.jsx("input",{type:"radio",name:m.id,value:E.id,checked:o[m.id]===E.id,onChange:()=>h(m.id,E.id),className:"h-4 w-4 text-primary-600 border-gray-300 focus:ring-primary-500"}),y.jsx("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:E.text})]},E.id))})]},m.id))}),y.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-4 border-t dark:border-gray-700",children:[y.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:s("quiz.cancel")}),y.jsx("button",{onClick:p,className:"px-4 py-2 rounded bg-primary-600 text-white",children:s("quiz.submit")})]})]})})},p4=({filled:i,className:e})=>y.jsx("svg",{className:`w-8 h-8 ${i?"text-yellow-400":"text-gray-300 dark:text-gray-500"} ${e}`,fill:"currentColor",viewBox:"0 0 20 20",children:y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),g4=({name:i,value:e,onChange:n,required:s})=>{const[o,u]=P.useState(0),h=Array(5).fill(0);return y.jsx("div",{className:"flex items-center space-x-1 mt-2",onMouseLeave:()=>u(0),children:h.map((p,m)=>{const g=m+1;return y.jsxs("label",{className:"cursor-pointer",onMouseEnter:()=>u(g),children:[y.jsx("input",{type:"radio",name:i,className:"sr-only",value:g,checked:e===g,onChange:()=>n(g),required:s}),y.jsx(p4,{filled:g<=(o||e),className:"transition-transform duration-150 ease-in-out hover:scale-125"})]},m)})})},y4=({questions:i,onSubmit:e,onClose:n})=>{const{t:s}=Qt(),[o,u]=P.useState({}),h=(m,g)=>{u(E=>({...E,[m]:g}))},p=m=>{m.preventDefault();for(const g of i)if(g.required&&(o[g.id]===void 0||o[g.id]===null||o[g.id]==="")){alert(`Please answer the required question: "${g.questionText}"`);return}e(o)};return y.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:y.jsxs("form",{onSubmit:p,className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full max-h-[90vh] flex flex-col",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:s("survey.title")}),y.jsx("div",{className:"my-4 space-y-6 overflow-y-auto flex-grow pr-2",children:i.map((m,g)=>y.jsxs("div",{children:[y.jsxs("label",{className:"font-semibold",children:[g+1,". ",m.questionText," ",m.required&&y.jsx("span",{className:"text-red-500",children:"*"})]}),m.type==="rating"&&y.jsx(g4,{name:m.id,value:o[m.id]||0,onChange:E=>h(m.id,E),required:m.required}),m.type==="text"&&y.jsx("textarea",{name:m.id,rows:3,value:o[m.id]||"",onChange:E=>h(m.id,E.target.value),required:m.required,className:"mt-2 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm"})]},m.id))}),y.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-4 border-t dark:border-gray-700",children:[y.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:s("quiz.cancel")}),y.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-primary-600 text-white",children:s("survey.submit")})]})]})})},v4=()=>{const{courseId:i}=qE(),{currentUser:e,userProfile:n}=Gr(),{t:s}=Qt(),{showNotification:o}=wi(),u=Fr(),[h,p]=P.useState(null),[m,g]=P.useState(null),[E,T]=P.useState([]),[C,M]=P.useState([]),[B,X]=P.useState([]),[U,Y]=P.useState(""),[W,j]=P.useState(null),[$,le]=P.useState(!0),[oe,R]=P.useState(null),[A,x]=P.useState(!1),[N,I]=P.useState(!1);P.useEffect(()=>{if(n&&(!n.name||!n.surname||!n.position||!n.organization||!n.province||!n.address||!n.district||!n.amphoe)){o(s("profile.incompleteMessage"),"error"),u("/profile",{replace:!0});return}if(!e||!i)return;let ee=!0;const ge=[];return(async()=>{le(!0);try{const Re=Co(mt(Se,`courses/${i}`)),ft=Ut(rt(Se,`courses/${i}/quiz`)),Ke=Ut(rt(Se,`courses/${i}/survey`)),[bn,Si,Ai]=await Promise.all([Re,ft,Ke]);if(!ee)return;bn.exists()&&p({id:bn.id,...bn.data()}),T(Si.docs.map(At=>({id:At.id,...At.data()})).sort((At,Wn)=>At.order-Wn.order)),M(Ai.docs.map(At=>({id:At.id,...At.data()})).sort((At,Wn)=>At.order-Wn.order));const Ci=mt(Se,`users/${e.uid}/enrollments/${i}`),On=cu(Ci,At=>{ee&&At.exists()&&g({courseId:i,...At.data()})});ge.push(On);const Is=rt(Se,`chat_rooms/${i}/messages`),Qr=cu(Is,At=>{const Wn=At.docs.map(ot=>({id:ot.id,...ot.data()})).sort((ot,_t)=>ot.timestamp.seconds-_t.timestamp.seconds);ee&&X(Wn)});ge.push(Qr)}catch(Re){console.error("Error fetching course data:",Re),ee&&o(s("notification.error.fetchCourse"),"error")}finally{ee&&le(!1)}})(),()=>{ee=!1,ge.forEach(Re=>Re())}},[e,n,i,s,o,u]);const V=async ee=>{if(!e||!i)return;const ge=mt(Se,`users/${e.uid}/enrollments/${i}`);await Ns(ge,ee)},D=ee=>{V({preTestCompleted:!0}),R(null),o(s("notification.success.preTest"),"success")},Te=()=>{V({contentViewed:!0}),o(s("notification.success.contentViewed"),"success")},pe=ee=>{h&&ee>=h.passPercentage?(V({postTestCompleted:!0,postTestScore:ee}),o(s("notification.success.postTestPass").replace("{score}",ee.toString()),"success")):o(s("notification.error.postTestFail").replace("{score}",ee.toString()),"error"),R(null)},z=ee=>{V({surveyCompleted:!0,surveyResponses:ee,status:"completed",completionDate:it.now()}),x(!1),o(s("notification.success.survey"),"success")},re=async ee=>{if(ee.preventDefault(),!U.trim()||!e||!n||!i)return;const ge={text:U,senderId:e.uid,senderName:`${n.name} ${n.surname}`.trim(),senderRole:n.role,timestamp:it.now(),...W&&{replyTo:{messageId:W.id,senderName:W.senderName,text:W.text.length>80?W.text.substring(0,77)+"...":W.text}}};try{await uu(rt(Se,`chat_rooms/${i}/messages`),ge),Y(""),j(null)}catch(xe){console.error("Error sending message:",xe),o(s("notification.error.sendMessage"),"error")}},ce=async()=>{if(!(!(h!=null&&h.hasCertificate)||!n||!(m!=null&&m.completionDate))){I(!0);try{let ee=`${n.name} ${n.surname}`;if(h.showPrefixOnCertificate!==!1&&n.prefix){const ge=`prefix.${n.prefix}`,xe=s(ge);ee=`${xe===ge?n.prefix:xe} ${ee}`}await f4({templateUrl:h.certificateTemplateUrl,userName:ee.trim(),completionDate:m.completionDate,courseTitle:h.title,nameCoordinates:h.nameCoordinates,dateCoordinates:h.dateCoordinates,nameFontSettings:h.nameFontSettings,dateFontSettings:h.dateFontSettings,showDateOnCertificate:h.showDateOnCertificate})}catch(ee){console.error(ee),o(s("notification.error.certGeneration"),"error")}finally{I(!1)}}},de=ee=>ee!=null&&ee.toDate?ee.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",ve=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l4-4m-4 4l4 4"})});if($)return y.jsx("div",{className:"flex justify-center items-center py-20",children:y.jsx(St,{size:48})});if(!h||!m)return y.jsx("div",{className:"text-center py-20",children:s("course.notFound")});const O=[{name:s("course.preTest"),completed:m.preTestCompleted},{name:s("course.contentStep"),completed:m.contentViewed,available:m.preTestCompleted},{name:s("course.postTest"),completed:m.postTestCompleted,available:m.contentViewed},{name:s("course.survey"),completed:m.surveyCompleted,available:m.postTestCompleted}],Q=O.filter(ee=>ee.completed).length,ue=Q/O.length*100;return y.jsxs("div",{className:"max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:h.title}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8",children:h.description}),m.status==="completed"&&y.jsx("div",{className:"bg-green-100 dark:bg-green-800/50 text-green-800 dark:text-green-200 p-4 rounded-md mb-8",children:s("course.completedMessage")}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:s("course.content")}),y.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:h.content||`<p>${s("course.noContent")}</p>`}}),y.jsxs("div",{className:"mt-8 border-t dark:border-gray-700 pt-6",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:s("course.discussion")}),y.jsxs("div",{className:"h-64 overflow-y-auto border dark:border-gray-600 rounded-md p-4 mb-4 space-y-2 bg-gray-50 dark:bg-gray-900/50",children:[B.map(ee=>y.jsxs("div",{className:"group relative py-1 pr-8",children:[ee.replyTo&&y.jsxs("div",{className:"ml-4 mb-1 p-2 rounded-md bg-gray-200 dark:bg-gray-700 text-xs text-gray-600 dark:text-gray-400 border-l-4 border-gray-400 dark:border-gray-500",children:[y.jsx("p",{className:"font-bold",children:ee.replyTo.senderName}),y.jsx("p",{className:"truncate",children:ee.replyTo.text})]}),y.jsxs("div",{children:[y.jsx("span",{className:`font-bold ${ee.senderRole==="admin"||ee.senderRole==="sub-admin"?"text-primary-500":"text-gray-800 dark:text-gray-200"}`,children:ee.senderName}),y.jsx("span",{className:"text-xs text-gray-400 ml-2",children:de(ee.timestamp)}),y.jsx("p",{className:"text-gray-600 dark:text-gray-300 whitespace-pre-wrap ml-1",children:ee.text})]}),y.jsx("button",{onClick:()=>j(ee),title:s("chat.replyAction"),className:"absolute top-1/2 -translate-y-1/2 right-0 p-1 rounded-full text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx(ve,{})})]},ee.id)),B.length===0&&y.jsx("p",{className:"text-gray-400 text-center py-4",children:s("course.noMessages")})]}),W&&y.jsx("div",{className:"p-2 mb-2 rounded-md bg-primary-50 dark:bg-primary-900/40 text-sm text-primary-800 dark:text-primary-200 border-l-4 border-primary-500",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"font-bold",children:[s("chat.replyingTo")," ",W.senderName]}),y.jsx("p",{className:"truncate text-xs",children:W.text})]}),y.jsx("button",{onClick:()=>j(null),className:"p-1 rounded-full hover:bg-black/10","aria-label":"Cancel reply",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),y.jsxs("form",{onSubmit:re,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:U,onChange:ee=>Y(ee.target.value),className:"flex-grow bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-gray-900 dark:text-white",placeholder:s("course.messagePlaceholder")}),y.jsx("button",{type:"submit",className:"bg-primary-600 text-white font-bold py-2 px-4 rounded hover:bg-primary-700 disabled:bg-primary-400",disabled:!U.trim(),children:s("course.sendMessage")})]})]})]}),y.jsx("div",{className:"lg:col-span-1",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md sticky top-24",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:s("course.progress")}),y.jsxs("div",{className:"mb-4",children:[y.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:y.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${ue}%`}})}),y.jsxs("p",{className:"text-right text-sm text-gray-500 mt-1",children:[Q," / ",O.length," ",s("course.stepsCompleted")]})]}),y.jsx("ul",{className:"space-y-4",children:O.map(ee=>y.jsxs("li",{className:"flex items-center",children:[y.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-4 text-white font-bold transition-colors ${ee.completed?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:ee.completed?"":""}),y.jsx("span",{className:`transition-colors ${ee.completed?"text-gray-900 dark:text-white":"text-gray-500"}`,children:ee.name})]},ee.name))}),y.jsxs("div",{className:"mt-6 space-y-3",children:[!m.preTestCompleted&&y.jsx("button",{onClick:()=>R("pre"),className:"w-full bg-primary-600 text-white font-bold py-2 px-4 rounded hover:bg-primary-700",children:s("course.startPreTest")}),m.preTestCompleted&&!m.contentViewed&&y.jsx("button",{onClick:Te,className:"w-full bg-primary-600 text-white font-bold py-2 px-4 rounded hover:bg-primary-700",children:s("course.markAsRead")}),m.contentViewed&&!m.postTestCompleted&&(h.isPostTestActive?y.jsx("button",{onClick:()=>R("post"),className:"w-full bg-primary-600 text-white font-bold py-2 px-4 rounded hover:bg-primary-700",children:s("course.startPostTest")}):y.jsx("button",{disabled:!0,className:"w-full bg-gray-400 dark:bg-gray-600 text-white font-bold py-2 px-4 rounded cursor-not-allowed",children:s("course.postTestNotAvailable")})),m.postTestCompleted&&!m.surveyCompleted&&y.jsx("button",{onClick:()=>x(!0),className:"w-full bg-primary-600 text-white font-bold py-2 px-4 rounded hover:bg-primary-700",children:s("course.startSurvey")}),m.status==="completed"&&h.hasCertificate&&y.jsx("button",{onClick:ce,disabled:N,className:"w-full bg-yellow-500 text-white font-bold py-2 px-4 rounded hover:bg-yellow-600 disabled:bg-yellow-300 flex items-center justify-center",children:N?y.jsx(St,{size:20}):s("course.downloadCertificate")})]})]})})]}),oe&&y.jsx(m4,{questions:E,onClose:()=>R(null),onSubmit:oe==="pre"?D:pe}),A&&y.jsx(y4,{questions:C,onClose:()=>x(!1),onSubmit:z})]})},_4=()=>y.jsx("svg",{className:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),E4=({isOpen:i,onClose:e,onConfirm:n,title:s,message:o,isLoading:u})=>{const{t:h}=Qt();return i?y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-sm w-full",children:[y.jsxs("div",{className:"sm:flex sm:items-start",children:[y.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:y.jsx(_4,{})}),y.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[y.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900 dark:text-white",children:s}),y.jsx("div",{className:"mt-2",children:y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:o})})]})]}),y.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse gap-3",children:[y.jsxs("button",{onClick:n,disabled:u,className:"w-full sm:w-auto inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:bg-red-400 items-center",children:[u&&y.jsx(St,{size:16,className:"mr-2"}),h("admin.dashboard.deleteConfirmButton")]}),y.jsx("button",{onClick:e,disabled:u,className:"w-full sm:w-auto mt-3 sm:mt-0 inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50",children:h("admin.dashboard.deleteCancelButton")})]})]})}):null},b4=()=>{const{currentUser:i,userProfile:e}=Gr(),[n,s]=P.useState({users:0,courses:0}),[o,u]=P.useState([]),[h,p]=P.useState([]),[m,g]=P.useState(!0),[E,T]=P.useState(null),[C,M]=P.useState(null),[B,X]=P.useState(null),[U,Y]=P.useState(!1),W=Fr(),{t:j}=Qt(),{showNotification:$}=wi();P.useEffect(()=>{(async()=>{if(!(!i||!e)){g(!0);try{let N;e.role==="admin"?N=rt(Se,"courses"):N=FD(rt(Se,"courses"),GD("assignedAdmins","array-contains",i.uid));const V=(await Ut(N)).docs.map(de=>({id:de.id,...de.data()}));u(V);const Te=(await Ut(rt(Se,"users"))).docs.map(de=>({id:de.id,...de.data()}));e.role==="admin"&&s({users:Te.length,courses:(await Ut(rt(Se,"courses"))).size});const pe={},z=Te.map(de=>Ut(rt(Se,`users/${de.id}/enrollments`)));(await Promise.all(z)).forEach(de=>{de.forEach(ve=>{const O=ve.data(),Q=ve.id;switch(pe[Q]||(pe[Q]={enrolled:0,notStarted:0,inProgress:0,completed:0}),pe[Q].enrolled++,O.status){case"not-started":pe[Q].notStarted++;break;case"in-progress":pe[Q].inProgress++;break;case"completed":pe[Q].completed++;break}})});const ce=V.map(de=>({courseId:de.id,courseTitle:de.title,...pe[de.id]||{enrolled:0,notStarted:0,inProgress:0,completed:0}}));p(ce)}catch(N){console.error("Failed to fetch admin data:",N),N.code==="permission-denied"?$("Permission denied. Sub-admins may need updated security rules to view progress.","error"):$(j("notification.error.fetchCourse"),"error")}g(!1)}})()},[i,e,j,$]);const le=async()=>{try{const I=(await Ut(rt(Se,"users"))).docs.map(pe=>pe.data()).map(pe=>({[j("report.header.userId")]:pe.uid,[j("report.header.email")]:pe.email,[j("report.header.role")]:pe.role,[j("report.header.prefix")]:pe.prefix,[j("report.header.name")]:pe.name,[j("report.header.surname")]:pe.surname,[j("report.header.birthYear")]:pe.dob?new Date(pe.dob).getFullYear():"N/A",[j("report.header.position")]:pe.position,[j("report.header.organization")]:pe.organization,[j("report.header.address")]:pe.address,[j("report.header.district")]:pe.district,[j("report.header.amphoe")]:pe.amphoe,[j("report.header.province")]:pe.province,[j("report.header.education")]:pe.education,[j("report.header.phone")]:pe.phone,[j("report.header.contactEmail")]:pe.contactEmail})),V=Papa.unparse(I),D=new Blob(["\uFEFF"+V],{type:"text/csv;charset=utf-8;"}),Te=document.createElement("a");Te.href=URL.createObjectURL(D),Te.setAttribute("download","users_export.csv"),document.body.appendChild(Te),Te.click(),document.body.removeChild(Te)}catch(x){console.error("Failed to export users:",x)}},oe=async(x,N)=>{T(x);try{const V=(await Ut(rt(Se,`courses/${x}/survey`))).docs.map(Q=>({id:Q.id,...Q.data()})).sort((Q,ue)=>Q.order-ue.order),pe=(await Ut(rt(Se,"users"))).docs.map(Q=>Q.data()).map(async Q=>{const ue=mt(Se,`users/${Q.uid}/enrollments/${x}`),ee=await Co(ue);return ee.exists()?{user:Q,enrollment:ee.data()}:null}),z=(await Promise.all(pe)).filter(Boolean);if(z.length===0){$(j("admin.dashboard.noEnrollmentsToExport"),"error");return}const re=z.map(({user:Q,enrollment:ue})=>{const ee={[j("report.header.userId")]:Q.uid,[j("report.header.prefix")]:Q.prefix,[j("report.header.name")]:Q.name,[j("report.header.surname")]:Q.surname,[j("report.header.organization")]:Q.organization,[j("report.header.address")]:Q.address||"N/A",[j("report.header.district")]:Q.district||"N/A",[j("report.header.amphoe")]:Q.amphoe||"N/A",[j("report.header.phone")]:Q.phone||"N/A",[j("report.header.contactEmail")]:Q.contactEmail||"N/A",[j("report.header.enrollmentStatus")]:ue.status,[j("report.header.preTest")]:ue.preTestCompleted?j("report.status.yes"):j("report.status.no"),[j("report.header.contentViewed")]:ue.contentViewed?j("report.status.yes"):j("report.status.no"),[j("report.header.postTest")]:ue.postTestCompleted?j("report.status.yes"):j("report.status.no"),[j("report.header.survey")]:ue.surveyCompleted?j("report.status.yes"):j("report.status.no"),[j("report.header.postTestScore")]:ue.postTestScore??"N/A"};return V.forEach(ge=>{const xe=ge.questionText;ue.surveyResponses&&ue.surveyResponses[ge.id]!==void 0?ee[xe]=ue.surveyResponses[ge.id]:ee[xe]="N/A"}),ee}),ce=Papa.unparse(re),de=new Blob(["\uFEFF"+ce],{type:"text/csv;charset=utf-8;"}),ve=document.createElement("a");ve.href=URL.createObjectURL(de);const O=N==null?void 0:N.replace(/[^a-z0-9]/gi,"_").toLowerCase();ve.setAttribute("download",`enrollment_report_${O}.csv`),document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)}catch(I){console.error("Failed to export enrollment report:",I),$(j("admin.dashboard.exportError"),"error")}finally{T(null)}},R=async()=>{if(B){Y(!0);try{await KD(B.id),u(x=>x.filter(N=>N.id!==B.id)),p(x=>x.filter(N=>N.courseId!==B.id)),$(j("notification.success.courseDeleted"),"success")}catch(x){console.error("Failed to delete course:",x),$(j("notification.error.courseDeletionFailed"),"error")}finally{Y(!1),X(null)}}},A=async(x,N)=>{M(x);try{await Ns(mt(Se,`courses/${x}`),{isEnrollmentOpen:N}),u(I=>I.map(V=>V.id===x?{...V,isEnrollmentOpen:N}:V)),$(j("notification.success.enrollmentStatusUpdated"),"success")}catch(I){console.error("Failed to update enrollment status:",I),$(j("notification.error.enrollmentStatusUpdateFailed"),"error")}finally{M(null)}};return m?y.jsx("div",{className:"flex justify-center items-center h-64",children:y.jsx(St,{size:40})}):y.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[B&&y.jsx(E4,{isOpen:!!B,onClose:()=>X(null),onConfirm:R,title:j("admin.dashboard.deleteConfirmTitle"),message:j("admin.dashboard.deleteConfirmMessage").replace("{courseTitle}",B.title),isLoading:U}),y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-6",children:j("admin.dashboard.title")}),(e==null?void 0:e.role)==="admin"&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[y.jsx("h2",{className:"text-lg font-medium text-gray-500 dark:text-gray-400",children:j("admin.dashboard.totalUsers")}),y.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900 dark:text-white",children:n.users})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[y.jsx("h2",{className:"text-lg font-medium text-gray-500 dark:text-gray-400",children:j("admin.dashboard.totalCourses")}),y.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900 dark:text-white",children:n.courses})]}),y.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md flex flex-col justify-center",children:y.jsx("button",{onClick:le,className:"bg-green-600 text-white font-bold py-2 px-4 rounded hover:bg-green-700 transition duration-300",children:j("admin.dashboard.exportUsers")})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md flex flex-col justify-center",children:y.jsx("button",{onClick:()=>W("/admin/users"),className:"bg-indigo-600 text-white font-bold py-2 px-4 rounded hover:bg-indigo-700 transition duration-300",children:j("admin.dashboard.manageUsers")})})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-8",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:j("admin.dashboard.progressSummaryTitle")}),y.jsxs("div",{className:"overflow-x-auto",children:[y.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[y.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:y.jsxs("tr",{children:[y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:j("admin.dashboard.courseTitle")}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:j("admin.dashboard.enrolled")}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:j("admin.dashboard.notStarted")}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:j("admin.dashboard.inProgress")}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:j("admin.dashboard.completed")})]})}),y.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map(x=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:x.courseTitle}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:x.enrolled}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:x.notStarted}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:x.inProgress}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:x.completed})]},x.courseId))})]}),h.length===0&&y.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:(e==null?void 0:e.role)==="admin"?j("admin.dashboard.noCourses"):j("admin.dashboard.noAssignedCourses")})]})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:(e==null?void 0:e.role)==="admin"?j("admin.dashboard.courses"):j("admin.dashboard.assignedCourses")}),(e==null?void 0:e.role)==="admin"&&y.jsx("button",{onClick:()=>W("/admin/course/new"),className:"bg-primary-600 text-white font-bold py-2 px-4 rounded hover:bg-primary-700 transition duration-300",children:j("admin.dashboard.createCourse")})]}),y.jsx("div",{className:"flow-root",children:y.jsxs("ul",{role:"list",className:"-my-5 divide-y divide-gray-200 dark:divide-gray-700",children:[o.map(x=>y.jsx("li",{className:"py-4",children:y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:x.title}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:x.description})]}),y.jsxs("div",{className:"flex items-center space-x-2 flex-wrap gap-2 justify-end",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:j("admin.dashboard.enrollmentStatus")}),y.jsxs("label",{className:"inline-flex relative items-center cursor-pointer",children:[y.jsx("input",{type:"checkbox",className:"sr-only peer",checked:x.isEnrollmentOpen!==!1,onChange:N=>A(x.id,N.target.checked),disabled:C===x.id}),y.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600 peer-disabled:opacity-50 flex items-center justify-center",children:C===x.id&&y.jsx(St,{size:12,className:"text-primary-500"})}),y.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:x.isEnrollmentOpen!==!1?j("admin.dashboard.enrollmentOpen"):j("admin.dashboard.enrollmentClosed")})]})]}),y.jsx("button",{onClick:()=>oe(x.id,x.title),disabled:E===x.id,className:"inline-flex items-center justify-center shadow-sm px-3 py-1 border border-transparent text-sm leading-5 font-medium rounded-md text-green-800 dark:text-green-200 bg-green-100 dark:bg-green-900/50 hover:bg-green-200 dark:hover:bg-green-800/50 disabled:opacity-50",children:E===x.id?y.jsxs(y.Fragment,{children:[y.jsx(St,{size:16,className:"mr-2"}),j("admin.dashboard.exporting")]}):j("admin.dashboard.exportReport")}),y.jsx(ua,{to:`/admin/course/${x.id}`,className:"inline-flex items-center shadow-sm px-3 py-1 border border-gray-300 dark:border-gray-600 text-sm leading-5 font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:j("admin.dashboard.manage")}),(e==null?void 0:e.role)==="admin"&&y.jsx("button",{onClick:()=>X(x),className:"inline-flex items-center shadow-sm px-3 py-1 border border-transparent text-sm leading-5 font-medium rounded-md text-red-800 dark:text-red-200 bg-red-100 dark:bg-red-900/50 hover:bg-red-200 dark:hover:bg-red-800/50",children:j("admin.dashboard.delete")})]})]})},x.id)),o.length===0&&y.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:(e==null?void 0:e.role)==="admin"?j("admin.dashboard.noCourses"):j("admin.dashboard.noAssignedCourses")})]})})]})]})},T4=({courseId:i})=>{const{t:e}=Qt(),{showNotification:n}=wi(),[s,o]=P.useState([]),[u,h]=P.useState([]),[p,m]=P.useState(!0),[g,E]=P.useState(!1),T=`courses/${i}/quiz`;P.useEffect(()=>{(async()=>{m(!0);try{const oe=(await Ut(rt(Se,T))).docs.map(R=>({id:R.id,...R.data()})).sort((R,A)=>R.order-A.order);o(oe),h(JSON.parse(JSON.stringify(oe)))}catch{n(e("notification.error.fetchQuestions"),"error")}finally{m(!1)}})()},[T,n,e]);const C=async()=>{E(!0);try{const $=s.map((I,V)=>({...I,order:V+1})),le=u.filter(I=>!$.some(V=>V.id===I.id)),oe=$.filter(I=>I.id.toString().startsWith("new_")),R=$.filter(I=>{if(I.id.toString().startsWith("new_"))return!1;const V=u.find(D=>D.id===I.id);return V&&JSON.stringify(V)!==JSON.stringify(I)}),A=[...le.map(I=>oa(mt(Se,`${T}/${I.id}`))),...oe.map(I=>{const{id:V,...D}=I;return uu(rt(Se,T),D)}),...R.map(I=>{const{id:V,...D}=I;return Ns(mt(Se,`${T}/${V}`),D)})];A.length>0&&(await Promise.all(A),n(e("notification.success.saveQuestions"),"success"));const N=(await Ut(rt(Se,T))).docs.map(I=>({id:I.id,...I.data()})).sort((I,V)=>I.order-V.order);o(N),h(JSON.parse(JSON.stringify(N)))}catch($){console.error("Error saving quiz changes:",$),n(e("notification.error.saveQuestions"),"error")}finally{E(!1)}},M=()=>{const $=s.length>0?Math.max(...s.map(oe=>oe.order))+1:1,le={id:`new_${Date.now()}`,questionText:"New Multiple Choice Question",type:"multiple-choice",order:$,options:[{id:`new_opt_${Date.now()}`,text:"Correct Answer",isCorrect:!0},{id:`new_opt_${Date.now()+1}`,text:"Wrong Answer",isCorrect:!1}]};o(oe=>[...oe,le])},B=$=>{window.confirm(e("quizEditor.confirmDelete"))&&o(le=>le.filter(oe=>oe.id!==$))},X=($,le)=>{o(oe=>oe.map(R=>R.id===$?{...R,questionText:le}:R))},U=($,le,oe)=>{o(R=>R.map(A=>{if(A.id===$){const x=A.options.map(N=>N.id===le?{...N,text:oe}:N);return{...A,options:x}}return A}))},Y=($,le)=>{o(oe=>oe.map(R=>{if(R.id===$){const A=R.options.map(x=>({...x,isCorrect:x.id===le}));return{...R,options:A}}return R}))},W=$=>{o(le=>le.map(oe=>{if(oe.id===$){const R={id:`new_opt_${Date.now()}`,text:"New Option",isCorrect:!1};return{...oe,options:[...oe.options,R]}}return oe}))},j=($,le)=>{o(oe=>oe.map(R=>{if(R.id===$){let A=R.options.filter(x=>x.id!==le);return A.length<2?(n(e("quizEditor.error.minOptions"),"error"),R):(A.some(x=>x.isCorrect)||(A=A.map((x,N)=>N===0?{...x,isCorrect:!0}:x)),{...R,options:A})}return R}))};return y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:e("quizEditor.title")}),p?y.jsx(St,{}):y.jsx("div",{className:"space-y-4",children:s.map($=>y.jsxs("div",{className:"p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("textarea",{value:$.questionText,onChange:le=>X($.id,le.target.value),className:"w-full text-lg font-semibold bg-transparent border-0 focus:ring-0 p-0",rows:1}),y.jsx("button",{onClick:()=>B($.id),className:"text-red-500 hover:text-red-700 ml-4 font-bold text-2xl leading-none",children:""})]}),y.jsxs("div",{className:"mt-2 pl-4 space-y-2",children:[$.options.map(le=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"radio",name:`correct_${$.id}`,checked:le.isCorrect,onChange:()=>Y($.id,le.id),className:"h-5 w-5 text-primary-600 focus:ring-primary-500"}),y.jsx("input",{type:"text",value:le.text,onChange:oe=>U($.id,le.id,oe.target.value),className:"flex-grow bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded-md px-2 py-1"}),y.jsx("button",{onClick:()=>j($.id,le.id),className:"text-gray-400 hover:text-red-500 text-lg",children:""})]},le.id)),y.jsxs("button",{onClick:()=>W($.id),className:"text-sm text-primary-600 hover:text-primary-800 mt-2",children:["+ ",e("quizEditor.addOption")]})]})]},$.id))}),y.jsxs("div",{className:"mt-6 pt-4 border-t dark:border-gray-700 flex justify-between",children:[y.jsx("button",{onClick:M,className:"px-4 py-2 rounded bg-indigo-500 text-white hover:bg-indigo-600",children:e("quizEditor.addQuestion")}),y.jsxs("button",{onClick:C,disabled:g||p,className:"px-4 py-2 rounded bg-primary-600 text-white hover:bg-primary-700 disabled:bg-primary-400 flex items-center gap-2",children:[g&&y.jsx(St,{size:20}),e("quizEditor.saveChanges")]})]})]})},x4=({courseId:i})=>{const{t:e}=Qt(),{showNotification:n}=wi(),[s,o]=P.useState([]),[u,h]=P.useState([]),[p,m]=P.useState(!0),[g,E]=P.useState(!1),T=`courses/${i}/survey`;P.useEffect(()=>{(async()=>{m(!0);try{const W=(await Ut(rt(Se,T))).docs.map(j=>({id:j.id,...j.data()})).sort((j,$)=>j.order-$.order);o(W),h(JSON.parse(JSON.stringify(W)))}catch{n(e("notification.error.fetchQuestions"),"error")}finally{m(!1)}})()},[T,n,e]);const C=async()=>{E(!0);try{const U=s.map((R,A)=>({...R,order:A+1})),Y=u.filter(R=>!U.some(A=>A.id===R.id)),W=U.filter(R=>R.id.toString().startsWith("new_")),j=U.filter(R=>{if(R.id.toString().startsWith("new_"))return!1;const A=u.find(x=>x.id===R.id);return A&&JSON.stringify(A)!==JSON.stringify(R)}),$=[...Y.map(R=>oa(mt(Se,`${T}/${R.id}`))),...W.map(R=>{const{id:A,...x}=R;return uu(rt(Se,T),x)}),...j.map(R=>{const{id:A,...x}=R;return Ns(mt(Se,`${T}/${A}`),x)})];$.length>0&&(await Promise.all($),n(e("notification.success.saveQuestions"),"success"));const oe=(await Ut(rt(Se,T))).docs.map(R=>({id:R.id,...R.data()})).sort((R,A)=>R.order-A.order);o(oe),h(JSON.parse(JSON.stringify(oe)))}catch(U){console.error("Error saving survey changes:",U),n(e("notification.error.saveQuestions"),"error")}finally{E(!1)}},M=()=>{const U=s.length>0?Math.max(...s.map(W=>W.order))+1:1,Y={id:`new_${Date.now()}`,questionText:"New Rating Question",type:"rating",order:U,required:!0};o(W=>[...W,Y])},B=U=>{window.confirm(e("surveyEditor.confirmDelete"))&&o(Y=>Y.filter(W=>W.id!==U))},X=(U,Y,W)=>{o(j=>j.map($=>$.id===U?{...$,[Y]:W}:$))};return y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:e("surveyEditor.title")}),p?y.jsx(St,{}):y.jsx("div",{className:"space-y-4",children:s.map(U=>y.jsxs("div",{className:"p-4 border dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("textarea",{value:U.questionText,onChange:Y=>X(U.id,"questionText",Y.target.value),className:"w-full text-lg font-semibold bg-transparent border-0 focus:ring-0 p-0",rows:1}),y.jsx("button",{onClick:()=>B(U.id),className:"text-red-500 hover:text-red-700 ml-4 font-bold text-2xl leading-none",children:""})]}),y.jsxs("div",{className:"mt-2 pl-4 space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("label",{className:"text-sm font-medium",children:"Question Type:"}),y.jsxs("select",{value:U.type,onChange:Y=>X(U.id,"type",Y.target.value),className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 text-sm",children:[y.jsx("option",{value:"rating",children:"Rating (1-5)"}),y.jsx("option",{value:"text",children:"Text"})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"checkbox",id:`required_${U.id}`,checked:U.required,onChange:Y=>X(U.id,"required",Y.target.checked),className:"h-4 w-4 rounded text-primary-600 focus:ring-primary-500"}),y.jsx("label",{htmlFor:`required_${U.id}`,className:"text-sm",children:"Required"})]})]})]},U.id))}),y.jsxs("div",{className:"mt-6 pt-4 border-t dark:border-gray-700 flex justify-between",children:[y.jsx("button",{onClick:M,className:"px-4 py-2 rounded bg-indigo-500 text-white hover:bg-indigo-600",children:e("quizEditor.addQuestion")}),y.jsxs("button",{onClick:C,disabled:g||p,className:"px-4 py-2 rounded bg-primary-600 text-white hover:bg-primary-700 disabled:bg-primary-400 flex items-center gap-2",children:[g&&y.jsx(St,{size:20}),e("quizEditor.saveChanges")]})]})]})},kE=[{value:"serif",label:"Serif"},{value:"sans-serif",label:"Sans-serif"},{value:"monospace",label:"Monospace"},{value:"cursive",label:"Cursive"},{value:"fantasy",label:"Fantasy"}],w4=({courseId:i})=>{var le,oe,R,A;const{t:e}=Qt(),{showNotification:n}=wi(),[s,o]=P.useState({}),[u,h]=P.useState(!0),[p,m]=P.useState(!1),g=`courses/${i}`,E=P.useRef(null),T={x:{value:50,unit:"%"},y:{value:50,unit:"%"}},C={family:"serif",size:48},M={family:"serif",size:24};P.useEffect(()=>{(async()=>{h(!0);try{const N=await Co(mt(Se,g));if(N.exists()){const I=N.data();o({...I,nameFontSettings:I.nameFontSettings||C,dateFontSettings:I.dateFontSettings||M})}else n(e("notification.error.courseNotFound"),"error")}catch{n(e("notification.error.fetchCourse"),"error")}finally{h(!1)}})()},[g,n,e]),P.useEffect(()=>{const x=E.current;if(!x)return;const N=x.getContext("2d");if(!N)return;const{certificateTemplateUrl:I,nameCoordinates:V,dateCoordinates:D,showDateOnCertificate:Te,showPrefixOnCertificate:pe,nameFontSettings:z,dateFontSettings:re}=s,ce=ve=>{const O=x.parentElement;if(!O)return;const Q=1.414,{width:ue}=O.getBoundingClientRect();x.width=ue,x.height=ue/Q,N.clearRect(0,0,x.width,x.height),N.fillStyle="#6b7280",N.textAlign="center",N.font="16px sans-serif",N.fillText(ve,x.width/2,x.height/2)};if(!I){ce(e("courseEditor.certificate.previewNoTemplate"));return}ce(e("courseEditor.certificate.previewLoading"));const de=new Image;de.crossOrigin="Anonymous",de.src=I,de.onload=()=>{const ve=x.parentElement;if(!ve)return;const O=ve.clientWidth,Q=O/de.width;x.width=O,x.height=de.height*Q,N.clearRect(0,0,x.width,x.height),N.drawImage(de,0,0,x.width,x.height);const ue=(ee,ge)=>ee.unit==="%"?ee.value/100*ge:ee.value*Q;if(V){const ee=((z==null?void 0:z.size)||48)*Q,ge=(z==null?void 0:z.family)||"serif";N.font=`${ee}px ${ge}`,N.fillStyle="#000000",N.textAlign="center";const xe=ue(V.x,x.width),Re=ue(V.y,x.height),ft=e("prefix.mr"),Ke="Sample Name",bn=pe!==!1?`${ft} ${Ke}`:Ke;N.fillText(bn,xe,Re)}if(Te&&D){const ee=((re==null?void 0:re.size)||24)*Q,ge=(re==null?void 0:re.family)||"serif";N.font=`${ee}px ${ge}`,N.fillStyle="#333333",N.textAlign="center";const xe=ue(D.x,x.width),Re=ue(D.y,x.height);N.fillText(new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),xe,Re)}},de.onerror=()=>{ce(e("courseEditor.certificate.previewNoTemplate"))}},[s,e]);const B=x=>{const{name:N,type:I,checked:V,value:D}=x.target,Te=I==="checkbox"?V:D;o(pe=>({...pe,[N]:Te}))},X=(x,N,I)=>{const V=parseInt(I,10)||0,D=x==="name"?"nameCoordinates":"dateCoordinates";o(Te=>{var pe;return{...Te,[D]:{...Te[D]||T,[N]:{...((pe=Te[D])==null?void 0:pe[N])||{value:0,unit:"px"},value:V}}}})},U=(x,N,I)=>{const V=x==="name"?"nameCoordinates":"dateCoordinates";o(D=>{var Te;return{...D,[V]:{...D[V]||T,[N]:{...((Te=D[V])==null?void 0:Te[N])||{value:0,unit:"px"},unit:I}}}})},Y=(x,N,I)=>{o(V=>({...V,[x]:{...V[x]||(x==="nameFontSettings"?C:M),[N]:N==="size"?parseInt(I,10)||0:I}}))},W=async()=>{m(!0);try{const x={hasCertificate:s.hasCertificate||!1,certificateTemplateUrl:s.certificateTemplateUrl||"",nameCoordinates:s.nameCoordinates||T,dateCoordinates:s.dateCoordinates||T,nameFontSettings:s.nameFontSettings||C,dateFontSettings:s.dateFontSettings||M,showDateOnCertificate:s.showDateOnCertificate||!1,showPrefixOnCertificate:s.showPrefixOnCertificate||!1};await Ns(mt(Se,g),x),n(e("notification.success.courseUpdated"),"success")}catch(x){console.error("Error saving certificate settings:",x),n(e("notification.error.saveCourse"),"error")}finally{m(!1)}},j="block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm";if(u)return y.jsx(St,{});const $=({coord:x,axis:N})=>{var Te,pe,z,re;const I=x==="name"?"nameCoordinates":"dateCoordinates",V=((pe=(Te=s[I])==null?void 0:Te[N])==null?void 0:pe.value)||0,D=((re=(z=s[I])==null?void 0:z[N])==null?void 0:re.unit)||"px";return y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"number",value:V,onChange:ce=>X(x,N,ce.target.value),className:j,placeholder:e(N==="x"?"courseEditor.certificate.x_axis":"courseEditor.certificate.y_axis")}),y.jsxs("select",{value:D,onChange:ce=>U(x,N,ce.target.value),className:`${j} w-24`,children:[y.jsx("option",{value:"px",children:e("courseEditor.certificate.unit_px")}),y.jsx("option",{value:"%",children:e("courseEditor.certificate.unit_percent")})]})]})};return y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:e("courseEditor.certificate.title")}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"hasCertificate",name:"hasCertificate",checked:s.hasCertificate||!1,onChange:B,className:"h-4 w-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),y.jsx("label",{htmlFor:"hasCertificate",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:e("courseEditor.certificate.enable")})]}),s.hasCertificate&&y.jsxs("div",{className:"pl-6 border-l-2 border-primary-500 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:e("courseEditor.certificate.templateUrl")}),y.jsx("input",{type:"text",name:"certificateTemplateUrl",value:s.certificateTemplateUrl||"",onChange:B,className:j,placeholder:"https://example.com/template.png"}),y.jsx("p",{className:"mt-1 text-xs text-gray-500",children:e("courseEditor.certificate.templateUrlHelp")})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"showPrefixOnCertificate",name:"showPrefixOnCertificate",checked:s.showPrefixOnCertificate!==!1,onChange:B,className:"h-4 w-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),y.jsx("label",{htmlFor:"showPrefixOnCertificate",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:e("courseEditor.certificate.showPrefix")})]}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"showDateOnCertificate",name:"showDateOnCertificate",checked:s.showDateOnCertificate||!1,onChange:B,className:"h-4 w-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),y.jsx("label",{htmlFor:"showDateOnCertificate",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:e("courseEditor.certificate.showDate")})]})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:e("courseEditor.certificate.namePosition")}),y.jsxs("div",{className:"mt-1 space-y-2",children:[y.jsx($,{coord:"name",axis:"x"}),y.jsx($,{coord:"name",axis:"y"})]}),y.jsx("label",{className:"block text-sm font-medium mt-2",children:"Font"}),y.jsxs("div",{className:"flex gap-2 mt-1",children:[y.jsx("select",{value:((le=s.nameFontSettings)==null?void 0:le.family)||"serif",onChange:x=>Y("nameFontSettings","family",x.target.value),className:`${j} w-2/3`,children:kE.map(x=>y.jsx("option",{value:x.value,children:x.label},x.value))}),y.jsx("input",{type:"number",value:((oe=s.nameFontSettings)==null?void 0:oe.size)||48,onChange:x=>Y("nameFontSettings","size",x.target.value),className:`${j} w-1/3`,placeholder:"Size (px)"})]})]}),s.showDateOnCertificate&&y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:e("courseEditor.certificate.datePosition")}),y.jsxs("div",{className:"mt-1 space-y-2",children:[y.jsx($,{coord:"date",axis:"x"}),y.jsx($,{coord:"date",axis:"y"})]}),y.jsx("label",{className:"block text-sm font-medium mt-2",children:"Font"}),y.jsxs("div",{className:"flex gap-2 mt-1",children:[y.jsx("select",{value:((R=s.dateFontSettings)==null?void 0:R.family)||"serif",onChange:x=>Y("dateFontSettings","family",x.target.value),className:`${j} w-2/3`,children:kE.map(x=>y.jsx("option",{value:x.value,children:x.label},x.value))}),y.jsx("input",{type:"number",value:((A=s.dateFontSettings)==null?void 0:A.size)||24,onChange:x=>Y("dateFontSettings","size",x.target.value),className:`${j} w-1/3`,placeholder:"Size (px)"})]})]})]}),y.jsxs("div",{className:"mt-6",children:[y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e("courseEditor.certificate.previewTitle")}),y.jsx("div",{className:"mt-2 border dark:border-gray-600 rounded-md p-2 bg-gray-100 dark:bg-gray-900/50 flex justify-center items-center",children:y.jsx("canvas",{ref:E,className:"max-w-full max-h-full"})})]})]})]}),y.jsx("div",{className:"mt-6 pt-4 border-t dark:border-gray-700 flex justify-end",children:y.jsx("button",{onClick:W,disabled:p||u,className:"inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:bg-primary-400",children:p?y.jsx(St,{size:20}):e("quizEditor.saveChanges")})})]})},S4={x:{value:50,unit:"%"},y:{value:50,unit:"%"}},OE={title:"",description:"",content:"",passPercentage:70,isPostTestActive:!1,isEnrollmentOpen:!0,assignedAdmins:[],hasCertificate:!1,certificateTemplateUrl:"",nameCoordinates:S4,dateCoordinates:{x:{value:50,unit:"%"},y:{value:60,unit:"%"}}},A4=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),C4=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),R4=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.546-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),N4=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),I4=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),D4=()=>{const{courseId:i}=qE(),e=Fr(),n=i==="new",{t:s}=Qt(),{showNotification:o}=wi(),{userProfile:u}=Gr(),[h,p]=P.useState(OE),[m,g]=P.useState([]),[E,T]=P.useState(!n),[C,M]=P.useState(!1),[B,X]=P.useState("general"),[U,Y]=P.useState([]),[W,j]=P.useState(""),[$,le]=P.useState(null),oe=P.useRef(null),R=P.useRef(null);P.useEffect(()=>{n&&(p(OE),T(!1));let z=!0;return(async()=>{var ce;T(!0);try{if((u==null?void 0:u.role)==="admin"){const ve=(await Ut(rt(Se,"users"))).docs.map(O=>O.data());g(ve.filter(O=>O.role==="sub-admin"))}if(!n){const de=await Co(mt(Se,`courses/${i}`));if(!z)return;if(de.exists()){const ve={id:i,...de.data()};if((u==null?void 0:u.role)==="sub-admin"&&!((ce=ve.assignedAdmins)!=null&&ce.includes(u.uid))){o("Access denied.","error"),e("/admin");return}p(ve)}else o(s("notification.error.courseNotFound"),"error"),e("/admin")}}catch(de){console.error("Error fetching data:",de),o(s("notification.error.fetchCourse"),"error")}finally{z&&T(!1)}})(),()=>{z=!1}},[i,n,e,o,s,u]),P.useEffect(()=>{if(E||!oe.current||R.current)return;const z=new Quill(oe.current,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image","code-block"],["clean"]]}});R.current=z,h.content&&z.clipboard.dangerouslyPasteHTML(h.content,"silent");const re=(ce,de,ve)=>{ve==="user"&&p(O=>({...O,content:z.root.innerHTML}))};return z.on("text-change",re),()=>{R.current&&(R.current.off("text-change",re),R.current=null)}},[E]),P.useEffect(()=>{if(B!=="chat"||n||!i)return;let z=!0;const re=rt(Se,`chat_rooms/${i}/messages`),ce=cu(re,de=>{const ve=de.docs.map(O=>({id:O.id,...O.data()})).sort((O,Q)=>O.timestamp.seconds-Q.timestamp.seconds);z&&Y(ve)});return()=>{z=!1,ce()}},[B,i,n]);const A=z=>{const re=z.target,{name:ce}=re,de=re.type==="checkbox"?re.checked:re.value;p(ve=>({...ve,[ce]:ce==="passPercentage"?parseInt(de.toString())||0:de}))},x=(z,re)=>{p(ce=>{const de=ce.assignedAdmins||[];return re?{...ce,assignedAdmins:[...de,z]}:{...ce,assignedAdmins:de.filter(ve=>ve!==z)}})},N=async z=>{if(z.preventDefault(),!h.title){o(s("notification.error.requiredFields"),"error");return}M(!0);try{if(n){const{id:re,...ce}=h,de=u==null?void 0:u.uid;let ve=ce.assignedAdmins||[];de&&!ve.includes(de)&&ve.push(de);const O={...ce,assignedAdmins:ve,isEnrollmentOpen:h.isEnrollmentOpen!==!1},Q=await uu(rt(Se,"courses"),O);await pg(mt(Se,`chat_rooms/${Q.id}`),{}),o(s("notification.success.courseCreated"),"success"),e(`/admin/course/${Q.id}`,{replace:!0})}else if(i){const{id:re,...ce}=h;await Ns(mt(Se,`courses/${i}`),ce),o(s("notification.success.courseUpdated"),"success")}}catch(re){console.error("Error saving course:",re),o(s("notification.error.saveCourse"),"error")}finally{M(!1)}},I=async z=>{if(z.preventDefault(),!W.trim()||!u||n||!i)return;const re={text:W,senderId:u.uid,senderName:`${u.name} ${u.surname}`.trim()||"Admin",senderRole:u.role,timestamp:it.now(),...$&&{replyTo:{messageId:$.id,senderName:$.senderName,text:$.text.length>80?$.text.substring(0,77)+"...":$.text}}};try{await uu(rt(Se,`chat_rooms/${i}/messages`),re),j(""),le(null)}catch{o(s("notification.error.sendMessage"),"error")}},V=z=>z!=null&&z.toDate?z.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",D=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l4-4m-4 4l4 4"})}),Te="mt-1 block w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",pe=({sectionName:z,label:re,icon:ce,disabled:de=!1})=>y.jsxs("button",{type:"button",disabled:de,onClick:()=>!de&&X(z),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-md ${B===z?"bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"} ${de?"cursor-not-allowed opacity-50":""}`,children:[ce,y.jsx("span",{children:re})]});return E?y.jsx("div",{className:"flex justify-center items-center py-20",children:y.jsx(St,{size:48})}):y.jsxs("div",{className:"max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:s(n?"courseEditor.createTitle":"courseEditor.editTitle")}),y.jsx("button",{onClick:()=>e("/admin"),className:"text-primary-600 dark:text-primary-400 hover:underline",children:s("courseEditor.back")})]}),y.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[y.jsx("aside",{className:"md:w-64 flex-shrink-0",children:y.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-4 sticky top-24",children:y.jsxs("nav",{className:"space-y-1",children:[y.jsx(pe,{sectionName:"general",label:s("courseEditor.tab.general"),icon:y.jsx(A4,{})}),y.jsx(pe,{sectionName:"certificate",label:s("courseEditor.tab.certificate"),icon:y.jsx(C4,{}),disabled:n}),y.jsx(pe,{sectionName:"quiz",label:s("courseEditor.tab.quiz"),icon:y.jsx(R4,{}),disabled:n}),y.jsx(pe,{sectionName:"survey",label:s("courseEditor.tab.survey"),icon:y.jsx(N4,{}),disabled:n}),y.jsx(pe,{sectionName:"chat",label:s("courseEditor.tab.chat"),icon:y.jsx(I4,{}),disabled:n})]})})}),y.jsx("main",{className:"flex-1 min-w-0",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg",children:[B==="general"&&y.jsxs("form",{onSubmit:N,children:[y.jsxs("div",{className:"p-6 space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:s("courseEditor.titleLabel")}),y.jsx("input",{type:"text",name:"title",value:h.title,onChange:A,className:Te,required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:s("courseEditor.descriptionLabel")}),y.jsx("textarea",{name:"description",value:h.description,onChange:A,rows:3,className:Te})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:s("courseEditor.passPercentageLabel")}),y.jsx("input",{type:"number",name:"passPercentage",value:h.passPercentage,onChange:A,className:Te,required:!0,min:"0",max:"100"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:s("courseEditor.postTestStatusLabel")}),y.jsx("div",{className:"mt-2 h-10 flex items-center",children:y.jsxs("label",{className:"inline-flex relative items-center cursor-pointer",children:[y.jsx("input",{type:"checkbox",name:"isPostTestActive",className:"sr-only peer",checked:h.isPostTestActive||!1,onChange:A}),y.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"}),y.jsx("span",{className:"ml-3 text-sm font-medium",children:h.isPostTestActive?s("courseEditor.postTestActive"):s("courseEditor.postTestInactive")})]})})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:s("courseEditor.enrollmentStatusLabel")}),y.jsx("div",{className:"mt-2 h-10 flex items-center",children:y.jsxs("label",{className:"inline-flex relative items-center cursor-pointer",children:[y.jsx("input",{type:"checkbox",name:"isEnrollmentOpen",className:"sr-only peer",checked:h.isEnrollmentOpen!==!1,onChange:A}),y.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"}),y.jsx("span",{className:"ml-3 text-sm font-medium",children:h.isEnrollmentOpen!==!1?s("courseEditor.enrollmentOpen"):s("courseEditor.enrollmentClosed")})]})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium",children:s("courseEditor.contentLabel")}),y.jsx("div",{ref:oe,style:{height:"250px"},className:"bg-white dark:text-gray-900 mt-1"})]}),(u==null?void 0:u.role)==="admin"&&!n&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:s("courseEditor.assignedAdmins.title")}),y.jsx("div",{className:"mt-2 space-y-2 border dark:border-gray-600 rounded-md p-3 max-h-40 overflow-y-auto",children:m.length>0?m.map(z=>{var re;return y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{id:`admin_${z.uid}`,type:"checkbox",checked:((re=h.assignedAdmins)==null?void 0:re.includes(z.uid))||!1,onChange:ce=>x(z.uid,ce.target.checked),className:"h-4 w-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),y.jsxs("label",{htmlFor:`admin_${z.uid}`,className:"ml-3 text-sm text-gray-700 dark:text-gray-300",children:[`${z.name} ${z.surname}`.trim()," (",z.email,")"]})]},z.uid)}):y.jsx("p",{className:"text-sm text-gray-500",children:s("courseEditor.assignedAdmins.none")})})]})]}),y.jsx("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700/50 text-right rounded-b-lg",children:y.jsx("button",{type:"submit",disabled:C,className:"inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:bg-primary-400",children:C?y.jsx(St,{size:20}):s("courseEditor.saveButton")})})]}),B==="certificate"&&!n&&i&&y.jsx("div",{className:"p-6",children:y.jsx(w4,{courseId:i})}),B==="quiz"&&!n&&i&&y.jsx("div",{className:"p-6",children:y.jsx(T4,{courseId:i})}),B==="survey"&&!n&&i&&y.jsx("div",{className:"p-6",children:y.jsx(x4,{courseId:i})}),B==="chat"&&!n&&i&&y.jsxs("div",{className:"p-6",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:s("course.discussion")}),y.jsxs("div",{className:"h-96 overflow-y-auto border dark:border-gray-600 rounded-md p-4 mb-4 space-y-2 bg-gray-50 dark:bg-gray-900/50",children:[U.map(z=>y.jsxs("div",{className:"group relative py-1 pr-8",children:[z.replyTo&&y.jsxs("div",{className:"ml-4 mb-1 p-2 rounded-md bg-gray-200 dark:bg-gray-700 text-xs text-gray-600 dark:text-gray-400 border-l-4 border-gray-400 dark:border-gray-500",children:[y.jsx("p",{className:"font-bold",children:z.replyTo.senderName}),y.jsx("p",{className:"truncate",children:z.replyTo.text})]}),y.jsxs("div",{children:[y.jsx("span",{className:`font-bold ${z.senderRole==="admin"||z.senderRole==="sub-admin"?"text-primary-500":"text-gray-800 dark:text-gray-200"}`,children:z.senderName}),y.jsx("span",{className:"text-xs text-gray-400 ml-2",children:V(z.timestamp)}),y.jsx("p",{className:"text-gray-600 dark:text-gray-300 whitespace-pre-wrap ml-1",children:z.text})]}),y.jsx("button",{onClick:()=>le(z),title:s("chat.replyAction"),className:"absolute top-1/2 -translate-y-1/2 right-0 p-1 rounded-full text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx(D,{})})]},z.id)),U.length===0&&y.jsx("p",{className:"text-center py-4 text-gray-400",children:s("course.noMessages")})]}),$&&y.jsx("div",{className:"p-2 mb-2 rounded-md bg-primary-50 dark:bg-primary-900/40 text-sm text-primary-800 dark:text-primary-200 border-l-4 border-primary-500",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"font-bold",children:[s("chat.replyingTo")," ",$.senderName]}),y.jsx("p",{className:"truncate text-xs",children:$.text})]}),y.jsx("button",{onClick:()=>le(null),className:"p-1 rounded-full hover:bg-black/10","aria-label":"Cancel reply",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),y.jsxs("form",{onSubmit:I,className:"flex gap-2",children:[y.jsx("input",{type:"text",value:W,onChange:z=>j(z.target.value),className:"flex-grow bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 text-gray-900 dark:text-white",placeholder:s("course.messagePlaceholder")}),y.jsx("button",{type:"submit",className:"bg-primary-600 text-white font-bold py-2 px-4 rounded hover:bg-primary-700 disabled:bg-primary-400",disabled:!W.trim(),children:s("course.sendMessage")})]})]}),["certificate","quiz","survey","chat"].includes(B)&&n&&y.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:y.jsx("p",{children:s("courseEditor.saveFirstMessage")})})]})})]})]})},k4=()=>{const{userProfile:i}=Gr(),e=Fr(),{t:n}=Qt(),{showNotification:s}=wi(),[o,u]=P.useState([]),[h,p]=P.useState(!0),[m,g]=P.useState({});P.useEffect(()=>{if((i==null?void 0:i.role)!=="admin"){e("/admin");return}(async()=>{p(!0);try{const M=(await Ut(rt(Se,"users"))).docs.map(B=>B.data());u(M)}catch(C){console.error("Error fetching users:",C)}finally{p(!1)}})()},[i,e]);const E=async(T,C)=>{g(M=>({...M,[T]:!0}));try{const M=mt(Se,`users/${T}`);await Ns(M,{role:C}),u(B=>B.map(X=>X.uid===T?{...X,role:C}:X)),s(n("notification.success.userRoleUpdated"),"success")}catch(M){console.error("Error updating user role:",M),s(n("notification.error.userRoleUpdateFailed"),"error")}finally{g(M=>({...M,[T]:!1}))}};return h?y.jsx(Au,{}):y.jsxs("div",{className:"max-w-7xl mx-auto py-10 px-4 sm:px-6 lg:px-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:n("userManagement.title")}),y.jsx("button",{onClick:()=>e("/admin"),className:"text-primary-600 dark:text-primary-400 hover:underline",children:n("userManagement.back")})]}),y.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[y.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:y.jsxs("tr",{children:[y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("userManagement.table.name")}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("userManagement.table.email")}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("userManagement.table.role")})]})}),y.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o.map(T=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:`${T.name} ${T.surname}`.trim()||"N/A"}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:T.email}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("select",{value:T.role,onChange:C=>E(T.uid,C.target.value),disabled:m[T.uid]||T.uid===(i==null?void 0:i.uid),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:opacity-70 disabled:cursor-not-allowed",children:[y.jsx("option",{value:"user",children:n("userManagement.role.user")}),y.jsx("option",{value:"sub-admin",children:n("userManagement.role.subAdmin")}),y.jsx("option",{value:"admin",children:n("userManagement.role.admin")})]}),m[T.uid]&&y.jsx(St,{size:20})]})})]},T.uid))})]})})})]})},O4=()=>{const{t:i}=Qt();return y.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900 text-center px-4",children:[y.jsx("h1",{className:"text-6xl font-extrabold text-primary-600 dark:text-primary-400",children:"404"}),y.jsx("h2",{className:"mt-4 text-3xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-4xl",children:i("notFound.title")}),y.jsx("p",{className:"mt-4 text-lg text-gray-500 dark:text-gray-400",children:i("notFound.message")}),y.jsx("div",{className:"mt-10",children:y.jsx(ua,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:i("notFound.goHome")})})]})},Tx=P.createContext(void 0),wi=()=>{const i=P.useContext(Tx);if(!i)throw new Error("useNotification must be used within a NotificationProvider");return i},M4=({notification:i,onClose:e})=>{if(!i)return null;const n="fixed top-20 right-5 z-50 px-6 py-4 rounded-lg shadow-lg text-white transition-opacity duration-300",s=i.type==="success"?"bg-green-500":"bg-red-500";return y.jsxs("div",{className:`${n} ${s}`,role:"alert",children:[y.jsx("span",{children:i.message}),y.jsx("button",{onClick:e,className:"ml-4 font-bold",children:"X"})]})},V4=({children:i})=>{const[e,n]=P.useState(null),o={showNotification:P.useCallback((u,h="success")=>{n({message:u,type:h}),setTimeout(()=>{n(null)},5e3)},[])};return y.jsxs(Tx.Provider,{value:o,children:[i,y.jsx(M4,{notification:e,onClose:()=>n(null)})]})},j4=()=>y.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[y.jsx(a4,{}),y.jsx("main",{className:"flex-grow",children:y.jsx(Gh,{})}),y.jsx("footer",{className:"py-4 px-4 text-center text-sm text-gray-500 dark:text-gray-400",children:" developed by Tle Narongphisit | CTTC Suratthani @ CPD.go.th"})]});function P4(){return y.jsx(WD,{children:y.jsx(XD,{children:y.jsx(V4,{children:y.jsx(C1,{children:y.jsxs(i1,{children:[y.jsx(Yn,{element:y.jsx(ZD,{}),children:y.jsx(Yn,{path:"/login",element:y.jsx(u4,{})})}),y.jsxs(Yn,{element:y.jsx(j4,{}),children:[y.jsx(Yn,{path:"/",element:y.jsx(jm,{children:y.jsx(c4,{})})}),y.jsx(Yn,{path:"/course/:courseId",element:y.jsx(jm,{children:y.jsx(v4,{})})}),y.jsx(Yn,{path:"/profile",element:y.jsx(jm,{children:y.jsx(h4,{})})}),y.jsxs(Yn,{path:"/admin",element:y.jsx(e4,{}),children:[y.jsx(Yn,{index:!0,element:y.jsx(b4,{})}),y.jsx(Yn,{path:"course/:courseId",element:y.jsx(D4,{})}),y.jsx(Yn,{path:"users",element:y.jsx(k4,{})})]}),y.jsx(Yn,{path:"*",element:y.jsx(O4,{})})]})]})})})})})}const xx=document.getElementById("root");if(!xx)throw new Error("Could not find root element to mount to");const L4=hS.createRoot(xx);L4.render(y.jsx(rS.StrictMode,{children:y.jsx(P4,{})}));
