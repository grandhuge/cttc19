<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แบบฟอร์มตอบรับการเข้าร่วมโครงการ by CTTC19</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
            font-size: 16px;
            line-height: 1.6;
            
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }
        
        /* Larger text and buttons for better readability */
        .text-lg-custom {
            font-size: 1.25rem;
        }
        
        .text-xl-custom {
            font-size: 1.5rem;
        }
        
        .btn-large {
            padding: 1rem 2rem;
            font-size: 1.125rem;
            min-height: 3.5rem;
        }
        
        .input-large {
            padding: 1rem;
            font-size: 1.125rem;
            min-height: 3.5rem;
        }
        
        /* High contrast colors for better visibility */
        .high-contrast-bg {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
        }
        
        .high-contrast-text {
            color: #1f2937;
        }
        
        .success-bg {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }
        
        .warning-bg {
            background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
        }
        
        /* Card shadows for better depth perception */
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .card-shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* Drag and drop styles */
        .dragging {
            opacity: 0.7;
            transform: scale(1.05);
            z-index: 1000;
        }
        
        .drop-zone {
            min-height: 180px;
            border: 3px dashed #cbd5e1;
            transition: all 0.3s ease;
            border-radius: 16px;
            padding: 1.5rem !important;
        }
        
        .drop-zone.drag-over {
            border-color: #3b82f6;
            background-color: #eff6ff;
            border-style: solid;
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }
        
        .drop-zone:hover {
            border-color: #60a5fa;
            background-color: rgba(239, 246, 255, 0.5);
        }
        
        .participant-card {
            cursor: move;
            transition: all 0.3s ease;
            border-radius: 12px;
        }
        
        .participant-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .participant-card.compact {
            transform: scale(0.85);
            margin: 0.5rem 0;
        }
        
        .participant-card.compact:hover {
            transform: scale(0.9) translateY(-2px);
        }
        
        .room-card {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            border-radius: 16px;
        }
        
        .single-room {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            border-radius: 16px;
        }
        
        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .mobile-text-base {
                font-size: 1rem;
            }
            
            .mobile-btn {
                padding: 0.875rem 1.5rem;
                font-size: 1rem;
            }
            
            .mobile-input {
                padding: 0.875rem;
                font-size: 1rem;
            }
        }
        
        /* Focus styles for accessibility */
        .focus-ring:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* Loading animation */
        .loading-dots {
            display: inline-block;
        }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="bg-white rounded-xl card-shadow-lg p-6 sm:p-8 mb-8">
            <div class="text-center">
                <div class="flex justify-between items-start mb-6">
                    <div class="flex-1 flex justify-start">
                        <img src="../logo-cttc19.png" alt="CTTC19 Logo" class="h-24 w-auto" onerror="this.style.display='none';">
                    </div>
                    <div class="flex-1 text-center">
                        <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold high-contrast-text">แบบฟอร์มตอบรับการเข้าร่วมโครงการ</h1>
                    </div>
                    <div class="flex-1 flex justify-end">
                        <button id="viewSummaryBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                            ดูสรุปข้อมูล
                        </button>
                    </div>
                </div>
                <div class="high-contrast-bg text-white p-6 sm:p-8 rounded-xl">
                    <h2 class="text-lg sm:text-xl lg:text-2xl font-semibold mb-4 leading-relaxed">การจัดทำแผนงาน/โครงการและงบประมาณด้านการพัฒนาบุคลากร</h2>
                    <p class="text-base sm:text-lg mb-4 leading-relaxed">กรมส่งเสริมสหกรณ์และบุคลากรสหกรณ์/กลุ่มเกษตรกร ประจำปีงบประมาณ พ.ศ. 2569</p>
                    <p class="text-base leading-relaxed mb-4">จัดโดย ศูนย์ถ่ายทอดเทคโนโลยีการสหกรณ์ที่ 19 จังหวัดสุราษฎร์ธานี</p>
                    <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-8 mt-6">
                        <div class="flex items-center text-base sm:text-lg">
                            <svg class="w-6 h-6 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                            </svg>
                            <span>โรงแรมไดมอนด์พลาซ่า</span>
                        </div>
                        <div class="flex items-center text-base sm:text-lg">
                            <svg class="w-6 h-6 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                            </svg>
                            <span>19-20 ตุลาคม 2568</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Section -->
        <div class="bg-white rounded-xl card-shadow-lg p-6 sm:p-8 mb-8">
            <h3 class="text-xl sm:text-2xl lg:text-3xl font-bold high-contrast-text mb-8">ข้อมูลผู้เข้าร่วมโครงการ</h3>
            
            <form id="registrationForm">
                <!-- Department Selection -->
                <div class="mb-8">
                    <label class="block text-base sm:text-lg font-semibold high-contrast-text mb-3">
                        <span class="text-red-600">*</span> สังกัด/หน่วยงาน
                    </label>
                    <select id="departmentSelect" class="w-full input-large border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-500 focus:border-blue-500 focus-ring transition-all duration-200">
                        <option value="">เลือกสังกัด/หน่วยงาน</option>
                    </select>
                </div>

                <!-- Coordinator Contact -->
                <div class="mb-8" id="coordinatorSection" style="display: none;">
                    <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-6">
                        <h4 class="text-lg sm:text-xl font-semibold high-contrast-text mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-3 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                            </svg>
                            ข้อมูลผู้ประสานงาน
                        </h4>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-base font-medium high-contrast-text mb-2">
                                    <span class="text-red-600">*</span> ชื่อผู้ประสานงาน
                                </label>
                                <input type="text" id="coordinatorName" class="w-full input-large border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-500 focus:border-blue-500 focus-ring transition-all duration-200" placeholder="ชื่อ-นามสกุล ผู้ประสานงาน" required>
                            </div>
                            <div>
                                <label class="block text-base font-medium high-contrast-text mb-2">
                                    <span class="text-red-600">*</span> เบอร์โทรติดต่อ
                                </label>
                                <input type="tel" id="coordinatorPhone" class="w-full input-large border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-500 focus:border-blue-500 focus-ring transition-all duration-200" placeholder="08X-XXX-XXXX" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" required>
                                <p class="text-sm text-gray-600 mt-2">รูปแบบ: 08X-XXX-XXXX</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Number of Participants -->
                <div class="mb-8" id="participantCountSection" style="display: none;">
                    <label class="block text-base sm:text-lg font-semibold high-contrast-text mb-3">
                        <span class="text-red-600">*</span> จำนวนผู้เข้าร่วมโครงการ
                    </label>
                    <select id="participantCount" class="w-full input-large border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-blue-500 focus:border-blue-500 focus-ring transition-all duration-200">
                        <option value="">เลือกจำนวนผู้เข้าร่วม</option>
                        <option value="1">1 คน</option>
                        <option value="2">2 คน</option>
                        <option value="3">3 คน</option>
                        <option value="4">4 คน</option>
                        <option value="5">5 คน</option>
                    </select>
                </div>

                <!-- Existing Data Alert -->
                <div id="existingDataAlert" class="warning-bg text-white px-6 py-4 rounded-xl mb-8 card-shadow" style="display: none;">
                    <div class="flex items-center">
                        <svg class="w-7 h-7 mr-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        <div>
                            <p class="text-lg font-semibold mb-1">พบข้อมูลการลงทะเบียนแล้ว</p>
                            <p class="text-base">หน่วยงานนี้เคยลงทะเบียนไว้แล้ว คุณสามารถแก้ไขข้อมูลได้</p>
                        </div>
                    </div>
                </div>

                <!-- Dynamic Participant Forms -->
                <div id="participantForms" class="space-y-8"></div>

                <!-- Submit Button -->
                <div class="mt-12" id="submitSection" style="display: none;">
                    <button type="submit" class="w-full btn-large high-contrast-bg text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-blue-300">
                        <span id="submitButtonText" class="text-lg sm:text-xl">ส่งข้อมูลการลงทะเบียน</span>
                    </button>
                </div>
            </form>
        </div>

        <!-- Room Pairing Section -->
        <div id="roomPairingSection" class="bg-white rounded-xl card-shadow-lg p-6 sm:p-8" style="display: none;">
            <h3 class="text-xl sm:text-2xl lg:text-3xl font-bold high-contrast-text mb-6">การจับคู่ห้องพัก</h3>
            <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-6 mb-8">
                <div class="flex items-start space-x-4">
                    <svg class="w-8 h-8 text-blue-600 flex-shrink-0 mt-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                    </svg>
                    <div>
                        <h4 class="text-lg font-semibold high-contrast-text mb-2">วิธีการใช้งาน</h4>
                        <ul class="text-base text-gray-700 space-y-1">
                            <li>• ลากและวางผู้เข้าร่วมเพื่อจับคู่ห้องพัก</li>
                            <li>• ห้องละสูงสุด 2 คน (กรณีตกเศษ ทางผู้จัดจะเป็นผู้จับคู่ให้)</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                <!-- Participants Pool -->
                <div>
                    <h4 class="text-lg sm:text-xl font-bold high-contrast-text mb-4 flex items-center">
                        <svg class="w-6 h-6 mr-3 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        ผู้เข้าร่วมทั้งหมด
                    </h4>
                    <div id="participantsPool" class="drop-zone bg-gradient-to-br from-gray-50 to-gray-100 border-3 border-dashed border-gray-400 hover:border-gray-500">
                        <div class="text-center py-6" id="poolEmptyState" style="display: none;">
                            <svg class="w-20 h-20 mx-auto text-gray-400 mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                            </svg>
                            <p class="text-gray-600 text-lg font-medium">ผู้เข้าร่วมทั้งหมดได้รับการจัดห้องแล้ว</p>
                        </div>
                        <!-- Participants will be added here -->
                    </div>
                </div>

                <!-- Room Assignments -->
                <div>
                    <h4 class="text-lg sm:text-xl font-bold high-contrast-text mb-4 flex items-center">
                        <svg class="w-6 h-6 mr-3 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"></path>
                        </svg>
                        การจัดห้องพัก
                    </h4>
                    <div id="roomAssignments" class="space-y-6">
                        <!-- Room cards will be added here -->
                    </div>
                </div>
            </div>

            <div class="mt-12">
                <button id="finalizeRooms" class="w-full btn-large success-bg text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-green-300">
                    <span class="text-lg sm:text-xl">ยืนยันการจัดห้องพัก</span>
                </button>
            </div>
        </div>

        <!-- Success Message -->
        <div id="successMessage" class="success-bg text-white px-8 py-6 rounded-xl mt-8 card-shadow-lg" style="display: none;">
            <div class="flex items-center">
                <svg class="w-8 h-8 mr-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                <div>
                    <p class="text-xl font-bold mb-1">ส่งข้อมูลเรียบร้อยแล้ว!</p>
                    <p class="text-lg">ขอบคุณสำหรับการลงทะเบียนเข้าร่วมโครงการ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Summary Modal -->
    <div id="summaryModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50" style="display: none;">
        <div class="bg-white p-6 sm:p-8 rounded-2xl card-shadow-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold high-contrast-text">สรุปข้อมูลการลงทะเบียน</h3>
                <button id="closeSummaryModal" class="text-gray-500 hover:text-gray-700 transition-colors">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="summaryContent" class="space-y-6">
                <div class="text-center py-8">
                    <div class="animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"></div>
                    <p class="text-gray-600">กำลังโหลดข้อมูล...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50" style="display: none;">
        <div class="bg-white p-8 sm:p-12 rounded-2xl card-shadow-lg max-w-md w-full mx-4">
            <div class="flex flex-col items-center space-y-6">
                <div class="animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600"></div>
                <div class="text-center">
                    <p class="text-xl font-bold high-contrast-text mb-2">กำลังบันทึกข้อมูล<span class="loading-dots"></span></p>
                    <p class="text-base text-gray-600">กรุณารอสักครู่</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50" style="display: none;">
        <div class="bg-white p-8 sm:p-10 rounded-2xl card-shadow-lg max-w-lg w-full mx-4">
            <div class="text-center mb-8">
                <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-4">
                    <svg class="h-8 w-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold high-contrast-text mb-3">ยืนยันการส่งข้อมูล</h3>
                <p class="text-base sm:text-lg text-gray-600">คุณต้องการส่งข้อมูลการลงทะเบียนนี้หรือไม่?</p>
            </div>
            <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
                <button id="confirmYes" class="flex-1 btn-large success-bg text-white rounded-xl font-bold hover:shadow-lg transition-all duration-300">
                    <span class="text-lg">ยืนยัน</span>
                </button>
                <button id="confirmNo" class="flex-1 btn-large bg-gray-600 text-white rounded-xl font-bold hover:bg-gray-700 hover:shadow-lg transition-all duration-300">
                    <span class="text-lg">ยกเลิก</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm">© developed by Tle Narongphisit | CTTC19 @ CPD</p>
        </div>
    </footer>

    <script src="./systemscript.js"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98ab1830a746731f',t:'MTc1OTgxNTk0OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
